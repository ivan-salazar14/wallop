{"/home/ivan/Documents/proj/wallop/backend/src/test/monitor.ts":{"path":"/home/ivan/Documents/proj/wallop/backend/src/test/monitor.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":4,"column":15},"end":{"line":4,"column":35}},"2":{"start":{"line":5,"column":13},"end":{"line":5,"column":28}},"3":{"start":{"line":6,"column":13},"end":{"line":6,"column":33}},"4":{"start":{"line":7,"column":0},"end":{"line":7,"column":19}},"5":{"start":{"line":8,"column":13},"end":{"line":8,"column":24}},"6":{"start":{"line":9,"column":24},"end":{"line":9,"column":50}},"7":{"start":{"line":10,"column":18},"end":{"line":10,"column":22}},"8":{"start":{"line":11,"column":0},"end":{"line":62,"column":3}},"9":{"start":{"line":12,"column":4},"end":{"line":21,"column":7}},"10":{"start":{"line":13,"column":8},"end":{"line":20,"column":11}},"11":{"start":{"line":16,"column":12},"end":{"line":17,"column":33}},"12":{"start":{"line":17,"column":16},"end":{"line":17,"column":33}},"13":{"start":{"line":18,"column":12},"end":{"line":18,"column":52}},"14":{"start":{"line":19,"column":12},"end":{"line":19,"column":19}},"15":{"start":{"line":22,"column":4},"end":{"line":35,"column":7}},"16":{"start":{"line":23,"column":8},"end":{"line":34,"column":11}},"17":{"start":{"line":24,"column":12},"end":{"line":33,"column":15}},"18":{"start":{"line":28,"column":16},"end":{"line":29,"column":37}},"19":{"start":{"line":29,"column":20},"end":{"line":29,"column":37}},"20":{"start":{"line":30,"column":16},"end":{"line":30,"column":60}},"21":{"start":{"line":31,"column":16},"end":{"line":31,"column":38}},"22":{"start":{"line":32,"column":16},"end":{"line":32,"column":23}},"23":{"start":{"line":36,"column":4},"end":{"line":48,"column":7}},"24":{"start":{"line":37,"column":8},"end":{"line":47,"column":11}},"25":{"start":{"line":38,"column":12},"end":{"line":46,"column":15}},"26":{"start":{"line":42,"column":16},"end":{"line":43,"column":37}},"27":{"start":{"line":43,"column":20},"end":{"line":43,"column":37}},"28":{"start":{"line":44,"column":16},"end":{"line":44,"column":51}},"29":{"start":{"line":45,"column":16},"end":{"line":45,"column":23}},"30":{"start":{"line":49,"column":4},"end":{"line":61,"column":7}},"31":{"start":{"line":50,"column":8},"end":{"line":60,"column":11}},"32":{"start":{"line":51,"column":12},"end":{"line":59,"column":15}},"33":{"start":{"line":55,"column":16},"end":{"line":56,"column":37}},"34":{"start":{"line":56,"column":20},"end":{"line":56,"column":37}},"35":{"start":{"line":57,"column":16},"end":{"line":57,"column":51}},"36":{"start":{"line":58,"column":16},"end":{"line":58,"column":23}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":11,"column":28},"end":{"line":11,"column":29}},"loc":{"start":{"line":11,"column":34},"end":{"line":62,"column":1}},"line":11},"1":{"name":"(anonymous_1)","decl":{"start":{"line":12,"column":11},"end":{"line":12,"column":12}},"loc":{"start":{"line":12,"column":27},"end":{"line":21,"column":5}},"line":12},"2":{"name":"(anonymous_2)","decl":{"start":{"line":15,"column":17},"end":{"line":15,"column":18}},"loc":{"start":{"line":15,"column":37},"end":{"line":20,"column":9}},"line":15},"3":{"name":"(anonymous_3)","decl":{"start":{"line":22,"column":29},"end":{"line":22,"column":30}},"loc":{"start":{"line":22,"column":35},"end":{"line":35,"column":5}},"line":22},"4":{"name":"(anonymous_4)","decl":{"start":{"line":23,"column":83},"end":{"line":23,"column":84}},"loc":{"start":{"line":23,"column":93},"end":{"line":34,"column":9}},"line":23},"5":{"name":"(anonymous_5)","decl":{"start":{"line":27,"column":21},"end":{"line":27,"column":22}},"loc":{"start":{"line":27,"column":41},"end":{"line":33,"column":13}},"line":27},"6":{"name":"(anonymous_6)","decl":{"start":{"line":36,"column":38},"end":{"line":36,"column":39}},"loc":{"start":{"line":36,"column":44},"end":{"line":48,"column":5}},"line":36},"7":{"name":"(anonymous_7)","decl":{"start":{"line":37,"column":62},"end":{"line":37,"column":63}},"loc":{"start":{"line":37,"column":72},"end":{"line":47,"column":9}},"line":37},"8":{"name":"(anonymous_8)","decl":{"start":{"line":41,"column":21},"end":{"line":41,"column":22}},"loc":{"start":{"line":41,"column":41},"end":{"line":46,"column":13}},"line":41},"9":{"name":"(anonymous_9)","decl":{"start":{"line":49,"column":27},"end":{"line":49,"column":28}},"loc":{"start":{"line":49,"column":33},"end":{"line":61,"column":5}},"line":49},"10":{"name":"(anonymous_10)","decl":{"start":{"line":50,"column":54},"end":{"line":50,"column":55}},"loc":{"start":{"line":50,"column":64},"end":{"line":60,"column":9}},"line":50},"11":{"name":"(anonymous_11)","decl":{"start":{"line":54,"column":21},"end":{"line":54,"column":22}},"loc":{"start":{"line":54,"column":41},"end":{"line":59,"column":13}},"line":54}},"branchMap":{"0":{"loc":{"start":{"line":16,"column":12},"end":{"line":17,"column":33}},"type":"if","locations":[{"start":{"line":16,"column":12},"end":{"line":17,"column":33}},{"start":{"line":16,"column":12},"end":{"line":17,"column":33}}],"line":16},"1":{"loc":{"start":{"line":28,"column":16},"end":{"line":29,"column":37}},"type":"if","locations":[{"start":{"line":28,"column":16},"end":{"line":29,"column":37}},{"start":{"line":28,"column":16},"end":{"line":29,"column":37}}],"line":28},"2":{"loc":{"start":{"line":42,"column":16},"end":{"line":43,"column":37}},"type":"if","locations":[{"start":{"line":42,"column":16},"end":{"line":43,"column":37}},{"start":{"line":42,"column":16},"end":{"line":43,"column":37}}],"line":42},"3":{"loc":{"start":{"line":55,"column":16},"end":{"line":56,"column":37}},"type":"if","locations":[{"start":{"line":55,"column":16},"end":{"line":56,"column":37}},{"start":{"line":55,"column":16},"end":{"line":56,"column":37}}],"line":55}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":0,"13":1,"14":1,"15":1,"16":1,"17":1,"18":1,"19":0,"20":1,"21":1,"22":1,"23":1,"24":1,"25":1,"26":1,"27":0,"28":1,"29":1,"30":1,"31":1,"32":1,"33":1,"34":0,"35":1,"36":1},"f":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1},"b":{"0":[0,1],"1":[0,1],"2":[0,1],"3":[0,1]},"inputSourceMap":{"version":3,"file":"/home/ivan/Documents/proj/wallop/backend/src/test/monitor.ts","sources":["/home/ivan/Documents/proj/wallop/backend/src/test/monitor.ts"],"names":[],"mappings":"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","sourcesContent":["import MonitorService from \"../domain/services/monitor\";\n//const assert = require(\"chai\").assert;\nlet chaiHttp = require('chai-http');\nconst chai = require(\"chai\");\nlet server = require('../server');\nchai.use(chaiHttp);\nvar expect = chai.expect;\nvar authenticatedUser = chai.request.agent(server);\nvar credentials = null;\n\ndescribe(\"Monitor Service\", () => {\n\n    before(function (done) {\n        authenticatedUser.post('/v1/login')\n            .send({ \"username\": \"Ivansalazar\", \"password\": \"asa12aawQ312\" })\n            .end(function (err, res) {\n                if (err)\n                    return done(err);\n\n                credentials = res.body.user.accessToken;\n                done();\n            });\n    });\n\n    describe(\"/POST follow\", () => {\n        it(\"Should be able to follow a coin if the user still does not follow it\", (done) => {\n            authenticatedUser.post('/v1/follow')\n                .set({ \"Authorization\": `Bearer ${credentials}` })\n                .send({ username: 'ivan', symbol: 'etc' })\n                .end(function (err, res) {\n                    if (err)\n                        return done(err);\n\n                    expect(res.body.message).to.be.an('string');\n                    console.log(res.body)\n                    done();\n                });\n        });\n    });\n\n    describe(\"/GET follow/:quantity\", () => {\n        it(\"Should be able to get all follow  coins of user\", (done) => {\n            authenticatedUser.get('/v1/follow/10')\n                .set({ \"Authorization\": `Bearer ${credentials}` })\n                .query({ order: -1 })\n                .end(function (err, res) {\n                    if (err)\n                        return done(err);\n\n                    expect(res.body).to.be.an('array');\n                    done();\n                });\n        });\n    });\n\n\n    describe(\"/GET coins\", () => {\n        it(\"should be allow listing all currencies \", (done) => {\n            authenticatedUser.get('/v1/coins')\n                .set({ \"Authorization\": `Bearer ${credentials}` })\n                .query({ page: 1, per_page: 100 })\n                .end(function (err, res) {\n                    if (err)\n                        return done(err);\n\n                    expect(res.body).to.be.an('array');\n                    done();\n                });\n        });\n    });\n});"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"c15c938e91538e7455e121cb97d16fdb1b4012e6","contentHash":"e9065c99e0c5d20d71eebb19847abb2098629fe996dfae188c7b099ce29fe26d"},"/home/ivan/Documents/proj/wallop/backend/src/server.ts":{"path":"/home/ivan/Documents/proj/wallop/backend/src/server.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":14},"end":{"line":6,"column":47}},"4":{"start":{"line":7,"column":18},"end":{"line":7,"column":79}},"5":{"start":{"line":8,"column":19},"end":{"line":8,"column":64}},"6":{"start":{"line":9,"column":23},"end":{"line":9,"column":72}},"7":{"start":{"line":10,"column":13},"end":{"line":10,"column":29}},"8":{"start":{"line":11,"column":11},"end":{"line":11,"column":118}},"9":{"start":{"line":12,"column":0},"end":{"line":12,"column":26}},"10":{"start":{"line":13,"column":0},"end":{"line":13,"column":71}},"11":{"start":{"line":14,"column":0},"end":{"line":14,"column":75}},"12":{"start":{"line":15,"column":13},"end":{"line":17,"column":2}},"13":{"start":{"line":16,"column":4},"end":{"line":16,"column":61}},"14":{"start":{"line":18,"column":0},"end":{"line":18,"column":24}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":15,"column":40},"end":{"line":15,"column":41}},"loc":{"start":{"line":15,"column":46},"end":{"line":17,"column":1}},"line":15}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3}},"s":{"0":1,"1":4,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1},"f":{"0":4,"1":1},"b":{"0":[1,1,1],"1":[4,0],"2":[4,4]},"inputSourceMap":{"version":3,"file":"/home/ivan/Documents/proj/wallop/backend/src/server.ts","sources":["/home/ivan/Documents/proj/wallop/backend/src/server.ts"],"names":[],"mappings":";;;;;AAAA,gDAAwB;AACxB,gFAAuD;AACvD,iEAAoD;AACpD,yEAA6D;AAE7D,MAAM,IAAI,GAAG,OAAO,CAAC,GAAG,CAAC,IAAI,CAAA;AAC7B,MAAM,EAAE,GAAG,OAAO,CAAC,GAAG,CAAC,SAAS,GAAG,KAAK,GAAG,OAAO,CAAC,GAAG,CAAC,OAAO,GAAG,GAAG,GAAG,OAAO,CAAC,GAAG,CAAC,OAAO,GAAG,GAAG,GAAG,OAAO,CAAC,GAAG,CAAC,OAAO,CAAC;AAEvH,iBAAO,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC;AAChB,WAAW,CAAC,kBAAmB,EAAE,MAAM,CAAC,OAAO,CAAC,GAAG,CAAC,iBAAiB,CAAC,CAAC,CAAC;AACxE,WAAW,CAAC,sBAAwB,EAAE,MAAM,CAAC,OAAO,CAAC,GAAG,CAAC,iBAAiB,CAAC,CAAC,CAAC;AAE7E,IAAI,MAAM,GAAG,aAAG,CAAC,MAAM,CAAC,IAAI,EAAE,GAAG,EAAE;IAC/B,OAAO,CAAC,GAAG,CAAC,qCAAqC,IAAI,EAAE,CAAC,CAAA;AAC5D,CAAC,CAAC,CAAA;AAEF,MAAM,CAAC,OAAO,GAAG,MAAM,CAAA","sourcesContent":["import app from './app';\nimport connect from './infra/databases/mongodb/connect'\nimport updateCoinsDatabase from \"./events/coinList\";\nimport updateCurrenciesDatabase from \"./events/currencyList\";\n\nconst port = process.env.PORT\nconst db = process.env.DB_DRIVER + '://' + process.env.DB_HOST + ':' + process.env.DB_PORT + '/' + process.env.DB_NAME;\n\nconnect({ db });\nsetInterval(updateCoinsDatabase, Number(process.env.TIME_UPDATE_COINS));\nsetInterval(updateCurrenciesDatabase, Number(process.env.TIME_UPDATE_COINS));\n\nvar server = app.listen(port, () => {\n    console.log(`app listening at http://localhost:${port}`)\n})\n\nmodule.exports = server"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"a220416059ab47c2c202498133c75e303a96e9dd","contentHash":"3f777fc2897a84882886bf5fcbd83016b9a7c201e165787c6c4428f32ecfa49a"},"/home/ivan/Documents/proj/wallop/backend/src/app.ts":{"path":"/home/ivan/Documents/proj/wallop/backend/src/app.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":9,"column":18},"end":{"line":9,"column":53}},"4":{"start":{"line":10,"column":17},"end":{"line":10,"column":34}},"5":{"start":{"line":11,"column":15},"end":{"line":11,"column":47}},"6":{"start":{"line":12,"column":17},"end":{"line":12,"column":51}},"7":{"start":{"line":13,"column":17},"end":{"line":13,"column":53}},"8":{"start":{"line":14,"column":24},"end":{"line":14,"column":65}},"9":{"start":{"line":15,"column":0},"end":{"line":15,"column":27}},"10":{"start":{"line":18,"column":8},"end":{"line":18,"column":42}},"11":{"start":{"line":19,"column":8},"end":{"line":19,"column":27}},"12":{"start":{"line":20,"column":8},"end":{"line":20,"column":22}},"13":{"start":{"line":23,"column":8},"end":{"line":23,"column":50}},"14":{"start":{"line":24,"column":8},"end":{"line":24,"column":42}},"15":{"start":{"line":25,"column":8},"end":{"line":25,"column":44}},"16":{"start":{"line":26,"column":8},"end":{"line":26,"column":51}},"17":{"start":{"line":27,"column":8},"end":{"line":27,"column":63}},"18":{"start":{"line":30,"column":8},"end":{"line":30,"column":42}},"19":{"start":{"line":33,"column":0},"end":{"line":33,"column":35}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":17,"column":4},"end":{"line":17,"column":5}},"loc":{"start":{"line":17,"column":18},"end":{"line":21,"column":5}},"line":17},"2":{"name":"(anonymous_2)","decl":{"start":{"line":22,"column":4},"end":{"line":22,"column":5}},"loc":{"start":{"line":22,"column":18},"end":{"line":28,"column":5}},"line":22},"3":{"name":"(anonymous_3)","decl":{"start":{"line":29,"column":4},"end":{"line":29,"column":5}},"loc":{"start":{"line":29,"column":13},"end":{"line":31,"column":5}},"line":29}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3}},"s":{"0":1,"1":5,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1},"f":{"0":5,"1":1,"2":1,"3":1},"b":{"0":[1,1,1],"1":[1,4],"2":[5,5]},"inputSourceMap":{"version":3,"file":"/home/ivan/Documents/proj/wallop/backend/src/app.ts","sources":["/home/ivan/Documents/proj/wallop/backend/src/app.ts"],"names":[],"mappings":";;;;;AAAA;;GAEG;AACH,sDAA8B;AAC9B,mCAAsC;AACtC,gDAAwB;AACxB,oDAA4B;AAC5B,sDAA8B;AAC9B,kEAAyC;AACzC,OAAO,CAAC,QAAQ,CAAC,CAAC,MAAM,EAAE,CAAA;AAC1B,MAAM,GAAG;IAGL;QACI,IAAI,CAAC,MAAM,GAAG,iBAAO,EAAE,CAAA;QACvB,IAAI,CAAC,WAAW,EAAE,CAAC;QACnB,IAAI,CAAC,MAAM,EAAE,CAAC;IAClB,CAAC;IAED,WAAW;QACP,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,iBAAO,CAAC,IAAI,EAAE,CAAC,CAAC;QAChC,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,cAAI,EAAE,CAAC,CAAC;QACxB,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,gBAAM,EAAE,CAAC,CAAC;QAC1B,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,uBAAY,EAAE,CAAC,CAAC;QAChC,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,cAAc,EAAE,qBAAY,CAAC,CAAC;IAClD,CAAC;IAED,MAAM;QACF,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,gBAAM,CAAC,CAAC;IAC5B,CAAC;CACJ;AAED,kBAAe,IAAI,GAAG,EAAE,CAAC,MAAM,CAAC;AAChC;;GAEG;AACH;;;;;;;;qCAQqC","sourcesContent":["/**\n * Required External Modules\n */\nimport express from 'express';\nimport { EventEmitter } from 'events';\nimport cors from \"cors\";\nimport helmet from \"helmet\";\nimport routes from \"./routes\";\nimport cookieParser from 'cookie-parser';\nrequire('dotenv').config()\nclass App {\n    public app;\n    public server;\n    constructor() {\n        this.server = express()\n        this.middlewares();\n        this.routes();\n    }\n\n    middlewares() {\n        this.server.use(express.json());\n        this.server.use(cors());\n        this.server.use(helmet());\n        this.server.use(cookieParser());\n        this.server.set('eventEmitter', EventEmitter);\n    }\n\n    routes() {\n        this.server.use(routes);\n    }\n}\n\nexport default new App().server;\n/**\n * App Variables\n */\n/*\nconst eventEmitter = new EventEmitter();\napp.set('eventEmitter', eventEmitter);\n\neventEmitter.on('start', (start, end) => {\n    console.log(`started from ${start} to ${end}`)\n})\n\neventEmitter.emit('start', 1, 100) */"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"cb8e815b3956a55d3e564ca399c0bdf3e63387d0","contentHash":"c04ca8b94d9db6dba1840af0f55d54df7bb3e6cfcd210db4f5449aa504d5b360"},"/home/ivan/Documents/proj/wallop/backend/src/routes.ts":{"path":"/home/ivan/Documents/proj/wallop/backend/src/routes.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":18},"end":{"line":6,"column":36}},"4":{"start":{"line":7,"column":15},"end":{"line":7,"column":53}},"5":{"start":{"line":8,"column":15},"end":{"line":8,"column":53}},"6":{"start":{"line":9,"column":18},"end":{"line":9,"column":59}},"7":{"start":{"line":10,"column":15},"end":{"line":10,"column":33}},"8":{"start":{"line":11,"column":0},"end":{"line":13,"column":3}},"9":{"start":{"line":12,"column":4},"end":{"line":12,"column":63}},"10":{"start":{"line":14,"column":0},"end":{"line":14,"column":34}},"11":{"start":{"line":15,"column":0},"end":{"line":15,"column":34}},"12":{"start":{"line":16,"column":0},"end":{"line":16,"column":37}},"13":{"start":{"line":17,"column":0},"end":{"line":17,"column":25}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":11,"column":16},"end":{"line":11,"column":17}},"loc":{"start":{"line":11,"column":30},"end":{"line":13,"column":1}},"line":11}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3}},"s":{"0":1,"1":3,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":0,"10":1,"11":1,"12":1,"13":1},"f":{"0":3,"1":0},"b":{"0":[1,1,1],"1":[3,0],"2":[3,3]},"inputSourceMap":{"version":3,"file":"/home/ivan/Documents/proj/wallop/backend/src/routes.ts","sources":["/home/ivan/Documents/proj/wallop/backend/src/routes.ts"],"names":[],"mappings":";;;;;AAAA,qCAAiC;AACjC,sDAAgC;AAChC,sDAA6B;AAC7B,4DAAmC;AAEnC,MAAM,MAAM,GAAG,gBAAM,EAAE,CAAC;AACxB,MAAM,CAAC,GAAG,CAAC,GAAG,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,EAAE;IACzB,OAAO,GAAG,CAAC,IAAI,CAAC,EAAE,OAAO,EAAE,4BAA4B,EAAE,CAAC,CAAC;AAC/D,CAAC,CAAC,CAAC;AAEH,MAAM,CAAC,GAAG,CAAC,KAAK,EAAE,cAAO,CAAC,CAAC;AAC3B,MAAM,CAAC,GAAG,CAAC,KAAK,EAAE,cAAI,CAAC,CAAC;AACxB,MAAM,CAAC,GAAG,CAAC,KAAK,EAAE,iBAAO,CAAC,CAAC;AAE3B,kBAAe,MAAM,CAAC","sourcesContent":["import { Router } from 'express';\nimport userApi from './api/user'\nimport auth from './api/auth'\nimport monitor from './api/monitor'\n\nconst routes = Router();\nroutes.get('/', (req, res) => {\n    return res.json({ message: 'Hello World connect to api' });\n});\n\nroutes.use('/v1', userApi);\nroutes.use('/v1', auth);\nroutes.use('/v1', monitor);\n\nexport default routes;\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"04bd4d58c6f041bfab0d4fb422f09a45f314d7d4","contentHash":"36ccdc185c2310fcc5935df56cdd401cd17218e7e9c9ccc57fcf1f19b2e70ed0"},"/home/ivan/Documents/proj/wallop/backend/src/api/user.ts":{"path":"/home/ivan/Documents/proj/wallop/backend/src/api/user.ts","statementMap":{"0":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"1":{"start":{"line":3,"column":28},"end":{"line":3,"column":110}},"2":{"start":{"line":3,"column":91},"end":{"line":3,"column":106}},"3":{"start":{"line":4,"column":4},"end":{"line":9,"column":7}},"4":{"start":{"line":5,"column":36},"end":{"line":5,"column":97}},"5":{"start":{"line":5,"column":42},"end":{"line":5,"column":70}},"6":{"start":{"line":5,"column":85},"end":{"line":5,"column":95}},"7":{"start":{"line":6,"column":35},"end":{"line":6,"column":100}},"8":{"start":{"line":6,"column":41},"end":{"line":6,"column":73}},"9":{"start":{"line":6,"column":88},"end":{"line":6,"column":98}},"10":{"start":{"line":7,"column":32},"end":{"line":7,"column":116}},"11":{"start":{"line":8,"column":8},"end":{"line":8,"column":78}},"12":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"13":{"start":{"line":12,"column":4},"end":{"line":12,"column":62}},"14":{"start":{"line":14,"column":0},"end":{"line":14,"column":62}},"15":{"start":{"line":15,"column":18},"end":{"line":15,"column":36}},"16":{"start":{"line":16,"column":15},"end":{"line":16,"column":66}},"17":{"start":{"line":17,"column":28},"end":{"line":17,"column":56}},"18":{"start":{"line":18,"column":19},"end":{"line":18,"column":37}},"19":{"start":{"line":27,"column":0},"end":{"line":45,"column":4}},"20":{"start":{"line":27,"column":102},"end":{"line":45,"column":2}},"21":{"start":{"line":28,"column":19},"end":{"line":28,"column":60}},"22":{"start":{"line":29,"column":4},"end":{"line":31,"column":5}},"23":{"start":{"line":30,"column":8},"end":{"line":30,"column":64}},"24":{"start":{"line":32,"column":4},"end":{"line":44,"column":5}},"25":{"start":{"line":33,"column":21},"end":{"line":39,"column":10}},"26":{"start":{"line":40,"column":8},"end":{"line":40,"column":34}},"27":{"start":{"line":43,"column":8},"end":{"line":43,"column":96}},"28":{"start":{"line":46,"column":0},"end":{"line":46,"column":29}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":44},"end":{"line":2,"column":45}},"loc":{"start":{"line":2,"column":89},"end":{"line":10,"column":1}},"line":2},"1":{"name":"adopt","decl":{"start":{"line":3,"column":13},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":26},"end":{"line":3,"column":112}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":70},"end":{"line":3,"column":71}},"loc":{"start":{"line":3,"column":89},"end":{"line":3,"column":108}},"line":3},"3":{"name":"(anonymous_3)","decl":{"start":{"line":4,"column":36},"end":{"line":4,"column":37}},"loc":{"start":{"line":4,"column":63},"end":{"line":9,"column":5}},"line":4},"4":{"name":"fulfilled","decl":{"start":{"line":5,"column":17},"end":{"line":5,"column":26}},"loc":{"start":{"line":5,"column":34},"end":{"line":5,"column":99}},"line":5},"5":{"name":"rejected","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":25}},"loc":{"start":{"line":6,"column":33},"end":{"line":6,"column":102}},"line":6},"6":{"name":"step","decl":{"start":{"line":7,"column":17},"end":{"line":7,"column":21}},"loc":{"start":{"line":7,"column":30},"end":{"line":7,"column":118}},"line":7},"7":{"name":"(anonymous_7)","decl":{"start":{"line":11,"column":56},"end":{"line":11,"column":57}},"loc":{"start":{"line":11,"column":71},"end":{"line":13,"column":1}},"line":11},"8":{"name":"(anonymous_8)","decl":{"start":{"line":27,"column":88},"end":{"line":27,"column":89}},"loc":{"start":{"line":27,"column":102},"end":{"line":45,"column":2}},"line":27},"9":{"name":"(anonymous_9)","decl":{"start":{"line":27,"column":136},"end":{"line":27,"column":137}},"loc":{"start":{"line":27,"column":149},"end":{"line":45,"column":1}},"line":27}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":17},"end":{"line":2,"column":21}},{"start":{"line":2,"column":25},"end":{"line":2,"column":39}},{"start":{"line":2,"column":44},"end":{"line":10,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":35},"end":{"line":3,"column":109}},"type":"cond-expr","locations":[{"start":{"line":3,"column":56},"end":{"line":3,"column":61}},{"start":{"line":3,"column":64},"end":{"line":3,"column":109}}],"line":3},"2":{"loc":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"type":"binary-expr","locations":[{"start":{"line":4,"column":16},"end":{"line":4,"column":17}},{"start":{"line":4,"column":22},"end":{"line":4,"column":33}}],"line":4},"3":{"loc":{"start":{"line":7,"column":32},"end":{"line":7,"column":115}},"type":"cond-expr","locations":[{"start":{"line":7,"column":46},"end":{"line":7,"column":67}},{"start":{"line":7,"column":70},"end":{"line":7,"column":115}}],"line":7},"4":{"loc":{"start":{"line":8,"column":51},"end":{"line":8,"column":67}},"type":"binary-expr","locations":[{"start":{"line":8,"column":51},"end":{"line":8,"column":61}},{"start":{"line":8,"column":65},"end":{"line":8,"column":67}}],"line":8},"5":{"loc":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"type":"binary-expr","locations":[{"start":{"line":11,"column":23},"end":{"line":11,"column":27}},{"start":{"line":11,"column":31},"end":{"line":11,"column":51}},{"start":{"line":11,"column":56},"end":{"line":13,"column":1}}],"line":11},"6":{"loc":{"start":{"line":12,"column":11},"end":{"line":12,"column":61}},"type":"cond-expr","locations":[{"start":{"line":12,"column":37},"end":{"line":12,"column":40}},{"start":{"line":12,"column":43},"end":{"line":12,"column":61}}],"line":12},"7":{"loc":{"start":{"line":12,"column":12},"end":{"line":12,"column":33}},"type":"binary-expr","locations":[{"start":{"line":12,"column":12},"end":{"line":12,"column":15}},{"start":{"line":12,"column":19},"end":{"line":12,"column":33}}],"line":12},"8":{"loc":{"start":{"line":29,"column":4},"end":{"line":31,"column":5}},"type":"if","locations":[{"start":{"line":29,"column":4},"end":{"line":31,"column":5}},{"start":{"line":29,"column":4},"end":{"line":31,"column":5}}],"line":29}},"s":{"0":1,"1":1,"2":0,"3":1,"4":0,"5":0,"6":0,"7":1,"8":1,"9":0,"10":2,"11":1,"12":1,"13":1,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":1,"21":1,"22":1,"23":0,"24":1,"25":1,"26":0,"27":1,"28":1},"f":{"0":1,"1":1,"2":0,"3":1,"4":0,"5":1,"6":2,"7":1,"8":1,"9":1},"b":{"0":[1,1,1],"1":[1,0],"2":[1,1],"3":[1,1],"4":[1,1],"5":[1,1,1],"6":[1,0],"7":[1,1],"8":[0,1]},"inputSourceMap":{"version":3,"file":"/home/ivan/Documents/proj/wallop/backend/src/api/user.ts","sources":["/home/ivan/Documents/proj/wallop/backend/src/api/user.ts"],"names":[],"mappings":";;;;;;;;;;;;;;AAEA,qCAAiC;AACjC,mEAAkD;AAClD,yDAAqD;AACrD,MAAM,UAAU,GAAG,gBAAM,EAAE,CAAC;AAE5B;;;;;;;EAOE;AACF,UAAU,CAAC,IAAI,CAAC,OAAO,EACnB,cAAW,CAAC,mBAAmB,EAAE,EACjC,cAAW,CAAC,QAAQ,EACpB,CAAO,GAAG,EAAE,GAAG,EAAE,EAAE;IACf,MAAM,MAAM,GAAG,oCAAgB,CAAC,GAAG,CAAC,CAAC;IACrC,IAAI,CAAC,MAAM,CAAC,OAAO,EAAE,EAAE;QACnB,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAE,MAAM,EAAE,MAAM,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC;KAC3D;IACD,IAAI;QAEA,MAAM,IAAI,GAAG,MAAM,cAAW,CAAC,UAAU,CAAC;YACtC,IAAI,EAAE,GAAG,CAAC,IAAI,CAAC,IAAI;YACnB,QAAQ,EAAE,GAAG,CAAC,IAAI,CAAC,QAAQ;YAC3B,QAAQ,EAAE,GAAG,CAAC,IAAI,CAAC,QAAQ;YAC3B,QAAQ,EAAE,GAAG,CAAC,IAAI,CAAC,QAAQ;YAC3B,WAAW,EAAE,GAAG,CAAC,IAAI,CAAC,WAAW;SACpC,CAAC,CAAC;QAEH,OAAO,GAAG,CAAC,IAAI,CAAC,EAAE,IAAI,EAAE,CAAC,CAAC;KAC7B;IAAC,OAAO,KAAK,EAAE;QAEZ,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAE,OAAO,EAAE,qBAAqB,EAAE,MAAM,EAAE,KAAK,CAAC,QAAQ,EAAE,CAAC,CAAC;KAC3F;AACL,CAAC,CAAA,CAAC,CAAC;AAEP,kBAAe,UAAU,CAAC","sourcesContent":["\n\nimport { Router } from 'express';\nimport UserService from '../domain/services/user';\nimport { validationResult } from 'express-validator';\nconst userRouter = Router();\n\n/*\nEndpoint to create a user. \n\n@params name : name of user.\n@params lastname : lastname of user.\n@params password : password of user.\n@params prefer_coin : currency preferred by the user.\n*/\nuserRouter.post('/user',\n    UserService.userValidationRules(),\n    UserService.validate,\n    async (req, res) => {\n        const errors = validationResult(req);\n        if (!errors.isEmpty()) {\n            return res.status(422).json({ errors: errors.array() });\n        }\n        try {\n\n            const user = await UserService.CreateUser({\n                name: req.body.name,\n                lastName: req.body.lastName,\n                username: req.body.username,\n                password: req.body.password,\n                prefer_coin: req.body.prefer_coin,\n            });\n\n            return res.send({ user });\n        } catch (error) {\n\n            return res.status(422).json({ message: \"error en los campos\", fields: error.keyValue });\n        }\n    });\n\nexport default userRouter;"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"b8a2ad0f99d48d0d77bf3fc86786212bf5175794","contentHash":"cfbfb417b57c9b70901fce45e2ab1ba8eaa91b05caa1f098aa935230275d42f9"},"/home/ivan/Documents/proj/wallop/backend/src/domain/services/user.ts":{"path":"/home/ivan/Documents/proj/wallop/backend/src/domain/services/user.ts","statementMap":{"0":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"1":{"start":{"line":3,"column":28},"end":{"line":3,"column":110}},"2":{"start":{"line":3,"column":91},"end":{"line":3,"column":106}},"3":{"start":{"line":4,"column":4},"end":{"line":9,"column":7}},"4":{"start":{"line":5,"column":36},"end":{"line":5,"column":97}},"5":{"start":{"line":5,"column":42},"end":{"line":5,"column":70}},"6":{"start":{"line":5,"column":85},"end":{"line":5,"column":95}},"7":{"start":{"line":6,"column":35},"end":{"line":6,"column":100}},"8":{"start":{"line":6,"column":41},"end":{"line":6,"column":73}},"9":{"start":{"line":6,"column":88},"end":{"line":6,"column":98}},"10":{"start":{"line":7,"column":32},"end":{"line":7,"column":116}},"11":{"start":{"line":8,"column":8},"end":{"line":8,"column":78}},"12":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"13":{"start":{"line":12,"column":4},"end":{"line":12,"column":62}},"14":{"start":{"line":14,"column":0},"end":{"line":14,"column":62}},"15":{"start":{"line":15,"column":15},"end":{"line":15,"column":57}},"16":{"start":{"line":16,"column":16},"end":{"line":16,"column":50}},"17":{"start":{"line":17,"column":17},"end":{"line":17,"column":51}},"18":{"start":{"line":18,"column":19},"end":{"line":18,"column":21}},"19":{"start":{"line":20,"column":4},"end":{"line":38,"column":7}},"20":{"start":{"line":21,"column":19},"end":{"line":21,"column":68}},"21":{"start":{"line":22,"column":8},"end":{"line":37,"column":11}},"22":{"start":{"line":30,"column":12},"end":{"line":30,"column":38}},"23":{"start":{"line":31,"column":12},"end":{"line":31,"column":33}},"24":{"start":{"line":32,"column":12},"end":{"line":32,"column":33}},"25":{"start":{"line":33,"column":12},"end":{"line":33,"column":24}},"26":{"start":{"line":36,"column":12},"end":{"line":36,"column":24}},"27":{"start":{"line":40,"column":28},"end":{"line":47,"column":1}},"28":{"start":{"line":41,"column":4},"end":{"line":46,"column":6}},"29":{"start":{"line":48,"column":17},"end":{"line":58,"column":1}},"30":{"start":{"line":49,"column":19},"end":{"line":49,"column":48}},"31":{"start":{"line":50,"column":4},"end":{"line":52,"column":5}},"32":{"start":{"line":51,"column":8},"end":{"line":51,"column":22}},"33":{"start":{"line":53,"column":28},"end":{"line":53,"column":30}},"34":{"start":{"line":54,"column":4},"end":{"line":54,"column":78}},"35":{"start":{"line":54,"column":30},"end":{"line":54,"column":76}},"36":{"start":{"line":55,"column":4},"end":{"line":57,"column":7}},"37":{"start":{"line":59,"column":0},"end":{"line":63,"column":2}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":44},"end":{"line":2,"column":45}},"loc":{"start":{"line":2,"column":89},"end":{"line":10,"column":1}},"line":2},"1":{"name":"adopt","decl":{"start":{"line":3,"column":13},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":26},"end":{"line":3,"column":112}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":70},"end":{"line":3,"column":71}},"loc":{"start":{"line":3,"column":89},"end":{"line":3,"column":108}},"line":3},"3":{"name":"(anonymous_3)","decl":{"start":{"line":4,"column":36},"end":{"line":4,"column":37}},"loc":{"start":{"line":4,"column":63},"end":{"line":9,"column":5}},"line":4},"4":{"name":"fulfilled","decl":{"start":{"line":5,"column":17},"end":{"line":5,"column":26}},"loc":{"start":{"line":5,"column":34},"end":{"line":5,"column":99}},"line":5},"5":{"name":"rejected","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":25}},"loc":{"start":{"line":6,"column":33},"end":{"line":6,"column":102}},"line":6},"6":{"name":"step","decl":{"start":{"line":7,"column":17},"end":{"line":7,"column":21}},"loc":{"start":{"line":7,"column":30},"end":{"line":7,"column":118}},"line":7},"7":{"name":"(anonymous_7)","decl":{"start":{"line":11,"column":56},"end":{"line":11,"column":57}},"loc":{"start":{"line":11,"column":71},"end":{"line":13,"column":1}},"line":11},"8":{"name":"CreateUser","decl":{"start":{"line":19,"column":9},"end":{"line":19,"column":19}},"loc":{"start":{"line":19,"column":73},"end":{"line":39,"column":1}},"line":19},"9":{"name":"(anonymous_9)","decl":{"start":{"line":20,"column":43},"end":{"line":20,"column":44}},"loc":{"start":{"line":20,"column":56},"end":{"line":38,"column":5}},"line":20},"10":{"name":"(anonymous_10)","decl":{"start":{"line":29,"column":18},"end":{"line":29,"column":19}},"loc":{"start":{"line":29,"column":28},"end":{"line":34,"column":9}},"line":29},"11":{"name":"(anonymous_11)","decl":{"start":{"line":35,"column":19},"end":{"line":35,"column":20}},"loc":{"start":{"line":35,"column":30},"end":{"line":37,"column":9}},"line":35},"12":{"name":"(anonymous_12)","decl":{"start":{"line":40,"column":28},"end":{"line":40,"column":29}},"loc":{"start":{"line":40,"column":34},"end":{"line":47,"column":1}},"line":40},"13":{"name":"(anonymous_13)","decl":{"start":{"line":48,"column":17},"end":{"line":48,"column":18}},"loc":{"start":{"line":48,"column":37},"end":{"line":58,"column":1}},"line":48},"14":{"name":"(anonymous_14)","decl":{"start":{"line":54,"column":23},"end":{"line":54,"column":24}},"loc":{"start":{"line":54,"column":30},"end":{"line":54,"column":76}},"line":54}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":17},"end":{"line":2,"column":21}},{"start":{"line":2,"column":25},"end":{"line":2,"column":39}},{"start":{"line":2,"column":44},"end":{"line":10,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":35},"end":{"line":3,"column":109}},"type":"cond-expr","locations":[{"start":{"line":3,"column":56},"end":{"line":3,"column":61}},{"start":{"line":3,"column":64},"end":{"line":3,"column":109}}],"line":3},"2":{"loc":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"type":"binary-expr","locations":[{"start":{"line":4,"column":16},"end":{"line":4,"column":17}},{"start":{"line":4,"column":22},"end":{"line":4,"column":33}}],"line":4},"3":{"loc":{"start":{"line":7,"column":32},"end":{"line":7,"column":115}},"type":"cond-expr","locations":[{"start":{"line":7,"column":46},"end":{"line":7,"column":67}},{"start":{"line":7,"column":70},"end":{"line":7,"column":115}}],"line":7},"4":{"loc":{"start":{"line":8,"column":51},"end":{"line":8,"column":67}},"type":"binary-expr","locations":[{"start":{"line":8,"column":51},"end":{"line":8,"column":61}},{"start":{"line":8,"column":65},"end":{"line":8,"column":67}}],"line":8},"5":{"loc":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"type":"binary-expr","locations":[{"start":{"line":11,"column":23},"end":{"line":11,"column":27}},{"start":{"line":11,"column":31},"end":{"line":11,"column":51}},{"start":{"line":11,"column":56},"end":{"line":13,"column":1}}],"line":11},"6":{"loc":{"start":{"line":12,"column":11},"end":{"line":12,"column":61}},"type":"cond-expr","locations":[{"start":{"line":12,"column":37},"end":{"line":12,"column":40}},{"start":{"line":12,"column":43},"end":{"line":12,"column":61}}],"line":12},"7":{"loc":{"start":{"line":12,"column":12},"end":{"line":12,"column":33}},"type":"binary-expr","locations":[{"start":{"line":12,"column":12},"end":{"line":12,"column":15}},{"start":{"line":12,"column":19},"end":{"line":12,"column":33}}],"line":12},"8":{"loc":{"start":{"line":50,"column":4},"end":{"line":52,"column":5}},"type":"if","locations":[{"start":{"line":50,"column":4},"end":{"line":52,"column":5}},{"start":{"line":50,"column":4},"end":{"line":52,"column":5}}],"line":50}},"s":{"0":1,"1":1,"2":0,"3":1,"4":1,"5":1,"6":0,"7":0,"8":0,"9":0,"10":2,"11":1,"12":1,"13":2,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":1,"21":1,"22":0,"23":0,"24":0,"25":0,"26":1,"27":1,"28":1,"29":1,"30":1,"31":1,"32":1,"33":0,"34":0,"35":0,"36":0,"37":1},"f":{"0":1,"1":1,"2":0,"3":1,"4":1,"5":0,"6":2,"7":2,"8":1,"9":1,"10":0,"11":1,"12":1,"13":1,"14":0},"b":{"0":[1,1,1],"1":[1,0],"2":[1,1],"3":[1,1],"4":[1,1],"5":[1,1,1],"6":[1,1],"7":[2,2],"8":[1,0]},"inputSourceMap":{"version":3,"file":"/home/ivan/Documents/proj/wallop/backend/src/domain/services/user.ts","sources":["/home/ivan/Documents/proj/wallop/backend/src/domain/services/user.ts"],"names":[],"mappings":";;;;;;;;;;;;;;AAAA,0DAA6C;AAE7C,mDAAiE;AACjE,oDAA4B;AAC5B,MAAM,UAAU,GAAG,EAAE,CAAC;AACtB,SAAe,UAAU,CAAC,EACtB,IAAI,EACJ,QAAQ,EACR,QAAQ,EACR,QAAQ,EACR,WAAW,EACM;;QAEjB,IAAI,IAAI,GAAG,MAAM,gBAAM,CAAC,IAAI,CAAC,QAAQ,EAAE,UAAU,CAAC,CAAA,CAAA,iBAAiB;QACnE,OAAO,cAAI,CAAC,MAAM,CAAC;YACf,IAAI;YACJ,QAAQ;YACR,QAAQ;YACR,QAAQ,EAAE,IAAI;YACd,WAAW;SACd,CAAC;aACG,IAAI,CAAC,CAAC,IAAW,EAAE,EAAE;YAClB,IAAI,CAAC,QAAQ,GAAG,SAAS,CAAA;YACzB,IAAI,CAAC,GAAG,GAAG,SAAS,CAAA;YACpB,IAAI,CAAC,GAAG,GAAG,SAAS,CAAA;YACpB,OAAO,IAAI,CAAC;QAChB,CAAC,CAAC;aACD,KAAK,CAAC,CAAC,KAAY,EAAE,EAAE;YACpB,MAAM,KAAK,CAAC;QAChB,CAAC,CAAC,CAAC;IACX,CAAC;CAAA;AAED,MAAM,mBAAmB,GAAG,GAAG,EAAE;IAC7B,OAAO;QACH,YAAI,CAAC,MAAM,CAAC,CAAC,QAAQ,EAAE,CAAC,QAAQ,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,CAAC;QAC5C,YAAI,CAAC,UAAU,CAAC,CAAC,QAAQ,EAAE,CAAC,QAAQ,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,CAAC;QAChD,YAAI,CAAC,UAAU,CAAC,CAAC,QAAQ,EAAE,CAAC,QAAQ,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC,WAAW,EAAE;QAC9D,YAAI,CAAC,UAAU,CAAC,CAAC,QAAQ,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC,cAAc,EAAE;KACzD,CAAA;AACL,CAAC,CAAA;AAED,MAAM,QAAQ,GAAG,CAAC,GAAG,EAAE,GAAG,EAAE,IAAI,EAAE,EAAE;IAChC,MAAM,MAAM,GAAG,wBAAgB,CAAC,GAAG,CAAC,CAAA;IACpC,IAAI,MAAM,CAAC,OAAO,EAAE,EAAE;QAClB,OAAO,IAAI,EAAE,CAAA;KAChB;IACD,MAAM,eAAe,GAAG,EAAE,CAAA;IAC1B,MAAM,CAAC,KAAK,EAAE,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE,CAAC,eAAe,CAAC,IAAI,CAAC,EAAE,CAAC,GAAG,CAAC,KAAK,CAAC,EAAE,GAAG,CAAC,GAAG,EAAE,CAAC,CAAC,CAAA;IAEzE,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC;QACxB,MAAM,EAAE,eAAe;KAC1B,CAAC,CAAA;AACN,CAAC,CAAA;AAED,kBAAe;IACX,UAAU;IACV,QAAQ;IACR,mBAAmB;CACtB,CAAC","sourcesContent":["import User, { IUser } from '../models/user';\nimport { CreateQuery } from 'mongoose';\nimport { body, validationResult } from 'express-validator/check';\nimport bcrypt from \"bcrypt\";\nconst saltRounds = 10;\nasync function CreateUser({\n    name,\n    lastName,\n    username,\n    password,\n    prefer_coin\n}: CreateQuery<IUser>): Promise<IUser> {\n\n    let hash = await bcrypt.hash(password, saltRounds)//.then(hash => {\n    return User.create({\n        name,\n        lastName,\n        username,\n        password: hash,\n        prefer_coin\n    })\n        .then((data: IUser) => {\n            data.password = undefined\n            data.__v = undefined\n            data._id = undefined\n            return data;\n        })\n        .catch((error: Error) => {\n            throw error;\n        });\n}\n\nconst userValidationRules = () => {\n    return [\n        body('name').isString().isLength({ min: 3 }),\n        body('lastName').isString().isLength({ min: 3 }),\n        body('username').isString().isLength({ min: 4 }).toLowerCase(),\n        body('password').isLength({ min: 8 }).isAlphanumeric(),\n    ]\n}\n\nconst validate = (req, res, next) => {\n    const errors = validationResult(req)\n    if (errors.isEmpty()) {\n        return next()\n    }\n    const extractedErrors = []\n    errors.array().map(err => extractedErrors.push({ [err.param]: err.msg }))\n\n    return res.status(422).json({\n        errors: extractedErrors,\n    })\n}\n\nexport default {\n    CreateUser,\n    validate,\n    userValidationRules\n};"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"0d53a58a5b0e827762c187e5a787e9d086f553c1","contentHash":"f5ba3d3d22a90cadc44d94a1fbafdb18f6b824208fa6f052e89b8d0d9a0beaf1"},"/home/ivan/Documents/proj/wallop/backend/src/domain/models/user.ts":{"path":"/home/ivan/Documents/proj/wallop/backend/src/domain/models/user.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":8,"column":3}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},"2":{"start":{"line":3,"column":26},"end":{"line":3,"column":33}},"3":{"start":{"line":4,"column":4},"end":{"line":4,"column":89}},"4":{"start":{"line":4,"column":71},"end":{"line":4,"column":83}},"5":{"start":{"line":6,"column":4},"end":{"line":6,"column":33}},"6":{"start":{"line":6,"column":26},"end":{"line":6,"column":33}},"7":{"start":{"line":7,"column":4},"end":{"line":7,"column":17}},"8":{"start":{"line":9,"column":25},"end":{"line":13,"column":2}},"9":{"start":{"line":10,"column":4},"end":{"line":10,"column":72}},"10":{"start":{"line":12,"column":4},"end":{"line":12,"column":21}},"11":{"start":{"line":14,"column":19},"end":{"line":20,"column":1}},"12":{"start":{"line":15,"column":4},"end":{"line":15,"column":42}},"13":{"start":{"line":15,"column":31},"end":{"line":15,"column":42}},"14":{"start":{"line":16,"column":17},"end":{"line":16,"column":19}},"15":{"start":{"line":17,"column":4},"end":{"line":17,"column":141}},"16":{"start":{"line":17,"column":21},"end":{"line":17,"column":141}},"17":{"start":{"line":17,"column":40},"end":{"line":17,"column":141}},"18":{"start":{"line":17,"column":109},"end":{"line":17,"column":141}},"19":{"start":{"line":18,"column":4},"end":{"line":18,"column":36}},"20":{"start":{"line":19,"column":4},"end":{"line":19,"column":18}},"21":{"start":{"line":21,"column":0},"end":{"line":21,"column":62}},"22":{"start":{"line":22,"column":19},"end":{"line":22,"column":52}},"23":{"start":{"line":23,"column":19},"end":{"line":30,"column":2}},"24":{"start":{"line":32,"column":0},"end":{"line":32,"column":63}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":74},"end":{"line":2,"column":75}},"loc":{"start":{"line":2,"column":96},"end":{"line":5,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":4,"column":58},"end":{"line":4,"column":59}},"loc":{"start":{"line":4,"column":69},"end":{"line":4,"column":85}},"line":4},"2":{"name":"(anonymous_2)","decl":{"start":{"line":5,"column":6},"end":{"line":5,"column":7}},"loc":{"start":{"line":5,"column":28},"end":{"line":8,"column":1}},"line":5},"3":{"name":"(anonymous_3)","decl":{"start":{"line":9,"column":80},"end":{"line":9,"column":81}},"loc":{"start":{"line":9,"column":95},"end":{"line":11,"column":1}},"line":9},"4":{"name":"(anonymous_4)","decl":{"start":{"line":11,"column":5},"end":{"line":11,"column":6}},"loc":{"start":{"line":11,"column":20},"end":{"line":13,"column":1}},"line":11},"5":{"name":"(anonymous_5)","decl":{"start":{"line":14,"column":50},"end":{"line":14,"column":51}},"loc":{"start":{"line":14,"column":65},"end":{"line":20,"column":1}},"line":14}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":8,"column":3}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":57},"end":{"line":8,"column":2}}],"line":2},"1":{"loc":{"start":{"line":2,"column":57},"end":{"line":8,"column":2}},"type":"cond-expr","locations":[{"start":{"line":2,"column":74},"end":{"line":5,"column":1}},{"start":{"line":5,"column":6},"end":{"line":8,"column":1}}],"line":2},"2":{"loc":{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},"type":"if","locations":[{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},{"start":{"line":3,"column":4},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":6,"column":4},"end":{"line":6,"column":33}},"type":"if","locations":[{"start":{"line":6,"column":4},"end":{"line":6,"column":33}},{"start":{"line":6,"column":4},"end":{"line":6,"column":33}}],"line":6},"4":{"loc":{"start":{"line":9,"column":25},"end":{"line":13,"column":2}},"type":"binary-expr","locations":[{"start":{"line":9,"column":26},"end":{"line":9,"column":30}},{"start":{"line":9,"column":34},"end":{"line":9,"column":57}},{"start":{"line":9,"column":63},"end":{"line":13,"column":1}}],"line":9},"5":{"loc":{"start":{"line":9,"column":63},"end":{"line":13,"column":1}},"type":"cond-expr","locations":[{"start":{"line":9,"column":80},"end":{"line":11,"column":1}},{"start":{"line":11,"column":5},"end":{"line":13,"column":1}}],"line":9},"6":{"loc":{"start":{"line":14,"column":19},"end":{"line":20,"column":1}},"type":"binary-expr","locations":[{"start":{"line":14,"column":20},"end":{"line":14,"column":24}},{"start":{"line":14,"column":28},"end":{"line":14,"column":45}},{"start":{"line":14,"column":50},"end":{"line":20,"column":1}}],"line":14},"7":{"loc":{"start":{"line":15,"column":4},"end":{"line":15,"column":42}},"type":"if","locations":[{"start":{"line":15,"column":4},"end":{"line":15,"column":42}},{"start":{"line":15,"column":4},"end":{"line":15,"column":42}}],"line":15},"8":{"loc":{"start":{"line":15,"column":8},"end":{"line":15,"column":29}},"type":"binary-expr","locations":[{"start":{"line":15,"column":8},"end":{"line":15,"column":11}},{"start":{"line":15,"column":15},"end":{"line":15,"column":29}}],"line":15},"9":{"loc":{"start":{"line":17,"column":4},"end":{"line":17,"column":141}},"type":"if","locations":[{"start":{"line":17,"column":4},"end":{"line":17,"column":141}},{"start":{"line":17,"column":4},"end":{"line":17,"column":141}}],"line":17},"10":{"loc":{"start":{"line":17,"column":40},"end":{"line":17,"column":141}},"type":"if","locations":[{"start":{"line":17,"column":40},"end":{"line":17,"column":141}},{"start":{"line":17,"column":40},"end":{"line":17,"column":141}}],"line":17},"11":{"loc":{"start":{"line":17,"column":44},"end":{"line":17,"column":107}},"type":"binary-expr","locations":[{"start":{"line":17,"column":44},"end":{"line":17,"column":59}},{"start":{"line":17,"column":63},"end":{"line":17,"column":107}}],"line":17}},"s":{"0":1,"1":9,"2":9,"3":9,"4":2,"5":0,"6":0,"7":0,"8":1,"9":1,"10":0,"11":1,"12":1,"13":0,"14":1,"15":1,"16":1,"17":51,"18":9,"19":1,"20":1,"21":1,"22":1,"23":1,"24":1},"f":{"0":9,"1":2,"2":0,"3":1,"4":0,"5":1},"b":{"0":[1,1,1],"1":[1,0],"2":[9,0],"3":[0,0],"4":[1,1,1],"5":[1,0],"6":[1,1,1],"7":[0,1],"8":[1,1],"9":[1,0],"10":[9,42],"11":[51,51]},"inputSourceMap":{"version":3,"file":"/home/ivan/Documents/proj/wallop/backend/src/domain/models/user.ts","sources":["/home/ivan/Documents/proj/wallop/backend/src/domain/models/user.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;AACA,qDAAsD;AAsBtD,MAAM,UAAU,GAAW,IAAI,iBAAM,CAAC;IAClC,IAAI,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE,QAAQ,EAAE,CAAC,IAAI,EAAE,eAAe,CAAC,EAAE;IACzD,QAAQ,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE,QAAQ,EAAE,CAAC,IAAI,EAAE,mBAAmB,CAAC,EAAE;IACjE,QAAQ,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE,QAAQ,EAAE,CAAC,IAAI,EAAE,mBAAmB,CAAC,EAAE,MAAM,EAAE,CAAC,IAAI,EAAE,yBAAyB,CAAC,EAAE;IAC5G,QAAQ,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE,QAAQ,EAAE,CAAC,IAAI,EAAE,mBAAmB,CAAC,EAAE,KAAK,EAAE,EAAE,MAAM,EAAE,IAAI,EAAE,EAAE;IAC1F,WAAW,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE,QAAQ,EAAE,CAAC,IAAI,EAAE,wBAAwB,CAAC,EAAE;IACzE,SAAS,EAAE,CAAC,EAAE,IAAI,EAAE,iBAAM,CAAC,KAAK,CAAC,QAAQ,EAAE,GAAG,EAAE,MAAM,EAAE,CAAC;CAC5D,CAAC,CAAC;AAEH,mDAAmD;AACnD,kBAAe,kBAAQ,CAAC,KAAK,CAAQ,MAAM,EAAE,UAAU,CAAC,CAAC","sourcesContent":["\nimport mongoose, { Schema, Document } from 'mongoose';\nimport coin from \"./coin\";\n/* export enum Gender {\n    male = 'male',\n    female = 'female',\n    undisclosed = 'undisclosed'\n} */\n\nexport interface following extends Document {\n    symbol: string;\n}\n\nexport interface IUser extends Document {\n    name: string;\n    lastName: string;\n    username: string;\n    password: string;\n    prefer_coin: string;\n    following?: [];\n\n}\n\nconst UserSchema: Schema = new Schema({\n    name: { type: String, required: [true, 'Enter a name.'] },\n    lastName: { type: String, required: [true, 'Enter a lastname.'] },\n    username: { type: String, required: [true, 'Enter a username.'], unique: [true, 'That username is taken.'] },\n    password: { type: String, required: [true, 'Enter a password.'], index: { unique: true } },\n    prefer_coin: { type: String, required: [true, 'Enter a prefered coin.'] },\n    following: [{ type: Schema.Types.ObjectId, ref: 'Coin' }]\n});\n\n// Export the model and return your IUser interface\nexport default mongoose.model<IUser>('User', UserSchema);"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"e584761d2e415da1547fe14f761ce6aef8dbacf6","contentHash":"6d679d30fefde3e67118adf8d8d80552d60bb6ab16e4d601bececdb86384eec7"},"/home/ivan/Documents/proj/wallop/backend/src/api/auth.ts":{"path":"/home/ivan/Documents/proj/wallop/backend/src/api/auth.ts","statementMap":{"0":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"1":{"start":{"line":3,"column":28},"end":{"line":3,"column":110}},"2":{"start":{"line":3,"column":91},"end":{"line":3,"column":106}},"3":{"start":{"line":4,"column":4},"end":{"line":9,"column":7}},"4":{"start":{"line":5,"column":36},"end":{"line":5,"column":97}},"5":{"start":{"line":5,"column":42},"end":{"line":5,"column":70}},"6":{"start":{"line":5,"column":85},"end":{"line":5,"column":95}},"7":{"start":{"line":6,"column":35},"end":{"line":6,"column":100}},"8":{"start":{"line":6,"column":41},"end":{"line":6,"column":73}},"9":{"start":{"line":6,"column":88},"end":{"line":6,"column":98}},"10":{"start":{"line":7,"column":32},"end":{"line":7,"column":116}},"11":{"start":{"line":8,"column":8},"end":{"line":8,"column":78}},"12":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"13":{"start":{"line":12,"column":4},"end":{"line":12,"column":62}},"14":{"start":{"line":14,"column":0},"end":{"line":14,"column":62}},"15":{"start":{"line":15,"column":18},"end":{"line":15,"column":36}},"16":{"start":{"line":16,"column":28},"end":{"line":16,"column":56}},"17":{"start":{"line":17,"column":25},"end":{"line":17,"column":86}},"18":{"start":{"line":18,"column":19},"end":{"line":18,"column":37}},"19":{"start":{"line":25,"column":0},"end":{"line":35,"column":4}},"20":{"start":{"line":25,"column":123},"end":{"line":35,"column":2}},"21":{"start":{"line":26,"column":19},"end":{"line":26,"column":60}},"22":{"start":{"line":27,"column":4},"end":{"line":29,"column":5}},"23":{"start":{"line":28,"column":8},"end":{"line":28,"column":64}},"24":{"start":{"line":30,"column":17},"end":{"line":33,"column":6}},"25":{"start":{"line":34,"column":4},"end":{"line":34,"column":30}},"26":{"start":{"line":36,"column":0},"end":{"line":36,"column":29}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":44},"end":{"line":2,"column":45}},"loc":{"start":{"line":2,"column":89},"end":{"line":10,"column":1}},"line":2},"1":{"name":"adopt","decl":{"start":{"line":3,"column":13},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":26},"end":{"line":3,"column":112}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":70},"end":{"line":3,"column":71}},"loc":{"start":{"line":3,"column":89},"end":{"line":3,"column":108}},"line":3},"3":{"name":"(anonymous_3)","decl":{"start":{"line":4,"column":36},"end":{"line":4,"column":37}},"loc":{"start":{"line":4,"column":63},"end":{"line":9,"column":5}},"line":4},"4":{"name":"fulfilled","decl":{"start":{"line":5,"column":17},"end":{"line":5,"column":26}},"loc":{"start":{"line":5,"column":34},"end":{"line":5,"column":99}},"line":5},"5":{"name":"rejected","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":25}},"loc":{"start":{"line":6,"column":33},"end":{"line":6,"column":102}},"line":6},"6":{"name":"step","decl":{"start":{"line":7,"column":17},"end":{"line":7,"column":21}},"loc":{"start":{"line":7,"column":30},"end":{"line":7,"column":118}},"line":7},"7":{"name":"(anonymous_7)","decl":{"start":{"line":11,"column":56},"end":{"line":11,"column":57}},"loc":{"start":{"line":11,"column":71},"end":{"line":13,"column":1}},"line":11},"8":{"name":"(anonymous_8)","decl":{"start":{"line":25,"column":109},"end":{"line":25,"column":110}},"loc":{"start":{"line":25,"column":123},"end":{"line":35,"column":2}},"line":25},"9":{"name":"(anonymous_9)","decl":{"start":{"line":25,"column":157},"end":{"line":25,"column":158}},"loc":{"start":{"line":25,"column":170},"end":{"line":35,"column":1}},"line":25}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":17},"end":{"line":2,"column":21}},{"start":{"line":2,"column":25},"end":{"line":2,"column":39}},{"start":{"line":2,"column":44},"end":{"line":10,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":35},"end":{"line":3,"column":109}},"type":"cond-expr","locations":[{"start":{"line":3,"column":56},"end":{"line":3,"column":61}},{"start":{"line":3,"column":64},"end":{"line":3,"column":109}}],"line":3},"2":{"loc":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"type":"binary-expr","locations":[{"start":{"line":4,"column":16},"end":{"line":4,"column":17}},{"start":{"line":4,"column":22},"end":{"line":4,"column":33}}],"line":4},"3":{"loc":{"start":{"line":7,"column":32},"end":{"line":7,"column":115}},"type":"cond-expr","locations":[{"start":{"line":7,"column":46},"end":{"line":7,"column":67}},{"start":{"line":7,"column":70},"end":{"line":7,"column":115}}],"line":7},"4":{"loc":{"start":{"line":8,"column":51},"end":{"line":8,"column":67}},"type":"binary-expr","locations":[{"start":{"line":8,"column":51},"end":{"line":8,"column":61}},{"start":{"line":8,"column":65},"end":{"line":8,"column":67}}],"line":8},"5":{"loc":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"type":"binary-expr","locations":[{"start":{"line":11,"column":23},"end":{"line":11,"column":27}},{"start":{"line":11,"column":31},"end":{"line":11,"column":51}},{"start":{"line":11,"column":56},"end":{"line":13,"column":1}}],"line":11},"6":{"loc":{"start":{"line":12,"column":11},"end":{"line":12,"column":61}},"type":"cond-expr","locations":[{"start":{"line":12,"column":37},"end":{"line":12,"column":40}},{"start":{"line":12,"column":43},"end":{"line":12,"column":61}}],"line":12},"7":{"loc":{"start":{"line":12,"column":12},"end":{"line":12,"column":33}},"type":"binary-expr","locations":[{"start":{"line":12,"column":12},"end":{"line":12,"column":15}},{"start":{"line":12,"column":19},"end":{"line":12,"column":33}}],"line":12},"8":{"loc":{"start":{"line":27,"column":4},"end":{"line":29,"column":5}},"type":"if","locations":[{"start":{"line":27,"column":4},"end":{"line":29,"column":5}},{"start":{"line":27,"column":4},"end":{"line":29,"column":5}}],"line":27}},"s":{"0":1,"1":1,"2":0,"3":1,"4":1,"5":1,"6":0,"7":0,"8":0,"9":0,"10":2,"11":1,"12":1,"13":1,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":1,"21":1,"22":1,"23":0,"24":1,"25":1,"26":1},"f":{"0":1,"1":1,"2":0,"3":1,"4":1,"5":0,"6":2,"7":1,"8":1,"9":1},"b":{"0":[1,1,1],"1":[1,0],"2":[1,1],"3":[1,1],"4":[1,1],"5":[1,1,1],"6":[1,0],"7":[1,1],"8":[0,1]},"inputSourceMap":{"version":3,"file":"/home/ivan/Documents/proj/wallop/backend/src/api/auth.ts","sources":["/home/ivan/Documents/proj/wallop/backend/src/api/auth.ts"],"names":[],"mappings":";;;;;;;;;;;;;;AACA,qCAAiC;AACjC,yDAAqD;AACrD,uFAA4D;AAC5D,MAAM,UAAU,GAAG,gBAAM,EAAE,CAAC;AAE5B;;;;;EAKE;AACF,UAAU,CAAC,IAAI,CAAC,QAAQ,EACpB,wBAAW,CAAC,mBAAmB,EAAE,EACjC,wBAAW,CAAC,QAAQ,EACpB,CAAO,GAAG,EAAE,GAAG,EAAE,EAAE;IACf,MAAM,MAAM,GAAG,oCAAgB,CAAC,GAAG,CAAC,CAAC;IACrC,IAAI,CAAC,MAAM,CAAC,OAAO,EAAE,EAAE;QACnB,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAE,MAAM,EAAE,MAAM,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC;KAC3D;IACD,MAAM,IAAI,GAAG,MAAM,wBAAW,CAAC,KAAK,CAAC;QACjC,QAAQ,EAAE,GAAG,CAAC,IAAI,CAAC,QAAQ;QAC3B,QAAQ,EAAE,GAAG,CAAC,IAAI,CAAC,QAAQ;KAC9B,CAAC,CAAC;IAEH,OAAO,GAAG,CAAC,IAAI,CAAC,EAAE,IAAI,EAAE,CAAC,CAAC;AAC9B,CAAC,CAAA,CAAC,CAAC;AAEP,kBAAe,UAAU,CAAC","sourcesContent":["\nimport { Router } from 'express';\nimport { validationResult } from 'express-validator';\nimport authService from '../domain/services/authentication';\nconst authRouter = Router();\n\n/*\nEndpoint to login a user.\n\n@params username : username of user.\n@params password : password of user.\n*/\nauthRouter.post('/login',\n    authService.userValidationRules(),\n    authService.validate,\n    async (req, res) => {\n        const errors = validationResult(req);\n        if (!errors.isEmpty()) {\n            return res.status(422).json({ errors: errors.array() });\n        }\n        const user = await authService.Login({\n            username: req.body.username,\n            password: req.body.password,\n        });\n\n        return res.send({ user });\n    });\n\nexport default authRouter;"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"2e0684f1c16c921468273565e693e609924384df","contentHash":"b5aad8e435d89fe2449f53ad85fc4d7c507bebfd84cd672ac0f7c33fcdf4960f"},"/home/ivan/Documents/proj/wallop/backend/src/domain/services/authentication.ts":{"path":"/home/ivan/Documents/proj/wallop/backend/src/domain/services/authentication.ts","statementMap":{"0":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"1":{"start":{"line":3,"column":28},"end":{"line":3,"column":110}},"2":{"start":{"line":3,"column":91},"end":{"line":3,"column":106}},"3":{"start":{"line":4,"column":4},"end":{"line":9,"column":7}},"4":{"start":{"line":5,"column":36},"end":{"line":5,"column":97}},"5":{"start":{"line":5,"column":42},"end":{"line":5,"column":70}},"6":{"start":{"line":5,"column":85},"end":{"line":5,"column":95}},"7":{"start":{"line":6,"column":35},"end":{"line":6,"column":100}},"8":{"start":{"line":6,"column":41},"end":{"line":6,"column":73}},"9":{"start":{"line":6,"column":88},"end":{"line":6,"column":98}},"10":{"start":{"line":7,"column":32},"end":{"line":7,"column":116}},"11":{"start":{"line":8,"column":8},"end":{"line":8,"column":78}},"12":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"13":{"start":{"line":12,"column":4},"end":{"line":12,"column":62}},"14":{"start":{"line":14,"column":0},"end":{"line":14,"column":62}},"15":{"start":{"line":15,"column":15},"end":{"line":15,"column":57}},"16":{"start":{"line":16,"column":16},"end":{"line":16,"column":50}},"17":{"start":{"line":17,"column":23},"end":{"line":17,"column":63}},"18":{"start":{"line":18,"column":17},"end":{"line":18,"column":51}},"19":{"start":{"line":20,"column":4},"end":{"line":46,"column":7}},"20":{"start":{"line":21,"column":21},"end":{"line":21,"column":80}},"21":{"start":{"line":22,"column":21},"end":{"line":22,"column":23}},"22":{"start":{"line":23,"column":8},"end":{"line":26,"column":9}},"23":{"start":{"line":24,"column":12},"end":{"line":24,"column":53}},"24":{"start":{"line":25,"column":12},"end":{"line":25,"column":26}},"25":{"start":{"line":27,"column":8},"end":{"line":30,"column":9}},"26":{"start":{"line":28,"column":12},"end":{"line":28,"column":53}},"27":{"start":{"line":29,"column":12},"end":{"line":29,"column":26}},"28":{"start":{"line":31,"column":23},"end":{"line":31,"column":80}},"29":{"start":{"line":32,"column":8},"end":{"line":45,"column":9}},"30":{"start":{"line":33,"column":26},"end":{"line":33,"column":81}},"31":{"start":{"line":34,"column":30},"end":{"line":37,"column":14}},"32":{"start":{"line":38,"column":12},"end":{"line":38,"column":45}},"33":{"start":{"line":39,"column":12},"end":{"line":39,"column":61}},"34":{"start":{"line":40,"column":12},"end":{"line":40,"column":26}},"35":{"start":{"line":43,"column":12},"end":{"line":43,"column":56}},"36":{"start":{"line":44,"column":12},"end":{"line":44,"column":26}},"37":{"start":{"line":48,"column":28},"end":{"line":53,"column":1}},"38":{"start":{"line":49,"column":4},"end":{"line":52,"column":6}},"39":{"start":{"line":54,"column":17},"end":{"line":64,"column":1}},"40":{"start":{"line":55,"column":19},"end":{"line":55,"column":48}},"41":{"start":{"line":56,"column":4},"end":{"line":58,"column":5}},"42":{"start":{"line":57,"column":8},"end":{"line":57,"column":22}},"43":{"start":{"line":59,"column":28},"end":{"line":59,"column":30}},"44":{"start":{"line":60,"column":4},"end":{"line":60,"column":78}},"45":{"start":{"line":60,"column":30},"end":{"line":60,"column":76}},"46":{"start":{"line":61,"column":4},"end":{"line":63,"column":7}},"47":{"start":{"line":65,"column":0},"end":{"line":69,"column":2}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":44},"end":{"line":2,"column":45}},"loc":{"start":{"line":2,"column":89},"end":{"line":10,"column":1}},"line":2},"1":{"name":"adopt","decl":{"start":{"line":3,"column":13},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":26},"end":{"line":3,"column":112}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":70},"end":{"line":3,"column":71}},"loc":{"start":{"line":3,"column":89},"end":{"line":3,"column":108}},"line":3},"3":{"name":"(anonymous_3)","decl":{"start":{"line":4,"column":36},"end":{"line":4,"column":37}},"loc":{"start":{"line":4,"column":63},"end":{"line":9,"column":5}},"line":4},"4":{"name":"fulfilled","decl":{"start":{"line":5,"column":17},"end":{"line":5,"column":26}},"loc":{"start":{"line":5,"column":34},"end":{"line":5,"column":99}},"line":5},"5":{"name":"rejected","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":25}},"loc":{"start":{"line":6,"column":33},"end":{"line":6,"column":102}},"line":6},"6":{"name":"step","decl":{"start":{"line":7,"column":17},"end":{"line":7,"column":21}},"loc":{"start":{"line":7,"column":30},"end":{"line":7,"column":118}},"line":7},"7":{"name":"(anonymous_7)","decl":{"start":{"line":11,"column":56},"end":{"line":11,"column":57}},"loc":{"start":{"line":11,"column":71},"end":{"line":13,"column":1}},"line":11},"8":{"name":"Login","decl":{"start":{"line":19,"column":9},"end":{"line":19,"column":14}},"loc":{"start":{"line":19,"column":39},"end":{"line":47,"column":1}},"line":19},"9":{"name":"(anonymous_9)","decl":{"start":{"line":20,"column":43},"end":{"line":20,"column":44}},"loc":{"start":{"line":20,"column":56},"end":{"line":46,"column":5}},"line":20},"10":{"name":"(anonymous_10)","decl":{"start":{"line":48,"column":28},"end":{"line":48,"column":29}},"loc":{"start":{"line":48,"column":34},"end":{"line":53,"column":1}},"line":48},"11":{"name":"(anonymous_11)","decl":{"start":{"line":54,"column":17},"end":{"line":54,"column":18}},"loc":{"start":{"line":54,"column":37},"end":{"line":64,"column":1}},"line":54},"12":{"name":"(anonymous_12)","decl":{"start":{"line":60,"column":23},"end":{"line":60,"column":24}},"loc":{"start":{"line":60,"column":30},"end":{"line":60,"column":76}},"line":60}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":17},"end":{"line":2,"column":21}},{"start":{"line":2,"column":25},"end":{"line":2,"column":39}},{"start":{"line":2,"column":44},"end":{"line":10,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":35},"end":{"line":3,"column":109}},"type":"cond-expr","locations":[{"start":{"line":3,"column":56},"end":{"line":3,"column":61}},{"start":{"line":3,"column":64},"end":{"line":3,"column":109}}],"line":3},"2":{"loc":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"type":"binary-expr","locations":[{"start":{"line":4,"column":16},"end":{"line":4,"column":17}},{"start":{"line":4,"column":22},"end":{"line":4,"column":33}}],"line":4},"3":{"loc":{"start":{"line":7,"column":32},"end":{"line":7,"column":115}},"type":"cond-expr","locations":[{"start":{"line":7,"column":46},"end":{"line":7,"column":67}},{"start":{"line":7,"column":70},"end":{"line":7,"column":115}}],"line":7},"4":{"loc":{"start":{"line":8,"column":51},"end":{"line":8,"column":67}},"type":"binary-expr","locations":[{"start":{"line":8,"column":51},"end":{"line":8,"column":61}},{"start":{"line":8,"column":65},"end":{"line":8,"column":67}}],"line":8},"5":{"loc":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"type":"binary-expr","locations":[{"start":{"line":11,"column":23},"end":{"line":11,"column":27}},{"start":{"line":11,"column":31},"end":{"line":11,"column":51}},{"start":{"line":11,"column":56},"end":{"line":13,"column":1}}],"line":11},"6":{"loc":{"start":{"line":12,"column":11},"end":{"line":12,"column":61}},"type":"cond-expr","locations":[{"start":{"line":12,"column":37},"end":{"line":12,"column":40}},{"start":{"line":12,"column":43},"end":{"line":12,"column":61}}],"line":12},"7":{"loc":{"start":{"line":12,"column":12},"end":{"line":12,"column":33}},"type":"binary-expr","locations":[{"start":{"line":12,"column":12},"end":{"line":12,"column":15}},{"start":{"line":12,"column":19},"end":{"line":12,"column":33}}],"line":12},"8":{"loc":{"start":{"line":23,"column":8},"end":{"line":26,"column":9}},"type":"if","locations":[{"start":{"line":23,"column":8},"end":{"line":26,"column":9}},{"start":{"line":23,"column":8},"end":{"line":26,"column":9}}],"line":23},"9":{"loc":{"start":{"line":27,"column":8},"end":{"line":30,"column":9}},"type":"if","locations":[{"start":{"line":27,"column":8},"end":{"line":30,"column":9}},{"start":{"line":27,"column":8},"end":{"line":30,"column":9}}],"line":27},"10":{"loc":{"start":{"line":32,"column":8},"end":{"line":45,"column":9}},"type":"if","locations":[{"start":{"line":32,"column":8},"end":{"line":45,"column":9}},{"start":{"line":32,"column":8},"end":{"line":45,"column":9}}],"line":32},"11":{"loc":{"start":{"line":56,"column":4},"end":{"line":58,"column":5}},"type":"if","locations":[{"start":{"line":56,"column":4},"end":{"line":58,"column":5}},{"start":{"line":56,"column":4},"end":{"line":58,"column":5}}],"line":56}},"s":{"0":1,"1":2,"2":0,"3":1,"4":2,"5":2,"6":0,"7":0,"8":0,"9":0,"10":3,"11":1,"12":1,"13":3,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":1,"21":1,"22":1,"23":0,"24":0,"25":1,"26":0,"27":0,"28":1,"29":1,"30":1,"31":1,"32":1,"33":1,"34":1,"35":0,"36":0,"37":1,"38":1,"39":1,"40":1,"41":1,"42":1,"43":0,"44":0,"45":0,"46":0,"47":1},"f":{"0":1,"1":2,"2":0,"3":1,"4":2,"5":0,"6":3,"7":3,"8":1,"9":1,"10":1,"11":1,"12":0},"b":{"0":[1,1,1],"1":[2,0],"2":[1,1],"3":[1,2],"4":[1,1],"5":[1,1,1],"6":[1,2],"7":[3,3],"8":[0,1],"9":[0,1],"10":[1,0],"11":[1,0]},"inputSourceMap":{"version":3,"file":"/home/ivan/Documents/proj/wallop/backend/src/domain/services/authentication.ts","sources":["/home/ivan/Documents/proj/wallop/backend/src/domain/services/authentication.ts"],"names":[],"mappings":";;;;;;;;;;;;;;AAAA,0DAA6C;AAE7C,mDAAiE;AACjE,gEAA+B;AAC/B,oDAA4B;AAmB5B,SAAe,KAAK,CAAC,EAAE,QAAQ,EAAE,QAAQ,EAAE;;QAEvC,IAAI,MAAM,GAAG,MAAM,cAAI,CAAC,OAAO,CAAC,EAAE,QAAQ,EAAE,QAAQ,EAAE,CAAC,CAAC,IAAI,EAAE,CAAC;QAE/D,IAAI,MAAM,GAA0B,EAAE,CAAA;QAEtC,IAAI,CAAC,MAAM,EAAE;YACT,MAAM,CAAC,KAAK,GAAG,yBAAyB,CAAC;YACzC,OAAO,MAAM,CAAC;SACjB;QACD,IAAI,MAAM,CAAC,QAAQ,IAAI,QAAQ,EAAE;YAC7B,MAAM,CAAC,KAAK,GAAG,yBAAyB,CAAC;YACzC,OAAO,MAAM,CAAC;SACjB;QAED,IAAI,QAAQ,GAAG,MAAM,gBAAM,CAAC,OAAO,CAAC,QAAQ,EAAE,MAAM,CAAC,QAAQ,CAAC,CAAC;QAE/D,IAAI,QAAQ,EAAE;YAEV,IAAI,OAAO,GAAG,EAAE,QAAQ,EAAE,QAAQ,EAAE,WAAW,EAAE,MAAM,CAAC,WAAW,EAAE,CAAA;YAErE,IAAI,WAAW,GAAG,sBAAG,CAAC,IAAI,CAAC,OAAO,EAAE,OAAO,CAAC,GAAG,CAAC,mBAAmB,EAAE;gBACjE,SAAS,EAAE,OAAO;gBAClB,SAAS,EAAE,OAAO,CAAC,GAAG,CAAC,iBAAiB;aAC3C,CAAC,CAAA;YACF,MAAM,CAAC,WAAW,GAAG,WAAW,CAAC;YACjC,MAAM,CAAC,SAAS,GAAG,OAAO,CAAC,GAAG,CAAC,iBAAiB,CAAC;YAEjD,OAAO,MAAM,CAAA;SAEhB;aAAM;YACH,MAAM,CAAC,KAAK,GAAG,4BAA4B,CAAC;YAC5C,OAAO,MAAM,CAAC;SACjB;IACL,CAAC;CAAA;AAGD,MAAM,mBAAmB,GAAG,GAAG,EAAE;IAC7B,OAAO;QACH,YAAI,CAAC,UAAU,CAAC,CAAC,QAAQ,EAAE,CAAC,QAAQ,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC,WAAW,EAAE;QAC9D,YAAI,CAAC,UAAU,CAAC,CAAC,QAAQ,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC,cAAc,EAAE,EAAC,sBAAsB;KAChF,CAAA;AACL,CAAC,CAAA;AAED,MAAM,QAAQ,GAAG,CAAC,GAAG,EAAE,GAAG,EAAE,IAAI,EAAE,EAAE;IAChC,MAAM,MAAM,GAAG,wBAAgB,CAAC,GAAG,CAAC,CAAA;IACpC,IAAI,MAAM,CAAC,OAAO,EAAE,EAAE;QAClB,OAAO,IAAI,EAAE,CAAA;KAChB;IACD,MAAM,eAAe,GAAG,EAAE,CAAA;IAC1B,MAAM,CAAC,KAAK,EAAE,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE,CAAC,eAAe,CAAC,IAAI,CAAC,EAAE,CAAC,GAAG,CAAC,KAAK,CAAC,EAAE,GAAG,CAAC,GAAG,EAAE,CAAC,CAAC,CAAA;IAEzE,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC;QACxB,MAAM,EAAE,eAAe;KAC1B,CAAC,CAAA;AACN,CAAC,CAAA;AAED,kBAAe;IACX,KAAK;IACL,QAAQ;IACR,mBAAmB;CACtB,CAAC","sourcesContent":["import User, { IUser } from '../models/user';\nimport { Mongoose } from 'mongoose';\nimport { body, validationResult } from 'express-validator/check';\nimport jwt from \"jsonwebtoken\";\nimport bcrypt from \"bcrypt\";\n\nexport interface Authentication {\n    auth: (authenticationParams: Authentication.Params) => Promise<Authentication.Result>\n}\n\nexport namespace Authentication {\n    export interface Params {\n        username: string\n        password: string\n    }\n\n    export interface Result {\n        accessToken?: string\n        expiresIn?: string\n        error?: string\n    }\n}\n\nasync function Login({ username, password }): Promise<Authentication.Result> {\n\n    let finded = await User.findOne({ username: username }).exec();\n\n    let result = <Authentication.Result>{}\n\n    if (!finded) {\n        result.error = \"Username does not exist\";\n        return result;\n    }\n    if (finded.username != username) {\n        result.error = \"Username does not exist\";\n        return result;\n    }\n\n    let compared = await bcrypt.compare(password, finded.password);\n\n    if (compared) {\n\n        let payload = { username: username, prefer_coin: finded.prefer_coin }\n\n        let accessToken = jwt.sign(payload, process.env.ACCESS_TOKEN_SECRET, {\n            algorithm: \"HS256\",\n            expiresIn: process.env.ACCESS_TOKEN_LIFE\n        })\n        result.accessToken = accessToken;\n        result.expiresIn = process.env.ACCESS_TOKEN_LIFE;\n\n        return result\n\n    } else {\n        result.error = \"wrong password or username\";\n        return result;\n    }\n}\n\n\nconst userValidationRules = () => {\n    return [\n        body('username').isString().isLength({ min: 5 }).toLowerCase(),\n        body('password').isLength({ min: 8 }).isAlphanumeric(),//.isStrongPassword(),\n    ]\n}\n\nconst validate = (req, res, next) => {\n    const errors = validationResult(req)\n    if (errors.isEmpty()) {\n        return next()\n    }\n    const extractedErrors = []\n    errors.array().map(err => extractedErrors.push({ [err.param]: err.msg }))\n\n    return res.status(422).json({\n        errors: extractedErrors,\n    })\n}\n\nexport default {\n    Login,\n    validate,\n    userValidationRules\n};"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"793e0a17d55a8802249b6047648b99fe20bcc5f4","contentHash":"c4d4031aa1a95b52da2e255b91f8ef907a909bae6049e25f9e958f6dcd35f371"},"/home/ivan/Documents/proj/wallop/backend/src/api/monitor.ts":{"path":"/home/ivan/Documents/proj/wallop/backend/src/api/monitor.ts","statementMap":{"0":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"1":{"start":{"line":3,"column":28},"end":{"line":3,"column":110}},"2":{"start":{"line":3,"column":91},"end":{"line":3,"column":106}},"3":{"start":{"line":4,"column":4},"end":{"line":9,"column":7}},"4":{"start":{"line":5,"column":36},"end":{"line":5,"column":97}},"5":{"start":{"line":5,"column":42},"end":{"line":5,"column":70}},"6":{"start":{"line":5,"column":85},"end":{"line":5,"column":95}},"7":{"start":{"line":6,"column":35},"end":{"line":6,"column":100}},"8":{"start":{"line":6,"column":41},"end":{"line":6,"column":73}},"9":{"start":{"line":6,"column":88},"end":{"line":6,"column":98}},"10":{"start":{"line":7,"column":32},"end":{"line":7,"column":116}},"11":{"start":{"line":8,"column":8},"end":{"line":8,"column":78}},"12":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"13":{"start":{"line":12,"column":4},"end":{"line":12,"column":62}},"14":{"start":{"line":14,"column":0},"end":{"line":14,"column":62}},"15":{"start":{"line":15,"column":18},"end":{"line":15,"column":36}},"16":{"start":{"line":16,"column":17},"end":{"line":16,"column":70}},"17":{"start":{"line":17,"column":18},"end":{"line":17,"column":72}},"18":{"start":{"line":18,"column":29},"end":{"line":18,"column":72}},"19":{"start":{"line":19,"column":28},"end":{"line":19,"column":56}},"20":{"start":{"line":20,"column":19},"end":{"line":20,"column":37}},"21":{"start":{"line":22,"column":0},"end":{"line":30,"column":4}},"22":{"start":{"line":22,"column":68},"end":{"line":30,"column":2}},"23":{"start":{"line":23,"column":4},"end":{"line":29,"column":5}},"24":{"start":{"line":24,"column":23},"end":{"line":24,"column":132}},"25":{"start":{"line":25,"column":8},"end":{"line":25,"column":32}},"26":{"start":{"line":28,"column":8},"end":{"line":28,"column":55}},"27":{"start":{"line":37,"column":0},"end":{"line":46,"column":4}},"28":{"start":{"line":37,"column":79},"end":{"line":46,"column":2}},"29":{"start":{"line":38,"column":4},"end":{"line":45,"column":5}},"30":{"start":{"line":39,"column":20},"end":{"line":39,"column":60}},"31":{"start":{"line":40,"column":23},"end":{"line":40,"column":122}},"32":{"start":{"line":41,"column":8},"end":{"line":41,"column":32}},"33":{"start":{"line":44,"column":8},"end":{"line":44,"column":55}},"34":{"start":{"line":52,"column":0},"end":{"line":64,"column":4}},"35":{"start":{"line":52,"column":139},"end":{"line":64,"column":2}},"36":{"start":{"line":53,"column":4},"end":{"line":63,"column":5}},"37":{"start":{"line":54,"column":23},"end":{"line":54,"column":64}},"38":{"start":{"line":55,"column":8},"end":{"line":57,"column":9}},"39":{"start":{"line":56,"column":12},"end":{"line":56,"column":68}},"40":{"start":{"line":58,"column":23},"end":{"line":58,"column":114}},"41":{"start":{"line":59,"column":8},"end":{"line":59,"column":57}},"42":{"start":{"line":62,"column":8},"end":{"line":62,"column":55}},"43":{"start":{"line":65,"column":0},"end":{"line":65,"column":29}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":44},"end":{"line":2,"column":45}},"loc":{"start":{"line":2,"column":89},"end":{"line":10,"column":1}},"line":2},"1":{"name":"adopt","decl":{"start":{"line":3,"column":13},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":26},"end":{"line":3,"column":112}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":70},"end":{"line":3,"column":71}},"loc":{"start":{"line":3,"column":89},"end":{"line":3,"column":108}},"line":3},"3":{"name":"(anonymous_3)","decl":{"start":{"line":4,"column":36},"end":{"line":4,"column":37}},"loc":{"start":{"line":4,"column":63},"end":{"line":9,"column":5}},"line":4},"4":{"name":"fulfilled","decl":{"start":{"line":5,"column":17},"end":{"line":5,"column":26}},"loc":{"start":{"line":5,"column":34},"end":{"line":5,"column":99}},"line":5},"5":{"name":"rejected","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":25}},"loc":{"start":{"line":6,"column":33},"end":{"line":6,"column":102}},"line":6},"6":{"name":"step","decl":{"start":{"line":7,"column":17},"end":{"line":7,"column":21}},"loc":{"start":{"line":7,"column":30},"end":{"line":7,"column":118}},"line":7},"7":{"name":"(anonymous_7)","decl":{"start":{"line":11,"column":56},"end":{"line":11,"column":57}},"loc":{"start":{"line":11,"column":71},"end":{"line":13,"column":1}},"line":11},"8":{"name":"(anonymous_8)","decl":{"start":{"line":22,"column":54},"end":{"line":22,"column":55}},"loc":{"start":{"line":22,"column":68},"end":{"line":30,"column":2}},"line":22},"9":{"name":"(anonymous_9)","decl":{"start":{"line":22,"column":102},"end":{"line":22,"column":103}},"loc":{"start":{"line":22,"column":115},"end":{"line":30,"column":1}},"line":22},"10":{"name":"(anonymous_10)","decl":{"start":{"line":37,"column":65},"end":{"line":37,"column":66}},"loc":{"start":{"line":37,"column":79},"end":{"line":46,"column":2}},"line":37},"11":{"name":"(anonymous_11)","decl":{"start":{"line":37,"column":113},"end":{"line":37,"column":114}},"loc":{"start":{"line":37,"column":126},"end":{"line":46,"column":1}},"line":37},"12":{"name":"(anonymous_12)","decl":{"start":{"line":52,"column":125},"end":{"line":52,"column":126}},"loc":{"start":{"line":52,"column":139},"end":{"line":64,"column":2}},"line":52},"13":{"name":"(anonymous_13)","decl":{"start":{"line":52,"column":173},"end":{"line":52,"column":174}},"loc":{"start":{"line":52,"column":186},"end":{"line":64,"column":1}},"line":52}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":17},"end":{"line":2,"column":21}},{"start":{"line":2,"column":25},"end":{"line":2,"column":39}},{"start":{"line":2,"column":44},"end":{"line":10,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":35},"end":{"line":3,"column":109}},"type":"cond-expr","locations":[{"start":{"line":3,"column":56},"end":{"line":3,"column":61}},{"start":{"line":3,"column":64},"end":{"line":3,"column":109}}],"line":3},"2":{"loc":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"type":"binary-expr","locations":[{"start":{"line":4,"column":16},"end":{"line":4,"column":17}},{"start":{"line":4,"column":22},"end":{"line":4,"column":33}}],"line":4},"3":{"loc":{"start":{"line":7,"column":32},"end":{"line":7,"column":115}},"type":"cond-expr","locations":[{"start":{"line":7,"column":46},"end":{"line":7,"column":67}},{"start":{"line":7,"column":70},"end":{"line":7,"column":115}}],"line":7},"4":{"loc":{"start":{"line":8,"column":51},"end":{"line":8,"column":67}},"type":"binary-expr","locations":[{"start":{"line":8,"column":51},"end":{"line":8,"column":61}},{"start":{"line":8,"column":65},"end":{"line":8,"column":67}}],"line":8},"5":{"loc":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"type":"binary-expr","locations":[{"start":{"line":11,"column":23},"end":{"line":11,"column":27}},{"start":{"line":11,"column":31},"end":{"line":11,"column":51}},{"start":{"line":11,"column":56},"end":{"line":13,"column":1}}],"line":11},"6":{"loc":{"start":{"line":12,"column":11},"end":{"line":12,"column":61}},"type":"cond-expr","locations":[{"start":{"line":12,"column":37},"end":{"line":12,"column":40}},{"start":{"line":12,"column":43},"end":{"line":12,"column":61}}],"line":12},"7":{"loc":{"start":{"line":12,"column":12},"end":{"line":12,"column":33}},"type":"binary-expr","locations":[{"start":{"line":12,"column":12},"end":{"line":12,"column":15}},{"start":{"line":12,"column":19},"end":{"line":12,"column":33}}],"line":12},"8":{"loc":{"start":{"line":39,"column":20},"end":{"line":39,"column":60}},"type":"cond-expr","locations":[{"start":{"line":39,"column":39},"end":{"line":39,"column":55}},{"start":{"line":39,"column":58},"end":{"line":39,"column":60}}],"line":39},"9":{"loc":{"start":{"line":55,"column":8},"end":{"line":57,"column":9}},"type":"if","locations":[{"start":{"line":55,"column":8},"end":{"line":57,"column":9}},{"start":{"line":55,"column":8},"end":{"line":57,"column":9}}],"line":55}},"s":{"0":1,"1":3,"2":0,"3":3,"4":3,"5":3,"6":0,"7":0,"8":0,"9":0,"10":6,"11":3,"12":1,"13":2,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":1,"21":1,"22":1,"23":1,"24":1,"25":1,"26":0,"27":1,"28":1,"29":1,"30":1,"31":1,"32":1,"33":0,"34":1,"35":1,"36":1,"37":1,"38":1,"39":0,"40":1,"41":1,"42":0,"43":1},"f":{"0":3,"1":3,"2":0,"3":3,"4":3,"5":0,"6":6,"7":2,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1},"b":{"0":[1,1,1],"1":[3,0],"2":[3,3],"3":[3,3],"4":[3,3],"5":[1,1,1],"6":[2,0],"7":[2,2],"8":[0,1],"9":[0,1]},"inputSourceMap":{"version":3,"file":"/home/ivan/Documents/proj/wallop/backend/src/api/monitor.ts","sources":["/home/ivan/Documents/proj/wallop/backend/src/api/monitor.ts"],"names":[],"mappings":";;;;;;;;;;;;;;AACA,qCAAiC;AACjC,uEAAoD;AACpD,yEAAwD;AACxD,yEAA0D;AAC1D,yDAAqD;AACrD,MAAM,UAAU,GAAG,gBAAM,EAAE,CAAC;AAE5B,uCAAuC;AACvC,UAAU,CAAC,GAAG,CAAC,QAAQ,EACnB,2BAAM,EACN,CAAO,GAAG,EAAE,GAAG,EAAE,EAAE;IACf,IAAI;QACA,MAAM,MAAM,GAAG,MAAM,gBAAW,CAAC,SAAS,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,WAAW,EAAE,MAAM,CAAC,GAAG,CAAC,KAAK,CAAC,IAAI,CAAC,EAAE,MAAM,CAAC,GAAG,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC,CAAC;QACxH,OAAO,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;KAC3B;IAAC,OAAO,KAAK,EAAE;QACZ,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAE,MAAM,EAAE,KAAK,EAAE,CAAC,CAAC;KAClD;AAEL,CAAC,CAAA,CAAC,CAAC;AAEP;;;;;EAKE;AACF,UAAU,CAAC,GAAG,CAAC,mBAAmB,EAC9B,2BAAM,EACN,CAAO,GAAG,EAAE,GAAG,EAAE,EAAE;IACf,IAAI;QACA,IAAI,KAAK,GAAG,GAAG,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,GAAG,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QACrD,MAAM,MAAM,GAAG,MAAM,iBAAc,CAAC,SAAS,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,QAAQ,EAAE,MAAM,CAAC,KAAK,CAAC,EAAE,MAAM,CAAC,GAAG,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,CAAC;QAChH,OAAO,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;KAE3B;IAAC,OAAO,KAAK,EAAE;QACZ,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAE,MAAM,EAAE,KAAK,EAAE,CAAC,CAAC;KAClD;AAEL,CAAC,CAAA,CAAC,CAAA;AAEN;;;;EAIE;AACF,UAAU,CAAC,IAAI,CAAC,SAAS,EACrB,2BAAM,EACN,iBAAc,CAAC,mBAAmB,EAAE,EACpC,iBAAc,CAAC,QAAQ,EACvB,CAAO,GAAG,EAAE,GAAG,EAAE,EAAE;IACf,IAAI;QACA,MAAM,MAAM,GAAG,oCAAgB,CAAC,GAAG,CAAC,CAAC;QACrC,IAAI,CAAC,MAAM,CAAC,OAAO,EAAE,EAAE;YACnB,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAE,MAAM,EAAE,MAAM,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC;SAC3D;QACD,MAAM,MAAM,GAAG,MAAM,iBAAc,CAAC,MAAM,CAAC,EAAE,QAAQ,EAAE,GAAG,CAAC,MAAM,CAAC,CAAC,QAAQ,EAAE,MAAM,EAAE,GAAG,CAAC,IAAI,CAAC,MAAM,EAAE,CAAC,CAAC;QACxG,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAE,OAAO,EAAE,MAAM,EAAE,CAAC,CAAC;KAEpD;IAAC,OAAO,KAAK,EAAE;QACZ,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAE,MAAM,EAAE,KAAK,EAAE,CAAC,CAAC;KAClD;AAEL,CAAC,CAAA,CAAC,CAAA;AACN,kBAAe,UAAU,CAAC","sourcesContent":["\nimport { Router } from 'express';\nimport coinService from '../domain/services/market';\nimport monitorService from '../domain/services/monitor';\nimport { verify } from \"../middleware/checkAuthorization\";\nimport { validationResult } from 'express-validator';\nconst authRouter = Router();\n\n//endpoint to get all coins availables.\nauthRouter.get('/coins',\n    verify,\n    async (req, res) => {\n        try {\n            const market = await coinService.getMarket(req['user'].prefer_coin, Number(req.query.page), Number(req.query.per_page));\n            return res.send(market);\n        } catch (error) {\n            return res.status(422).json({ errors: error });\n        }\n\n    });\n\n/*\nEndpoint to get the top  coins by user with filters \n\n@params quantity : quantity of coins to be listed.\n@params order: asc/desc listed.\n*/\nauthRouter.get('/follow/:quantity',\n    verify,\n    async (req, res) => {\n        try {\n            let order = req.params.order ? req.params.order : -1;\n            const market = await monitorService.following(req['user'].username, Number(order), Number(req.params.quantity));\n            return res.send(market);\n\n        } catch (error) {\n            return res.status(422).json({ errors: error });\n        }\n\n    })\n\n/*\nEndpoint to follow a coins. \n\n@params symbol : symbol of coins to be followed.\n*/\nauthRouter.post('/follow',\n    verify,\n    monitorService.userValidationRules(),\n    monitorService.validate,\n    async (req, res) => {\n        try {\n            const errors = validationResult(req);\n            if (!errors.isEmpty()) {\n                return res.status(422).json({ errors: errors.array() });\n            }\n            const market = await monitorService.follow({ username: req['user'].username, symbol: req.body.symbol });\n            return res.status(200).json({ message: market });\n\n        } catch (error) {\n            return res.status(422).json({ errors: error });\n        }\n\n    })\nexport default authRouter;"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"3c10d274645e52620da350e488214a01cf296164","contentHash":"adf9e016f02b2083927e612c4a3b44e1677a6a369f6a883195d65fe8b4967745"},"/home/ivan/Documents/proj/wallop/backend/src/domain/services/market.ts":{"path":"/home/ivan/Documents/proj/wallop/backend/src/domain/services/market.ts","statementMap":{"0":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"1":{"start":{"line":3,"column":28},"end":{"line":3,"column":110}},"2":{"start":{"line":3,"column":91},"end":{"line":3,"column":106}},"3":{"start":{"line":4,"column":4},"end":{"line":9,"column":7}},"4":{"start":{"line":5,"column":36},"end":{"line":5,"column":97}},"5":{"start":{"line":5,"column":42},"end":{"line":5,"column":70}},"6":{"start":{"line":5,"column":85},"end":{"line":5,"column":95}},"7":{"start":{"line":6,"column":35},"end":{"line":6,"column":100}},"8":{"start":{"line":6,"column":41},"end":{"line":6,"column":73}},"9":{"start":{"line":6,"column":88},"end":{"line":6,"column":98}},"10":{"start":{"line":7,"column":32},"end":{"line":7,"column":116}},"11":{"start":{"line":8,"column":8},"end":{"line":8,"column":78}},"12":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"13":{"start":{"line":12,"column":4},"end":{"line":12,"column":62}},"14":{"start":{"line":14,"column":0},"end":{"line":14,"column":62}},"15":{"start":{"line":15,"column":16},"end":{"line":15,"column":49}},"16":{"start":{"line":16,"column":15},"end":{"line":16,"column":49}},"17":{"start":{"line":17,"column":13},"end":{"line":24,"column":2}},"18":{"start":{"line":17,"column":19},"end":{"line":24,"column":2}},"19":{"start":{"line":18,"column":4},"end":{"line":23,"column":5}},"20":{"start":{"line":19,"column":8},"end":{"line":19,"column":89}},"21":{"start":{"line":22,"column":8},"end":{"line":22,"column":27}},"22":{"start":{"line":26,"column":4},"end":{"line":46,"column":7}},"23":{"start":{"line":27,"column":8},"end":{"line":45,"column":47}},"24":{"start":{"line":28,"column":27},"end":{"line":43,"column":15}},"25":{"start":{"line":37,"column":31},"end":{"line":43,"column":14}},"26":{"start":{"line":38,"column":29},"end":{"line":41,"column":18}},"27":{"start":{"line":39,"column":20},"end":{"line":39,"column":59}},"28":{"start":{"line":40,"column":20},"end":{"line":40,"column":82}},"29":{"start":{"line":42,"column":16},"end":{"line":42,"column":30}},"30":{"start":{"line":44,"column":12},"end":{"line":44,"column":28}},"31":{"start":{"line":45,"column":30},"end":{"line":45,"column":43}},"32":{"start":{"line":48,"column":19},"end":{"line":60,"column":2}},"33":{"start":{"line":48,"column":41},"end":{"line":60,"column":2}},"34":{"start":{"line":49,"column":4},"end":{"line":59,"column":43}},"35":{"start":{"line":50,"column":8},"end":{"line":58,"column":12}},"36":{"start":{"line":56,"column":25},"end":{"line":58,"column":10}},"37":{"start":{"line":57,"column":12},"end":{"line":57,"column":28}},"38":{"start":{"line":59,"column":26},"end":{"line":59,"column":39}},"39":{"start":{"line":61,"column":17},"end":{"line":70,"column":2}},"40":{"start":{"line":61,"column":23},"end":{"line":70,"column":2}},"41":{"start":{"line":62,"column":4},"end":{"line":69,"column":43}},"42":{"start":{"line":63,"column":8},"end":{"line":68,"column":9}},"43":{"start":{"line":64,"column":12},"end":{"line":64,"column":109}},"44":{"start":{"line":67,"column":12},"end":{"line":67,"column":31}},"45":{"start":{"line":69,"column":26},"end":{"line":69,"column":39}},"46":{"start":{"line":71,"column":22},"end":{"line":80,"column":2}},"47":{"start":{"line":71,"column":28},"end":{"line":80,"column":2}},"48":{"start":{"line":72,"column":4},"end":{"line":79,"column":43}},"49":{"start":{"line":73,"column":8},"end":{"line":78,"column":9}},"50":{"start":{"line":74,"column":12},"end":{"line":74,"column":106}},"51":{"start":{"line":77,"column":12},"end":{"line":77,"column":31}},"52":{"start":{"line":79,"column":26},"end":{"line":79,"column":39}},"53":{"start":{"line":81,"column":0},"end":{"line":87,"column":2}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":44},"end":{"line":2,"column":45}},"loc":{"start":{"line":2,"column":89},"end":{"line":10,"column":1}},"line":2},"1":{"name":"adopt","decl":{"start":{"line":3,"column":13},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":26},"end":{"line":3,"column":112}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":70},"end":{"line":3,"column":71}},"loc":{"start":{"line":3,"column":89},"end":{"line":3,"column":108}},"line":3},"3":{"name":"(anonymous_3)","decl":{"start":{"line":4,"column":36},"end":{"line":4,"column":37}},"loc":{"start":{"line":4,"column":63},"end":{"line":9,"column":5}},"line":4},"4":{"name":"fulfilled","decl":{"start":{"line":5,"column":17},"end":{"line":5,"column":26}},"loc":{"start":{"line":5,"column":34},"end":{"line":5,"column":99}},"line":5},"5":{"name":"rejected","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":25}},"loc":{"start":{"line":6,"column":33},"end":{"line":6,"column":102}},"line":6},"6":{"name":"step","decl":{"start":{"line":7,"column":17},"end":{"line":7,"column":21}},"loc":{"start":{"line":7,"column":30},"end":{"line":7,"column":118}},"line":7},"7":{"name":"(anonymous_7)","decl":{"start":{"line":11,"column":56},"end":{"line":11,"column":57}},"loc":{"start":{"line":11,"column":71},"end":{"line":13,"column":1}},"line":11},"8":{"name":"(anonymous_8)","decl":{"start":{"line":17,"column":13},"end":{"line":17,"column":14}},"loc":{"start":{"line":17,"column":19},"end":{"line":24,"column":2}},"line":17},"9":{"name":"(anonymous_9)","decl":{"start":{"line":17,"column":53},"end":{"line":17,"column":54}},"loc":{"start":{"line":17,"column":66},"end":{"line":24,"column":1}},"line":17},"10":{"name":"getMarket","decl":{"start":{"line":25,"column":9},"end":{"line":25,"column":18}},"loc":{"start":{"line":25,"column":58},"end":{"line":47,"column":1}},"line":25},"11":{"name":"(anonymous_11)","decl":{"start":{"line":26,"column":43},"end":{"line":26,"column":44}},"loc":{"start":{"line":26,"column":56},"end":{"line":46,"column":5}},"line":26},"12":{"name":"(anonymous_12)","decl":{"start":{"line":27,"column":33},"end":{"line":27,"column":34}},"loc":{"start":{"line":27,"column":39},"end":{"line":45,"column":9}},"line":27},"13":{"name":"(anonymous_13)","decl":{"start":{"line":37,"column":22},"end":{"line":37,"column":23}},"loc":{"start":{"line":37,"column":31},"end":{"line":43,"column":14}},"line":37},"14":{"name":"(anonymous_14)","decl":{"start":{"line":37,"column":63},"end":{"line":37,"column":64}},"loc":{"start":{"line":37,"column":76},"end":{"line":43,"column":13}},"line":37},"15":{"name":"(anonymous_15)","decl":{"start":{"line":38,"column":48},"end":{"line":38,"column":49}},"loc":{"start":{"line":38,"column":106},"end":{"line":41,"column":17}},"line":38},"16":{"name":"(anonymous_16)","decl":{"start":{"line":45,"column":17},"end":{"line":45,"column":18}},"loc":{"start":{"line":45,"column":28},"end":{"line":45,"column":45}},"line":45},"17":{"name":"(anonymous_17)","decl":{"start":{"line":48,"column":19},"end":{"line":48,"column":20}},"loc":{"start":{"line":48,"column":41},"end":{"line":60,"column":2}},"line":48},"18":{"name":"(anonymous_18)","decl":{"start":{"line":48,"column":75},"end":{"line":48,"column":76}},"loc":{"start":{"line":48,"column":88},"end":{"line":60,"column":1}},"line":48},"19":{"name":"(anonymous_19)","decl":{"start":{"line":49,"column":29},"end":{"line":49,"column":30}},"loc":{"start":{"line":49,"column":35},"end":{"line":59,"column":5}},"line":49},"20":{"name":"(anonymous_20)","decl":{"start":{"line":56,"column":16},"end":{"line":56,"column":17}},"loc":{"start":{"line":56,"column":25},"end":{"line":58,"column":10}},"line":56},"21":{"name":"(anonymous_21)","decl":{"start":{"line":56,"column":59},"end":{"line":56,"column":60}},"loc":{"start":{"line":56,"column":72},"end":{"line":58,"column":9}},"line":56},"22":{"name":"(anonymous_22)","decl":{"start":{"line":59,"column":13},"end":{"line":59,"column":14}},"loc":{"start":{"line":59,"column":24},"end":{"line":59,"column":41}},"line":59},"23":{"name":"(anonymous_23)","decl":{"start":{"line":61,"column":17},"end":{"line":61,"column":18}},"loc":{"start":{"line":61,"column":23},"end":{"line":70,"column":2}},"line":61},"24":{"name":"(anonymous_24)","decl":{"start":{"line":61,"column":57},"end":{"line":61,"column":58}},"loc":{"start":{"line":61,"column":70},"end":{"line":70,"column":1}},"line":61},"25":{"name":"(anonymous_25)","decl":{"start":{"line":62,"column":29},"end":{"line":62,"column":30}},"loc":{"start":{"line":62,"column":35},"end":{"line":69,"column":5}},"line":62},"26":{"name":"(anonymous_26)","decl":{"start":{"line":69,"column":13},"end":{"line":69,"column":14}},"loc":{"start":{"line":69,"column":24},"end":{"line":69,"column":41}},"line":69},"27":{"name":"(anonymous_27)","decl":{"start":{"line":71,"column":22},"end":{"line":71,"column":23}},"loc":{"start":{"line":71,"column":28},"end":{"line":80,"column":2}},"line":71},"28":{"name":"(anonymous_28)","decl":{"start":{"line":71,"column":62},"end":{"line":71,"column":63}},"loc":{"start":{"line":71,"column":75},"end":{"line":80,"column":1}},"line":71},"29":{"name":"(anonymous_29)","decl":{"start":{"line":72,"column":29},"end":{"line":72,"column":30}},"loc":{"start":{"line":72,"column":35},"end":{"line":79,"column":5}},"line":72},"30":{"name":"(anonymous_30)","decl":{"start":{"line":79,"column":13},"end":{"line":79,"column":14}},"loc":{"start":{"line":79,"column":24},"end":{"line":79,"column":41}},"line":79}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":17},"end":{"line":2,"column":21}},{"start":{"line":2,"column":25},"end":{"line":2,"column":39}},{"start":{"line":2,"column":44},"end":{"line":10,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":35},"end":{"line":3,"column":109}},"type":"cond-expr","locations":[{"start":{"line":3,"column":56},"end":{"line":3,"column":61}},{"start":{"line":3,"column":64},"end":{"line":3,"column":109}}],"line":3},"2":{"loc":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"type":"binary-expr","locations":[{"start":{"line":4,"column":16},"end":{"line":4,"column":17}},{"start":{"line":4,"column":22},"end":{"line":4,"column":33}}],"line":4},"3":{"loc":{"start":{"line":7,"column":32},"end":{"line":7,"column":115}},"type":"cond-expr","locations":[{"start":{"line":7,"column":46},"end":{"line":7,"column":67}},{"start":{"line":7,"column":70},"end":{"line":7,"column":115}}],"line":7},"4":{"loc":{"start":{"line":8,"column":51},"end":{"line":8,"column":67}},"type":"binary-expr","locations":[{"start":{"line":8,"column":51},"end":{"line":8,"column":61}},{"start":{"line":8,"column":65},"end":{"line":8,"column":67}}],"line":8},"5":{"loc":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"type":"binary-expr","locations":[{"start":{"line":11,"column":23},"end":{"line":11,"column":27}},{"start":{"line":11,"column":31},"end":{"line":11,"column":51}},{"start":{"line":11,"column":56},"end":{"line":13,"column":1}}],"line":11},"6":{"loc":{"start":{"line":12,"column":11},"end":{"line":12,"column":61}},"type":"cond-expr","locations":[{"start":{"line":12,"column":37},"end":{"line":12,"column":40}},{"start":{"line":12,"column":43},"end":{"line":12,"column":61}}],"line":12},"7":{"loc":{"start":{"line":12,"column":12},"end":{"line":12,"column":33}},"type":"binary-expr","locations":[{"start":{"line":12,"column":12},"end":{"line":12,"column":15}},{"start":{"line":12,"column":19},"end":{"line":12,"column":33}}],"line":12},"8":{"loc":{"start":{"line":25,"column":32},"end":{"line":25,"column":40}},"type":"default-arg","locations":[{"start":{"line":25,"column":39},"end":{"line":25,"column":40}}],"line":25},"9":{"loc":{"start":{"line":25,"column":42},"end":{"line":25,"column":56}},"type":"default-arg","locations":[{"start":{"line":25,"column":53},"end":{"line":25,"column":56}}],"line":25}},"s":{"0":1,"1":69,"2":1,"3":70,"4":69,"5":69,"6":0,"7":0,"8":0,"9":0,"10":139,"11":70,"12":1,"13":2,"14":1,"15":1,"16":1,"17":1,"18":34,"19":34,"20":34,"21":0,"22":1,"23":1,"24":1,"25":1,"26":1,"27":100,"28":100,"29":1,"30":1,"31":0,"32":1,"33":1,"34":1,"35":1,"36":1,"37":1,"38":0,"39":1,"40":16,"41":16,"42":16,"43":16,"44":0,"45":0,"46":1,"47":16,"48":16,"49":16,"50":16,"51":0,"52":0,"53":1},"f":{"0":70,"1":69,"2":1,"3":70,"4":69,"5":0,"6":139,"7":2,"8":34,"9":34,"10":1,"11":1,"12":1,"13":1,"14":1,"15":100,"16":0,"17":1,"18":1,"19":1,"20":1,"21":1,"22":0,"23":16,"24":16,"25":16,"26":0,"27":16,"28":16,"29":16,"30":0},"b":{"0":[1,1,1],"1":[68,1],"2":[70,70],"3":[70,69],"4":[70,70],"5":[1,1,1],"6":[1,1],"7":[2,2],"8":[0],"9":[0]},"inputSourceMap":{"version":3,"file":"/home/ivan/Documents/proj/wallop/backend/src/domain/services/market.ts","sources":["/home/ivan/Documents/proj/wallop/backend/src/domain/services/market.ts"],"names":[],"mappings":"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","sourcesContent":["import axios from \"axios\";\nimport coinService from \"./coin\";\n\nconst ping = async () => {\n    try {\n        return (await axios.get(\"https://api.coingecko.com/api/v3/ping\")).data\n    } catch (error) {\n        console.log(error)\n    }\n}\n\nasync function getMarket(prefer_coin: string, page: number = 1, per_page: number = 100): Promise<any> {\n    return await ping().then(() => {\n        let currency =\n            axios.get(\"https://api.coingecko.com/api/v3/coins/markets\", {\n                params: {\n                    per_page: per_page,\n                    page: page,\n                    order: \"market_cap_desc\",\n                    sparkline: false,\n                    vs_currency: prefer_coin\n                }\n            })\n                .then(async res => {\n                    let result = await res.data.map(\n                        ({ symbol, current_price, name, image, last_updated }) => {\n                            coinService.setImage(\n                                symbol,\n                                image\n                            );\n                            return ({ symbol, current_price, name, image, last_updated })\n                        });\n\n                    return result;\n                });\n\n        return currency;\n    }).catch((error) => { return error });\n\n}\n\nconst coinPrices = async (ids: string, prefer_coin: string) => {\n    return await ping().then(() => {\n        return axios.get(\"https://api.coingecko.com/api/v3/simple/price\", {\n            params: {\n                ids,\n                vs_currencies: prefer_coin,\n                include_last_updated_at: true\n            }\n        }).then(async res => {\n            return res.data;\n        }\n        )\n    }).catch((error) => { return error });\n\n}\nconst getCoins = async () => {\n    return await ping().then(() => {\n        try {\n            return axios.get(\"https://api.coingecko.com/api/v3/coins/list?include_platform=false\")\n\n        } catch (error) {\n            console.log(error)\n        }\n    }).catch((error) => { return error });\n\n}\n\nconst getCurrencies = async () => {\n    return await ping().then(() => {\n        try {\n            return axios.get(\"https://api.coingecko.com/api/v3/simple/supported_vs_currencies\")\n        } catch (error) {\n            console.log(error)\n        }\n    }).catch((error) => { return error });\n}\n\nexport default {\n    ping,\n    getMarket,\n    coinPrices,\n    getCoins,\n    getCurrencies\n};"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"41e1a6ee74acc43e2af6e05246669ac7deca8b1c","contentHash":"29bfe89e32c7f3c5d7a76d45e806f8c2bd049efe27bbf8e56454b51840048085"},"/home/ivan/Documents/proj/wallop/backend/src/domain/services/coin.ts":{"path":"/home/ivan/Documents/proj/wallop/backend/src/domain/services/coin.ts","statementMap":{"0":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"1":{"start":{"line":3,"column":28},"end":{"line":3,"column":110}},"2":{"start":{"line":3,"column":91},"end":{"line":3,"column":106}},"3":{"start":{"line":4,"column":4},"end":{"line":9,"column":7}},"4":{"start":{"line":5,"column":36},"end":{"line":5,"column":97}},"5":{"start":{"line":5,"column":42},"end":{"line":5,"column":70}},"6":{"start":{"line":5,"column":85},"end":{"line":5,"column":95}},"7":{"start":{"line":6,"column":35},"end":{"line":6,"column":100}},"8":{"start":{"line":6,"column":41},"end":{"line":6,"column":73}},"9":{"start":{"line":6,"column":88},"end":{"line":6,"column":98}},"10":{"start":{"line":7,"column":32},"end":{"line":7,"column":116}},"11":{"start":{"line":8,"column":8},"end":{"line":8,"column":78}},"12":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"13":{"start":{"line":12,"column":4},"end":{"line":12,"column":62}},"14":{"start":{"line":14,"column":0},"end":{"line":14,"column":62}},"15":{"start":{"line":15,"column":15},"end":{"line":15,"column":57}},"16":{"start":{"line":16,"column":16},"end":{"line":16,"column":50}},"17":{"start":{"line":18,"column":4},"end":{"line":25,"column":7}},"18":{"start":{"line":19,"column":20},"end":{"line":19,"column":67}},"19":{"start":{"line":20,"column":23},"end":{"line":20,"column":25}},"20":{"start":{"line":21,"column":8},"end":{"line":23,"column":11}},"21":{"start":{"line":22,"column":12},"end":{"line":22,"column":41}},"22":{"start":{"line":24,"column":8},"end":{"line":24,"column":37}},"23":{"start":{"line":27,"column":17},"end":{"line":45,"column":2}},"24":{"start":{"line":27,"column":36},"end":{"line":45,"column":2}},"25":{"start":{"line":28,"column":19},"end":{"line":28,"column":37}},"26":{"start":{"line":29,"column":19},"end":{"line":32,"column":5}},"27":{"start":{"line":33,"column":4},"end":{"line":44,"column":7}},"28":{"start":{"line":38,"column":8},"end":{"line":38,"column":29}},"29":{"start":{"line":39,"column":8},"end":{"line":39,"column":29}},"30":{"start":{"line":40,"column":8},"end":{"line":40,"column":20}},"31":{"start":{"line":43,"column":8},"end":{"line":43,"column":20}},"32":{"start":{"line":47,"column":4},"end":{"line":68,"column":7}},"33":{"start":{"line":48,"column":23},"end":{"line":48,"column":41}},"34":{"start":{"line":49,"column":23},"end":{"line":55,"column":9}},"35":{"start":{"line":56,"column":8},"end":{"line":67,"column":11}},"36":{"start":{"line":61,"column":12},"end":{"line":61,"column":33}},"37":{"start":{"line":62,"column":12},"end":{"line":62,"column":33}},"38":{"start":{"line":63,"column":12},"end":{"line":63,"column":24}},"39":{"start":{"line":66,"column":12},"end":{"line":66,"column":24}},"40":{"start":{"line":70,"column":28},"end":{"line":75,"column":1}},"41":{"start":{"line":71,"column":4},"end":{"line":74,"column":6}},"42":{"start":{"line":76,"column":17},"end":{"line":86,"column":1}},"43":{"start":{"line":77,"column":19},"end":{"line":77,"column":48}},"44":{"start":{"line":78,"column":4},"end":{"line":80,"column":5}},"45":{"start":{"line":79,"column":8},"end":{"line":79,"column":22}},"46":{"start":{"line":81,"column":28},"end":{"line":81,"column":30}},"47":{"start":{"line":82,"column":4},"end":{"line":82,"column":78}},"48":{"start":{"line":82,"column":30},"end":{"line":82,"column":76}},"49":{"start":{"line":83,"column":4},"end":{"line":85,"column":7}},"50":{"start":{"line":87,"column":0},"end":{"line":93,"column":2}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":44},"end":{"line":2,"column":45}},"loc":{"start":{"line":2,"column":89},"end":{"line":10,"column":1}},"line":2},"1":{"name":"adopt","decl":{"start":{"line":3,"column":13},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":26},"end":{"line":3,"column":112}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":70},"end":{"line":3,"column":71}},"loc":{"start":{"line":3,"column":89},"end":{"line":3,"column":108}},"line":3},"3":{"name":"(anonymous_3)","decl":{"start":{"line":4,"column":36},"end":{"line":4,"column":37}},"loc":{"start":{"line":4,"column":63},"end":{"line":9,"column":5}},"line":4},"4":{"name":"fulfilled","decl":{"start":{"line":5,"column":17},"end":{"line":5,"column":26}},"loc":{"start":{"line":5,"column":34},"end":{"line":5,"column":99}},"line":5},"5":{"name":"rejected","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":25}},"loc":{"start":{"line":6,"column":33},"end":{"line":6,"column":102}},"line":6},"6":{"name":"step","decl":{"start":{"line":7,"column":17},"end":{"line":7,"column":21}},"loc":{"start":{"line":7,"column":30},"end":{"line":7,"column":118}},"line":7},"7":{"name":"(anonymous_7)","decl":{"start":{"line":11,"column":56},"end":{"line":11,"column":57}},"loc":{"start":{"line":11,"column":71},"end":{"line":13,"column":1}},"line":11},"8":{"name":"getCoins","decl":{"start":{"line":17,"column":9},"end":{"line":17,"column":17}},"loc":{"start":{"line":17,"column":20},"end":{"line":26,"column":1}},"line":17},"9":{"name":"(anonymous_9)","decl":{"start":{"line":18,"column":43},"end":{"line":18,"column":44}},"loc":{"start":{"line":18,"column":56},"end":{"line":25,"column":5}},"line":18},"10":{"name":"(anonymous_10)","decl":{"start":{"line":21,"column":28},"end":{"line":21,"column":29}},"loc":{"start":{"line":21,"column":39},"end":{"line":23,"column":9}},"line":21},"11":{"name":"(anonymous_11)","decl":{"start":{"line":27,"column":17},"end":{"line":27,"column":18}},"loc":{"start":{"line":27,"column":36},"end":{"line":45,"column":2}},"line":27},"12":{"name":"(anonymous_12)","decl":{"start":{"line":27,"column":70},"end":{"line":27,"column":71}},"loc":{"start":{"line":27,"column":83},"end":{"line":45,"column":1}},"line":27},"13":{"name":"(anonymous_13)","decl":{"start":{"line":37,"column":14},"end":{"line":37,"column":15}},"loc":{"start":{"line":37,"column":24},"end":{"line":41,"column":5}},"line":37},"14":{"name":"(anonymous_14)","decl":{"start":{"line":42,"column":15},"end":{"line":42,"column":16}},"loc":{"start":{"line":42,"column":26},"end":{"line":44,"column":5}},"line":42},"15":{"name":"CreateCoin","decl":{"start":{"line":46,"column":9},"end":{"line":46,"column":19}},"loc":{"start":{"line":46,"column":49},"end":{"line":69,"column":1}},"line":46},"16":{"name":"(anonymous_16)","decl":{"start":{"line":47,"column":43},"end":{"line":47,"column":44}},"loc":{"start":{"line":47,"column":56},"end":{"line":68,"column":5}},"line":47},"17":{"name":"(anonymous_17)","decl":{"start":{"line":60,"column":18},"end":{"line":60,"column":19}},"loc":{"start":{"line":60,"column":28},"end":{"line":64,"column":9}},"line":60},"18":{"name":"(anonymous_18)","decl":{"start":{"line":65,"column":19},"end":{"line":65,"column":20}},"loc":{"start":{"line":65,"column":30},"end":{"line":67,"column":9}},"line":65},"19":{"name":"(anonymous_19)","decl":{"start":{"line":70,"column":28},"end":{"line":70,"column":29}},"loc":{"start":{"line":70,"column":34},"end":{"line":75,"column":1}},"line":70},"20":{"name":"(anonymous_20)","decl":{"start":{"line":76,"column":17},"end":{"line":76,"column":18}},"loc":{"start":{"line":76,"column":37},"end":{"line":86,"column":1}},"line":76},"21":{"name":"(anonymous_21)","decl":{"start":{"line":82,"column":23},"end":{"line":82,"column":24}},"loc":{"start":{"line":82,"column":30},"end":{"line":82,"column":76}},"line":82}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":17},"end":{"line":2,"column":21}},{"start":{"line":2,"column":25},"end":{"line":2,"column":39}},{"start":{"line":2,"column":44},"end":{"line":10,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":35},"end":{"line":3,"column":109}},"type":"cond-expr","locations":[{"start":{"line":3,"column":56},"end":{"line":3,"column":61}},{"start":{"line":3,"column":64},"end":{"line":3,"column":109}}],"line":3},"2":{"loc":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"type":"binary-expr","locations":[{"start":{"line":4,"column":16},"end":{"line":4,"column":17}},{"start":{"line":4,"column":22},"end":{"line":4,"column":33}}],"line":4},"3":{"loc":{"start":{"line":7,"column":32},"end":{"line":7,"column":115}},"type":"cond-expr","locations":[{"start":{"line":7,"column":46},"end":{"line":7,"column":67}},{"start":{"line":7,"column":70},"end":{"line":7,"column":115}}],"line":7},"4":{"loc":{"start":{"line":8,"column":51},"end":{"line":8,"column":67}},"type":"binary-expr","locations":[{"start":{"line":8,"column":51},"end":{"line":8,"column":61}},{"start":{"line":8,"column":65},"end":{"line":8,"column":67}}],"line":8},"5":{"loc":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"type":"binary-expr","locations":[{"start":{"line":11,"column":23},"end":{"line":11,"column":27}},{"start":{"line":11,"column":31},"end":{"line":11,"column":51}},{"start":{"line":11,"column":56},"end":{"line":13,"column":1}}],"line":11},"6":{"loc":{"start":{"line":12,"column":11},"end":{"line":12,"column":61}},"type":"cond-expr","locations":[{"start":{"line":12,"column":37},"end":{"line":12,"column":40}},{"start":{"line":12,"column":43},"end":{"line":12,"column":61}}],"line":12},"7":{"loc":{"start":{"line":12,"column":12},"end":{"line":12,"column":33}},"type":"binary-expr","locations":[{"start":{"line":12,"column":12},"end":{"line":12,"column":15}},{"start":{"line":12,"column":19},"end":{"line":12,"column":33}}],"line":12},"8":{"loc":{"start":{"line":78,"column":4},"end":{"line":80,"column":5}},"type":"if","locations":[{"start":{"line":78,"column":4},"end":{"line":80,"column":5}},{"start":{"line":78,"column":4},"end":{"line":80,"column":5}}],"line":78}},"s":{"0":1,"1":0,"2":0,"3":108756,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":108756,"11":108756,"12":1,"13":1,"14":1,"15":1,"16":1,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":1,"24":100,"25":100,"26":100,"27":100,"28":100,"29":100,"30":100,"31":0,"32":108656,"33":108656,"34":108656,"35":108656,"36":101860,"37":101860,"38":101860,"39":15,"40":1,"41":0,"42":1,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":1},"f":{"0":108756,"1":0,"2":0,"3":108756,"4":0,"5":0,"6":108756,"7":1,"8":0,"9":0,"10":0,"11":100,"12":100,"13":100,"14":0,"15":108656,"16":108656,"17":101860,"18":15,"19":0,"20":0,"21":0},"b":{"0":[1,1,1],"1":[0,0],"2":[108756,108756],"3":[108756,0],"4":[108756,108756],"5":[1,1,1],"6":[1,0],"7":[1,1],"8":[0,0]},"inputSourceMap":{"version":3,"file":"/home/ivan/Documents/proj/wallop/backend/src/domain/services/coin.ts","sources":["/home/ivan/Documents/proj/wallop/backend/src/domain/services/coin.ts"],"names":[],"mappings":"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","sourcesContent":["import Coin, { Icoin } from '../models/coin';\nimport { CreateQuery } from 'mongoose';\nimport { body, validationResult } from 'express-validator/check';\n\nasync function getCoins(): Promise<string> {\n\n    let coins = await Coin.find({}).select('id -_id');\n\n    let filtered = \"\";\n    await coins.forEach(element => {\n\n        filtered += element.id + \",\"\n    });\n    return filtered.slice(0, -1);\n}\n\nconst setImage = async (symbol: string, image: string) => {\n\n    const filter = { symbol: symbol };\n    const update = {\n        symbol,\n        image\n    };\n\n    return Coin.findOneAndUpdate(filter, update, {\n        new: true,\n        upsert: true // Make this update into an upsert\n    })\n        .then((data: Icoin) => {\n            data.__v = undefined\n            data._id = undefined\n            return data;\n        })\n        .catch((error: Error) => {\n            throw error;\n        });\n}\nasync function CreateCoin({\n    id,\n    symbol,\n    name,\n    image\n}: CreateQuery<Icoin>): Promise<Icoin> {\n\n    const filter = { symbol: symbol };\n    const update = {\n        id,\n        symbol,\n        name,\n        image,\n        last_update: new Date(),\n    };\n\n    return Coin.findOneAndUpdate(filter, update, {\n        new: true,\n        upsert: true // Make this update into an upsert\n    })\n        .then((data: Icoin) => {\n            data.__v = undefined\n            data._id = undefined\n            return data;\n        })\n        .catch((error: Error) => {\n            throw error;\n        });\n}\n\nconst coinValidationRules = () => {\n    return [\n        body('name').isString().isLength({ min: 3 }),\n        body('symbol').isString().isLength({ min: 3 }),\n    ]\n}\n\nconst validate = (req, res, next) => {\n    const errors = validationResult(req)\n    if (errors.isEmpty()) {\n        return next()\n    }\n    const extractedErrors = []\n    errors.array().map(err => extractedErrors.push({ [err.param]: err.msg }))\n\n    return res.status(422).json({\n        errors: extractedErrors,\n    })\n}\n\nexport default {\n    CreateCoin,\n    getCoins,\n    validate,\n    setImage,\n    coinValidationRules\n};"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"e111cc9591fed27b128c7e897d147c074dc1aeb7","contentHash":"fe19924ebf4adfab32cd65c4a3f80a70159d7c714c69fbe71a771a25754f512d"},"/home/ivan/Documents/proj/wallop/backend/src/domain/models/coin.ts":{"path":"/home/ivan/Documents/proj/wallop/backend/src/domain/models/coin.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":8,"column":3}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},"2":{"start":{"line":3,"column":26},"end":{"line":3,"column":33}},"3":{"start":{"line":4,"column":4},"end":{"line":4,"column":89}},"4":{"start":{"line":4,"column":71},"end":{"line":4,"column":83}},"5":{"start":{"line":6,"column":4},"end":{"line":6,"column":33}},"6":{"start":{"line":6,"column":26},"end":{"line":6,"column":33}},"7":{"start":{"line":7,"column":4},"end":{"line":7,"column":17}},"8":{"start":{"line":9,"column":25},"end":{"line":13,"column":2}},"9":{"start":{"line":10,"column":4},"end":{"line":10,"column":72}},"10":{"start":{"line":12,"column":4},"end":{"line":12,"column":21}},"11":{"start":{"line":14,"column":19},"end":{"line":20,"column":1}},"12":{"start":{"line":15,"column":4},"end":{"line":15,"column":42}},"13":{"start":{"line":15,"column":31},"end":{"line":15,"column":42}},"14":{"start":{"line":16,"column":17},"end":{"line":16,"column":19}},"15":{"start":{"line":17,"column":4},"end":{"line":17,"column":141}},"16":{"start":{"line":17,"column":21},"end":{"line":17,"column":141}},"17":{"start":{"line":17,"column":40},"end":{"line":17,"column":141}},"18":{"start":{"line":17,"column":109},"end":{"line":17,"column":141}},"19":{"start":{"line":18,"column":4},"end":{"line":18,"column":36}},"20":{"start":{"line":19,"column":4},"end":{"line":19,"column":18}},"21":{"start":{"line":21,"column":22},"end":{"line":23,"column":1}},"22":{"start":{"line":22,"column":4},"end":{"line":22,"column":62}},"23":{"start":{"line":24,"column":0},"end":{"line":24,"column":62}},"24":{"start":{"line":25,"column":19},"end":{"line":25,"column":52}},"25":{"start":{"line":26,"column":15},"end":{"line":26,"column":49}},"26":{"start":{"line":27,"column":19},"end":{"line":35,"column":2}},"27":{"start":{"line":36,"column":0},"end":{"line":36,"column":63}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":74},"end":{"line":2,"column":75}},"loc":{"start":{"line":2,"column":96},"end":{"line":5,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":4,"column":58},"end":{"line":4,"column":59}},"loc":{"start":{"line":4,"column":69},"end":{"line":4,"column":85}},"line":4},"2":{"name":"(anonymous_2)","decl":{"start":{"line":5,"column":6},"end":{"line":5,"column":7}},"loc":{"start":{"line":5,"column":28},"end":{"line":8,"column":1}},"line":5},"3":{"name":"(anonymous_3)","decl":{"start":{"line":9,"column":80},"end":{"line":9,"column":81}},"loc":{"start":{"line":9,"column":95},"end":{"line":11,"column":1}},"line":9},"4":{"name":"(anonymous_4)","decl":{"start":{"line":11,"column":5},"end":{"line":11,"column":6}},"loc":{"start":{"line":11,"column":20},"end":{"line":13,"column":1}},"line":11},"5":{"name":"(anonymous_5)","decl":{"start":{"line":14,"column":50},"end":{"line":14,"column":51}},"loc":{"start":{"line":14,"column":65},"end":{"line":20,"column":1}},"line":14},"6":{"name":"(anonymous_6)","decl":{"start":{"line":21,"column":56},"end":{"line":21,"column":57}},"loc":{"start":{"line":21,"column":71},"end":{"line":23,"column":1}},"line":21}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":8,"column":3}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":57},"end":{"line":8,"column":2}}],"line":2},"1":{"loc":{"start":{"line":2,"column":57},"end":{"line":8,"column":2}},"type":"cond-expr","locations":[{"start":{"line":2,"column":74},"end":{"line":5,"column":1}},{"start":{"line":5,"column":6},"end":{"line":8,"column":1}}],"line":2},"2":{"loc":{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},"type":"if","locations":[{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},{"start":{"line":3,"column":4},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":6,"column":4},"end":{"line":6,"column":33}},"type":"if","locations":[{"start":{"line":6,"column":4},"end":{"line":6,"column":33}},{"start":{"line":6,"column":4},"end":{"line":6,"column":33}}],"line":6},"4":{"loc":{"start":{"line":9,"column":25},"end":{"line":13,"column":2}},"type":"binary-expr","locations":[{"start":{"line":9,"column":26},"end":{"line":9,"column":30}},{"start":{"line":9,"column":34},"end":{"line":9,"column":57}},{"start":{"line":9,"column":63},"end":{"line":13,"column":1}}],"line":9},"5":{"loc":{"start":{"line":9,"column":63},"end":{"line":13,"column":1}},"type":"cond-expr","locations":[{"start":{"line":9,"column":80},"end":{"line":11,"column":1}},{"start":{"line":11,"column":5},"end":{"line":13,"column":1}}],"line":9},"6":{"loc":{"start":{"line":14,"column":19},"end":{"line":20,"column":1}},"type":"binary-expr","locations":[{"start":{"line":14,"column":20},"end":{"line":14,"column":24}},{"start":{"line":14,"column":28},"end":{"line":14,"column":45}},{"start":{"line":14,"column":50},"end":{"line":20,"column":1}}],"line":14},"7":{"loc":{"start":{"line":15,"column":4},"end":{"line":15,"column":42}},"type":"if","locations":[{"start":{"line":15,"column":4},"end":{"line":15,"column":42}},{"start":{"line":15,"column":4},"end":{"line":15,"column":42}}],"line":15},"8":{"loc":{"start":{"line":15,"column":8},"end":{"line":15,"column":29}},"type":"binary-expr","locations":[{"start":{"line":15,"column":8},"end":{"line":15,"column":11}},{"start":{"line":15,"column":15},"end":{"line":15,"column":29}}],"line":15},"9":{"loc":{"start":{"line":17,"column":4},"end":{"line":17,"column":141}},"type":"if","locations":[{"start":{"line":17,"column":4},"end":{"line":17,"column":141}},{"start":{"line":17,"column":4},"end":{"line":17,"column":141}}],"line":17},"10":{"loc":{"start":{"line":17,"column":40},"end":{"line":17,"column":141}},"type":"if","locations":[{"start":{"line":17,"column":40},"end":{"line":17,"column":141}},{"start":{"line":17,"column":40},"end":{"line":17,"column":141}}],"line":17},"11":{"loc":{"start":{"line":17,"column":44},"end":{"line":17,"column":107}},"type":"binary-expr","locations":[{"start":{"line":17,"column":44},"end":{"line":17,"column":59}},{"start":{"line":17,"column":63},"end":{"line":17,"column":107}}],"line":17},"12":{"loc":{"start":{"line":21,"column":22},"end":{"line":23,"column":1}},"type":"binary-expr","locations":[{"start":{"line":21,"column":23},"end":{"line":21,"column":27}},{"start":{"line":21,"column":31},"end":{"line":21,"column":51}},{"start":{"line":21,"column":56},"end":{"line":23,"column":1}}],"line":21},"13":{"loc":{"start":{"line":22,"column":11},"end":{"line":22,"column":61}},"type":"cond-expr","locations":[{"start":{"line":22,"column":37},"end":{"line":22,"column":40}},{"start":{"line":22,"column":43},"end":{"line":22,"column":61}}],"line":22},"14":{"loc":{"start":{"line":22,"column":12},"end":{"line":22,"column":33}},"type":"binary-expr","locations":[{"start":{"line":22,"column":12},"end":{"line":22,"column":15}},{"start":{"line":22,"column":19},"end":{"line":22,"column":33}}],"line":22}},"s":{"0":1,"1":9,"2":9,"3":9,"4":2,"5":0,"6":0,"7":0,"8":1,"9":1,"10":0,"11":1,"12":1,"13":0,"14":1,"15":1,"16":1,"17":51,"18":9,"19":1,"20":1,"21":1,"22":1,"23":1,"24":1,"25":1,"26":1,"27":1},"f":{"0":9,"1":2,"2":0,"3":1,"4":0,"5":1,"6":1},"b":{"0":[1,1,1],"1":[1,0],"2":[9,0],"3":[0,0],"4":[1,1,1],"5":[1,0],"6":[1,1,1],"7":[0,1],"8":[1,1],"9":[1,0],"10":[9,42],"11":[51,51],"12":[1,1,1],"13":[1,0],"14":[1,1]},"inputSourceMap":{"version":3,"file":"/home/ivan/Documents/proj/wallop/backend/src/domain/models/coin.ts","sources":["/home/ivan/Documents/proj/wallop/backend/src/domain/models/coin.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAAA,qDAAsD;AACtD,kDAA0B;AAU1B,MAAM,UAAU,GAAW,IAAI,iBAAM,CAAC;IAClC,EAAE,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE,QAAQ,EAAE,CAAC,IAAI,EAAE,aAAa,CAAC,EAAE,MAAM,EAAE,CAAC,IAAI,EAAE,mBAAmB,CAAC,EAAE;IAC1F,MAAM,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE,QAAQ,EAAE,CAAC,IAAI,EAAE,iBAAiB,CAAC,EAAE,KAAK,EAAE,EAAE,MAAM,EAAE,IAAI,EAAE,EAAE;IACtF,IAAI,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE,QAAQ,EAAE,CAAC,IAAI,EAAE,eAAe,CAAC,EAAE;IACzD,KAAK,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE;IACvB,KAAK,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE,QAAQ,EAAE,CAAC,IAAI,EAAE,gBAAgB,CAAC,EAAE;IAC3D,WAAW,EAAE,EAAE,IAAI,EAAE,IAAI,EAAE;IAC3B,KAAK,EAAE,CAAC,EAAE,IAAI,EAAE,iBAAM,CAAC,KAAK,CAAC,QAAQ,EAAE,GAAG,EAAE,cAAI,EAAE,CAAC;CAEtD,CAAC,CAAC;AACH,kBAAe,kBAAQ,CAAC,KAAK,CAAQ,MAAM,EAAE,UAAU,CAAC,CAAC","sourcesContent":["import mongoose, { Schema, Document } from 'mongoose';\nimport user from \"./user\";\nexport interface Icoin extends Document {\n    id: string,\n    symbol: string,\n    name: string,\n    price?: Number,\n    image?: string,\n    last_update?: Date\n}\n\nconst UserSchema: Schema = new Schema({\n    id: { type: String, required: [true, 'Enter a id.'], unique: [true, 'That id is taken.'] },\n    symbol: { type: String, required: [true, 'Enter a symbol.'], index: { unique: true } },\n    name: { type: String, required: [true, 'Enter a name.'] },\n    image: { type: String },\n    price: { type: Number, required: [true, 'Enter a price.'] },\n    last_update: { type: Date },\n    users: [{ type: Schema.Types.ObjectId, ref: user }]\n\n});\nexport default mongoose.model<Icoin>('Coin', UserSchema);"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"7501fd1c52ee8f3c7e8c85401647c58943d2bbfd","contentHash":"6fbfda5d19b96ee405ba927453cc3e572ea761395d36b86d0c67ef84e69fd58f"},"/home/ivan/Documents/proj/wallop/backend/src/domain/services/monitor.ts":{"path":"/home/ivan/Documents/proj/wallop/backend/src/domain/services/monitor.ts","statementMap":{"0":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"1":{"start":{"line":3,"column":28},"end":{"line":3,"column":110}},"2":{"start":{"line":3,"column":91},"end":{"line":3,"column":106}},"3":{"start":{"line":4,"column":4},"end":{"line":9,"column":7}},"4":{"start":{"line":5,"column":36},"end":{"line":5,"column":97}},"5":{"start":{"line":5,"column":42},"end":{"line":5,"column":70}},"6":{"start":{"line":5,"column":85},"end":{"line":5,"column":95}},"7":{"start":{"line":6,"column":35},"end":{"line":6,"column":100}},"8":{"start":{"line":6,"column":41},"end":{"line":6,"column":73}},"9":{"start":{"line":6,"column":88},"end":{"line":6,"column":98}},"10":{"start":{"line":7,"column":32},"end":{"line":7,"column":116}},"11":{"start":{"line":8,"column":8},"end":{"line":8,"column":78}},"12":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"13":{"start":{"line":12,"column":4},"end":{"line":12,"column":62}},"14":{"start":{"line":14,"column":0},"end":{"line":14,"column":62}},"15":{"start":{"line":15,"column":15},"end":{"line":15,"column":57}},"16":{"start":{"line":16,"column":16},"end":{"line":16,"column":50}},"17":{"start":{"line":17,"column":15},"end":{"line":17,"column":57}},"18":{"start":{"line":18,"column":17},"end":{"line":18,"column":53}},"19":{"start":{"line":19,"column":19},"end":{"line":19,"column":21}},"20":{"start":{"line":21,"column":4},"end":{"line":35,"column":7}},"21":{"start":{"line":22,"column":21},"end":{"line":22,"column":76}},"22":{"start":{"line":23,"column":25},"end":{"line":28,"column":17}},"23":{"start":{"line":29,"column":8},"end":{"line":34,"column":50}},"24":{"start":{"line":30,"column":12},"end":{"line":30,"column":152}},"25":{"start":{"line":31,"column":12},"end":{"line":31,"column":46}},"26":{"start":{"line":34,"column":12},"end":{"line":34,"column":50}},"27":{"start":{"line":38,"column":4},"end":{"line":62,"column":7}},"28":{"start":{"line":39,"column":8},"end":{"line":61,"column":9}},"29":{"start":{"line":40,"column":29},"end":{"line":40,"column":78}},"30":{"start":{"line":41,"column":30},"end":{"line":41,"column":156}},"31":{"start":{"line":42,"column":27},"end":{"line":42,"column":29}},"32":{"start":{"line":43,"column":25},"end":{"line":43,"column":27}},"33":{"start":{"line":44,"column":12},"end":{"line":46,"column":15}},"34":{"start":{"line":45,"column":16},"end":{"line":45,"column":45}},"35":{"start":{"line":47,"column":12},"end":{"line":47,"column":45}},"36":{"start":{"line":48,"column":29},"end":{"line":48,"column":130}},"37":{"start":{"line":49,"column":12},"end":{"line":56,"column":15}},"38":{"start":{"line":50,"column":16},"end":{"line":55,"column":19}},"39":{"start":{"line":57,"column":12},"end":{"line":57,"column":26}},"40":{"start":{"line":60,"column":12},"end":{"line":60,"column":25}},"41":{"start":{"line":64,"column":28},"end":{"line":68,"column":1}},"42":{"start":{"line":65,"column":4},"end":{"line":67,"column":6}},"43":{"start":{"line":69,"column":17},"end":{"line":79,"column":1}},"44":{"start":{"line":70,"column":19},"end":{"line":70,"column":48}},"45":{"start":{"line":71,"column":4},"end":{"line":73,"column":5}},"46":{"start":{"line":72,"column":8},"end":{"line":72,"column":22}},"47":{"start":{"line":74,"column":28},"end":{"line":74,"column":30}},"48":{"start":{"line":75,"column":4},"end":{"line":75,"column":78}},"49":{"start":{"line":75,"column":30},"end":{"line":75,"column":76}},"50":{"start":{"line":76,"column":4},"end":{"line":78,"column":7}},"51":{"start":{"line":80,"column":0},"end":{"line":85,"column":2}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":44},"end":{"line":2,"column":45}},"loc":{"start":{"line":2,"column":89},"end":{"line":10,"column":1}},"line":2},"1":{"name":"adopt","decl":{"start":{"line":3,"column":13},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":26},"end":{"line":3,"column":112}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":70},"end":{"line":3,"column":71}},"loc":{"start":{"line":3,"column":89},"end":{"line":3,"column":108}},"line":3},"3":{"name":"(anonymous_3)","decl":{"start":{"line":4,"column":36},"end":{"line":4,"column":37}},"loc":{"start":{"line":4,"column":63},"end":{"line":9,"column":5}},"line":4},"4":{"name":"fulfilled","decl":{"start":{"line":5,"column":17},"end":{"line":5,"column":26}},"loc":{"start":{"line":5,"column":34},"end":{"line":5,"column":99}},"line":5},"5":{"name":"rejected","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":25}},"loc":{"start":{"line":6,"column":33},"end":{"line":6,"column":102}},"line":6},"6":{"name":"step","decl":{"start":{"line":7,"column":17},"end":{"line":7,"column":21}},"loc":{"start":{"line":7,"column":30},"end":{"line":7,"column":118}},"line":7},"7":{"name":"(anonymous_7)","decl":{"start":{"line":11,"column":56},"end":{"line":11,"column":57}},"loc":{"start":{"line":11,"column":71},"end":{"line":13,"column":1}},"line":11},"8":{"name":"follow","decl":{"start":{"line":20,"column":9},"end":{"line":20,"column":15}},"loc":{"start":{"line":20,"column":38},"end":{"line":36,"column":1}},"line":20},"9":{"name":"(anonymous_9)","decl":{"start":{"line":21,"column":43},"end":{"line":21,"column":44}},"loc":{"start":{"line":21,"column":56},"end":{"line":35,"column":5}},"line":21},"10":{"name":"following","decl":{"start":{"line":37,"column":9},"end":{"line":37,"column":18}},"loc":{"start":{"line":37,"column":51},"end":{"line":63,"column":1}},"line":37},"11":{"name":"(anonymous_11)","decl":{"start":{"line":38,"column":43},"end":{"line":38,"column":44}},"loc":{"start":{"line":38,"column":56},"end":{"line":62,"column":5}},"line":38},"12":{"name":"(anonymous_12)","decl":{"start":{"line":44,"column":32},"end":{"line":44,"column":33}},"loc":{"start":{"line":44,"column":43},"end":{"line":46,"column":13}},"line":44},"13":{"name":"(anonymous_13)","decl":{"start":{"line":49,"column":32},"end":{"line":49,"column":33}},"loc":{"start":{"line":49,"column":43},"end":{"line":56,"column":13}},"line":49},"14":{"name":"(anonymous_14)","decl":{"start":{"line":64,"column":28},"end":{"line":64,"column":29}},"loc":{"start":{"line":64,"column":34},"end":{"line":68,"column":1}},"line":64},"15":{"name":"(anonymous_15)","decl":{"start":{"line":69,"column":17},"end":{"line":69,"column":18}},"loc":{"start":{"line":69,"column":37},"end":{"line":79,"column":1}},"line":69},"16":{"name":"(anonymous_16)","decl":{"start":{"line":75,"column":23},"end":{"line":75,"column":24}},"loc":{"start":{"line":75,"column":30},"end":{"line":75,"column":76}},"line":75}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":17},"end":{"line":2,"column":21}},{"start":{"line":2,"column":25},"end":{"line":2,"column":39}},{"start":{"line":2,"column":44},"end":{"line":10,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":35},"end":{"line":3,"column":109}},"type":"cond-expr","locations":[{"start":{"line":3,"column":56},"end":{"line":3,"column":61}},{"start":{"line":3,"column":64},"end":{"line":3,"column":109}}],"line":3},"2":{"loc":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"type":"binary-expr","locations":[{"start":{"line":4,"column":16},"end":{"line":4,"column":17}},{"start":{"line":4,"column":22},"end":{"line":4,"column":33}}],"line":4},"3":{"loc":{"start":{"line":7,"column":32},"end":{"line":7,"column":115}},"type":"cond-expr","locations":[{"start":{"line":7,"column":46},"end":{"line":7,"column":67}},{"start":{"line":7,"column":70},"end":{"line":7,"column":115}}],"line":7},"4":{"loc":{"start":{"line":8,"column":51},"end":{"line":8,"column":67}},"type":"binary-expr","locations":[{"start":{"line":8,"column":51},"end":{"line":8,"column":61}},{"start":{"line":8,"column":65},"end":{"line":8,"column":67}}],"line":8},"5":{"loc":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"type":"binary-expr","locations":[{"start":{"line":11,"column":23},"end":{"line":11,"column":27}},{"start":{"line":11,"column":31},"end":{"line":11,"column":51}},{"start":{"line":11,"column":56},"end":{"line":13,"column":1}}],"line":11},"6":{"loc":{"start":{"line":12,"column":11},"end":{"line":12,"column":61}},"type":"cond-expr","locations":[{"start":{"line":12,"column":37},"end":{"line":12,"column":40}},{"start":{"line":12,"column":43},"end":{"line":12,"column":61}}],"line":12},"7":{"loc":{"start":{"line":12,"column":12},"end":{"line":12,"column":33}},"type":"binary-expr","locations":[{"start":{"line":12,"column":12},"end":{"line":12,"column":15}},{"start":{"line":12,"column":19},"end":{"line":12,"column":33}}],"line":12},"8":{"loc":{"start":{"line":29,"column":8},"end":{"line":34,"column":50}},"type":"if","locations":[{"start":{"line":29,"column":8},"end":{"line":34,"column":50}},{"start":{"line":29,"column":8},"end":{"line":34,"column":50}}],"line":29},"9":{"loc":{"start":{"line":37,"column":29},"end":{"line":37,"column":39}},"type":"default-arg","locations":[{"start":{"line":37,"column":37},"end":{"line":37,"column":39}}],"line":37},"10":{"loc":{"start":{"line":71,"column":4},"end":{"line":73,"column":5}},"type":"if","locations":[{"start":{"line":71,"column":4},"end":{"line":73,"column":5}},{"start":{"line":71,"column":4},"end":{"line":73,"column":5}}],"line":71}},"s":{"0":1,"1":5,"2":1,"3":2,"4":5,"5":5,"6":0,"7":0,"8":0,"9":0,"10":7,"11":2,"12":1,"13":3,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":1,"21":1,"22":1,"23":1,"24":0,"25":0,"26":1,"27":1,"28":1,"29":1,"30":1,"31":1,"32":1,"33":1,"34":4,"35":1,"36":1,"37":1,"38":4,"39":1,"40":0,"41":1,"42":1,"43":1,"44":1,"45":1,"46":1,"47":0,"48":0,"49":0,"50":0,"51":1},"f":{"0":2,"1":5,"2":1,"3":2,"4":5,"5":0,"6":7,"7":3,"8":1,"9":1,"10":1,"11":1,"12":4,"13":4,"14":1,"15":1,"16":0},"b":{"0":[1,1,1],"1":[4,1],"2":[2,2],"3":[2,5],"4":[2,2],"5":[1,1,1],"6":[3,0],"7":[3,3],"8":[0,1],"9":[0],"10":[1,0]},"inputSourceMap":{"version":3,"file":"/home/ivan/Documents/proj/wallop/backend/src/domain/services/monitor.ts","sources":["/home/ivan/Documents/proj/wallop/backend/src/domain/services/monitor.ts"],"names":[],"mappings":"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","sourcesContent":["import Coin, { Icoin } from '../models/coin';\nimport { body, validationResult } from 'express-validator/check';\nimport User, { IUser } from \"../models/user\";\nimport marketController from \"./market\";\nconst saltRounds = 10;\n\nasync function follow({ username, symbol }): Promise<String> {\n    let finded = await Coin.findOne({ symbol: symbol }).exec();\n    let findedUser = await User.findOne(\n        {\n            username,\n            following: {\n                $elemMatch: { $eq: finded._id }\n            }\n        }).exec();\n    if (!findedUser) {\n        await User.findOneAndUpdate(\n            username,\n            { $push: { following: finded._id } },\n            { new: true, upsert: true, useFindAndModify: false }\n        );\n        return 'following a new currency';\n    } else\n        return 'you already follow this coin';\n}\n\nasync function following(username: string, order: Number = -1, quantity: number): Promise<any[]> {\n\n    try {\n        let findedUser = await User.findOne({ username }).exec();\n        let findedCoins = await Coin.find({ _id: findedUser.following }).select('id symbol name -_id').sort({ symbol: order }).limit(quantity);\n        let filtered = \"\";\n        let result = [];\n\n        findedCoins.forEach(element => {\n            filtered += element.id + \",\"\n        });\n        filtered = filtered.slice(0, -1);\n        let coinPrices = await marketController.coinPrices(filtered, findedUser.prefer_coin + \",\" + process.env.COINS_DEFAULT);\n\n        findedCoins.forEach(element => {\n            result.push({\n                symbol: element.symbol,\n                name: element.name,\n                prices: coinPrices[element.name.toLowerCase()],\n                image: element.image\n            })\n        });\n        return result;\n    } catch (error) {\n        return error;\n    }\n\n}\n\nconst userValidationRules = () => {\n    return [\n        body('symbol').isString().isLength({ min: 3 }),\n    ]\n}\n\nconst validate = (req, res, next) => {\n    const errors = validationResult(req)\n    if (errors.isEmpty()) {\n        return next()\n    }\n    const extractedErrors = []\n    errors.array().map(err => extractedErrors.push({ [err.param]: err.msg }))\n\n    return res.status(422).json({\n        errors: extractedErrors,\n    })\n}\n\nexport default {\n    follow,\n    following,\n    validate,\n    userValidationRules\n};"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"5f9056b215f025dc87e029c5fb5e5201fe838c8a","contentHash":"1cfb7d3324804b8894355e6e370389a70078fe1342e31ed000cb37eaf2b40b4a"},"/home/ivan/Documents/proj/wallop/backend/src/middleware/checkAuthorization.ts":{"path":"/home/ivan/Documents/proj/wallop/backend/src/middleware/checkAuthorization.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":0},"end":{"line":6,"column":24}},"4":{"start":{"line":7,"column":23},"end":{"line":7,"column":63}},"5":{"start":{"line":8,"column":15},"end":{"line":24,"column":1}},"6":{"start":{"line":9,"column":21},"end":{"line":9,"column":49}},"7":{"start":{"line":10,"column":4},"end":{"line":11,"column":35}},"8":{"start":{"line":11,"column":8},"end":{"line":11,"column":35}},"9":{"start":{"line":12,"column":4},"end":{"line":23,"column":5}},"10":{"start":{"line":13,"column":8},"end":{"line":13,"column":55}},"11":{"start":{"line":14,"column":8},"end":{"line":19,"column":11}},"12":{"start":{"line":15,"column":12},"end":{"line":16,"column":81}},"13":{"start":{"line":16,"column":16},"end":{"line":16,"column":81}},"14":{"start":{"line":17,"column":12},"end":{"line":17,"column":28}},"15":{"start":{"line":18,"column":12},"end":{"line":18,"column":19}},"16":{"start":{"line":22,"column":8},"end":{"line":22,"column":38}},"17":{"start":{"line":25,"column":0},"end":{"line":25,"column":24}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":8,"column":15},"end":{"line":8,"column":16}},"loc":{"start":{"line":8,"column":35},"end":{"line":24,"column":1}},"line":8},"2":{"name":"(anonymous_2)","decl":{"start":{"line":14,"column":83},"end":{"line":14,"column":84}},"loc":{"start":{"line":14,"column":98},"end":{"line":19,"column":9}},"line":14}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":10,"column":4},"end":{"line":11,"column":35}},"type":"if","locations":[{"start":{"line":10,"column":4},"end":{"line":11,"column":35}},{"start":{"line":10,"column":4},"end":{"line":11,"column":35}}],"line":10},"4":{"loc":{"start":{"line":15,"column":12},"end":{"line":16,"column":81}},"type":"if","locations":[{"start":{"line":15,"column":12},"end":{"line":16,"column":81}},{"start":{"line":15,"column":12},"end":{"line":16,"column":81}}],"line":15}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":3,"7":3,"8":0,"9":3,"10":3,"11":3,"12":3,"13":0,"14":3,"15":3,"16":0,"17":1},"f":{"0":1,"1":3,"2":3},"b":{"0":[1,1,1],"1":[0,1],"2":[1,1],"3":[0,3],"4":[0,3]},"inputSourceMap":{"version":3,"file":"/home/ivan/Documents/proj/wallop/backend/src/middleware/checkAuthorization.ts","sources":["/home/ivan/Documents/proj/wallop/backend/src/middleware/checkAuthorization.ts"],"names":[],"mappings":";;;;;;AAAA,gEAA+B;AAG/B,MAAM,MAAM,GAAG,CAAC,GAAG,EAAE,GAAG,EAAE,IAAI,EAAE,EAAE;IAC9B,IAAI,UAAU,GAAG,GAAG,CAAC,OAAO,CAAC,eAAe,CAAC,CAAA;IAC7C,IAAI,UAAU,IAAI,IAAI;QAAE,OAAO,GAAG,CAAC,UAAU,CAAC,GAAG,CAAC,CAAA;IAElD,IAAI;QACA,UAAU,GAAG,UAAU,CAAC,OAAO,CAAC,SAAS,EAAE,EAAE,CAAC,CAAA;QAC9C,sBAAG,CAAC,MAAM,CAAC,UAAU,EAAE,OAAO,CAAC,GAAG,CAAC,mBAA6B,EAAE,CAAC,GAAQ,EAAE,IAAS,EAAE,EAAE;YAEtF,IAAI,GAAG;gBAAE,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAE,OAAO,EAAE,sBAAsB,EAAE,CAAC,CAAC;YAE1E,GAAG,CAAC,IAAI,GAAG,IAAI,CAAA;YACf,IAAI,EAAE,CAAC;QACX,CAAC,CAAC,CAAA;KACL;IAAC,OAAO,KAAK,EAAE;QACZ,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,EAAE,CAAA;KAChC;AACL,CAAC,CAAA;AAGG,wBAAM","sourcesContent":["import jwt from \"jsonwebtoken\";\n\n\nconst verify = (req, res, next) => {\n    let authHeader = req.headers['authorization']\n    if (authHeader == null) return res.sendStatus(403)\n\n    try {\n        authHeader = authHeader.replace('Bearer ', '')\n        jwt.verify(authHeader, process.env.ACCESS_TOKEN_SECRET as string, (err: any, user: any) => {\n\n            if (err) return res.status(403).send({ message: \"El token ha expirado\" });\n\n            req.user = user\n            next();\n        })\n    } catch (error) {\n        return res.status(401).send()\n    }\n}\n\nexport {\n    verify\n};"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"3acf7de35c191688f4f802a20c7aa02315a58261","contentHash":"89031b6006685bed33a2ed0abd000f1789ae622dbcbffa2315b2d3fa8419e73e"},"/home/ivan/Documents/proj/wallop/backend/src/infra/databases/mongodb/connect.ts":{"path":"/home/ivan/Documents/proj/wallop/backend/src/infra/databases/mongodb/connect.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":19},"end":{"line":6,"column":55}},"4":{"start":{"line":7,"column":0},"end":{"line":21,"column":2}},"5":{"start":{"line":8,"column":20},"end":{"line":18,"column":5}},"6":{"start":{"line":9,"column":8},"end":{"line":17,"column":11}},"7":{"start":{"line":12,"column":12},"end":{"line":12,"column":67}},"8":{"start":{"line":15,"column":12},"end":{"line":15,"column":67}},"9":{"start":{"line":16,"column":12},"end":{"line":16,"column":35}},"10":{"start":{"line":19,"column":4},"end":{"line":19,"column":14}},"11":{"start":{"line":20,"column":4},"end":{"line":20,"column":62}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":7,"column":18},"end":{"line":7,"column":19}},"loc":{"start":{"line":7,"column":30},"end":{"line":21,"column":1}},"line":7},"2":{"name":"(anonymous_2)","decl":{"start":{"line":8,"column":20},"end":{"line":8,"column":21}},"loc":{"start":{"line":8,"column":26},"end":{"line":18,"column":5}},"line":8},"3":{"name":"(anonymous_3)","decl":{"start":{"line":11,"column":18},"end":{"line":11,"column":19}},"loc":{"start":{"line":11,"column":24},"end":{"line":13,"column":9}},"line":11},"4":{"name":"(anonymous_4)","decl":{"start":{"line":14,"column":19},"end":{"line":14,"column":20}},"loc":{"start":{"line":14,"column":28},"end":{"line":17,"column":9}},"line":14}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":0,"9":0,"10":1,"11":1},"f":{"0":1,"1":1,"2":1,"3":1,"4":0},"b":{"0":[1,1,1],"1":[0,1],"2":[1,1]},"inputSourceMap":{"version":3,"file":"/home/ivan/Documents/proj/wallop/backend/src/infra/databases/mongodb/connect.ts","sources":["/home/ivan/Documents/proj/wallop/backend/src/infra/databases/mongodb/connect.ts"],"names":[],"mappings":";;;;;AACA,wDAAgC;AAKhC,kBAAe,CAAC,EAAE,EAAE,EAAU,EAAE,EAAE;IAE9B,MAAM,OAAO,GAAG,GAAG,EAAE;QACjB,kBAAQ;aACH,OAAO,CACJ,EAAE,EACF,EAAE,kBAAkB,EAAE,IAAI,EAAE,eAAe,EAAE,IAAI,EAAE,gBAAgB,EAAE,KAAK,EAAE,CAC/E;aACA,IAAI,CAAC,GAAG,EAAE;YACP,OAAO,OAAO,CAAC,IAAI,CAAC,6BAA6B,EAAE,EAAE,CAAC,CAAC;QAC3D,CAAC,CAAC;aACD,KAAK,CAAC,KAAK,CAAC,EAAE;YACX,OAAO,CAAC,KAAK,CAAC,gCAAgC,EAAE,KAAK,CAAC,CAAC;YACvD,OAAO,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;QAC3B,CAAC,CAAC,CAAC;IACX,CAAC,CAAC;IACF,OAAO,EAAE,CAAC;IAEV,kBAAQ,CAAC,UAAU,CAAC,EAAE,CAAC,cAAc,EAAE,OAAO,CAAC,CAAC;AACpD,CAAC,CAAC","sourcesContent":["\nimport mongoose from 'mongoose';\n\ntype TInput = {\n    db: string;\n}\nexport default ({ db }: TInput) => {\n\n    const connect = () => {\n        mongoose\n            .connect(\n                db,\n                { useUnifiedTopology: true, useNewUrlParser: true, useFindAndModify: false }\n            )\n            .then(() => {\n                return console.info(`Successfully connected to ${db}`);\n            })\n            .catch(error => {\n                console.error('Error connecting to database: ', error);\n                return process.exit(1);\n            });\n    };\n    connect();\n\n    mongoose.connection.on('disconnected', connect);\n};"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"2c9c167ac57db943d531c85b0caadd6d7f961fbf","contentHash":"a31cfdac608a0d7cae2313b38fab0c84700a578e7cfa383cde7c61973bf883d9"},"/home/ivan/Documents/proj/wallop/backend/src/events/coinList.ts":{"path":"/home/ivan/Documents/proj/wallop/backend/src/events/coinList.ts","statementMap":{"0":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"1":{"start":{"line":3,"column":28},"end":{"line":3,"column":110}},"2":{"start":{"line":3,"column":91},"end":{"line":3,"column":106}},"3":{"start":{"line":4,"column":4},"end":{"line":9,"column":7}},"4":{"start":{"line":5,"column":36},"end":{"line":5,"column":97}},"5":{"start":{"line":5,"column":42},"end":{"line":5,"column":70}},"6":{"start":{"line":5,"column":85},"end":{"line":5,"column":95}},"7":{"start":{"line":6,"column":35},"end":{"line":6,"column":100}},"8":{"start":{"line":6,"column":41},"end":{"line":6,"column":73}},"9":{"start":{"line":6,"column":88},"end":{"line":6,"column":98}},"10":{"start":{"line":7,"column":32},"end":{"line":7,"column":116}},"11":{"start":{"line":8,"column":8},"end":{"line":8,"column":78}},"12":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"13":{"start":{"line":12,"column":4},"end":{"line":12,"column":62}},"14":{"start":{"line":14,"column":0},"end":{"line":14,"column":62}},"15":{"start":{"line":15,"column":17},"end":{"line":15,"column":70}},"16":{"start":{"line":16,"column":15},"end":{"line":16,"column":66}},"17":{"start":{"line":17,"column":28},"end":{"line":37,"column":2}},"18":{"start":{"line":17,"column":34},"end":{"line":37,"column":2}},"19":{"start":{"line":18,"column":4},"end":{"line":36,"column":5}},"20":{"start":{"line":19,"column":22},"end":{"line":19,"column":55}},"21":{"start":{"line":20,"column":8},"end":{"line":32,"column":9}},"22":{"start":{"line":21,"column":12},"end":{"line":31,"column":16}},"23":{"start":{"line":21,"column":44},"end":{"line":31,"column":14}},"24":{"start":{"line":22,"column":31},"end":{"line":26,"column":18}},"25":{"start":{"line":27,"column":16},"end":{"line":30,"column":17}},"26":{"start":{"line":28,"column":31},"end":{"line":28,"column":51}},"27":{"start":{"line":29,"column":20},"end":{"line":29,"column":32}},"28":{"start":{"line":35,"column":8},"end":{"line":35,"column":52}},"29":{"start":{"line":38,"column":0},"end":{"line":38,"column":38}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":44},"end":{"line":2,"column":45}},"loc":{"start":{"line":2,"column":89},"end":{"line":10,"column":1}},"line":2},"1":{"name":"adopt","decl":{"start":{"line":3,"column":13},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":26},"end":{"line":3,"column":112}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":70},"end":{"line":3,"column":71}},"loc":{"start":{"line":3,"column":89},"end":{"line":3,"column":108}},"line":3},"3":{"name":"(anonymous_3)","decl":{"start":{"line":4,"column":36},"end":{"line":4,"column":37}},"loc":{"start":{"line":4,"column":63},"end":{"line":9,"column":5}},"line":4},"4":{"name":"fulfilled","decl":{"start":{"line":5,"column":17},"end":{"line":5,"column":26}},"loc":{"start":{"line":5,"column":34},"end":{"line":5,"column":99}},"line":5},"5":{"name":"rejected","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":25}},"loc":{"start":{"line":6,"column":33},"end":{"line":6,"column":102}},"line":6},"6":{"name":"step","decl":{"start":{"line":7,"column":17},"end":{"line":7,"column":21}},"loc":{"start":{"line":7,"column":30},"end":{"line":7,"column":118}},"line":7},"7":{"name":"(anonymous_7)","decl":{"start":{"line":11,"column":56},"end":{"line":11,"column":57}},"loc":{"start":{"line":11,"column":71},"end":{"line":13,"column":1}},"line":11},"8":{"name":"(anonymous_8)","decl":{"start":{"line":17,"column":28},"end":{"line":17,"column":29}},"loc":{"start":{"line":17,"column":34},"end":{"line":37,"column":2}},"line":17},"9":{"name":"(anonymous_9)","decl":{"start":{"line":17,"column":68},"end":{"line":17,"column":69}},"loc":{"start":{"line":17,"column":81},"end":{"line":37,"column":1}},"line":17},"10":{"name":"(anonymous_10)","decl":{"start":{"line":21,"column":31},"end":{"line":21,"column":32}},"loc":{"start":{"line":21,"column":44},"end":{"line":31,"column":14}},"line":21},"11":{"name":"(anonymous_11)","decl":{"start":{"line":21,"column":78},"end":{"line":21,"column":79}},"loc":{"start":{"line":21,"column":91},"end":{"line":31,"column":13}},"line":21}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":17},"end":{"line":2,"column":21}},{"start":{"line":2,"column":25},"end":{"line":2,"column":39}},{"start":{"line":2,"column":44},"end":{"line":10,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":35},"end":{"line":3,"column":109}},"type":"cond-expr","locations":[{"start":{"line":3,"column":56},"end":{"line":3,"column":61}},{"start":{"line":3,"column":64},"end":{"line":3,"column":109}}],"line":3},"2":{"loc":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"type":"binary-expr","locations":[{"start":{"line":4,"column":16},"end":{"line":4,"column":17}},{"start":{"line":4,"column":22},"end":{"line":4,"column":33}}],"line":4},"3":{"loc":{"start":{"line":7,"column":32},"end":{"line":7,"column":115}},"type":"cond-expr","locations":[{"start":{"line":7,"column":46},"end":{"line":7,"column":67}},{"start":{"line":7,"column":70},"end":{"line":7,"column":115}}],"line":7},"4":{"loc":{"start":{"line":8,"column":51},"end":{"line":8,"column":67}},"type":"binary-expr","locations":[{"start":{"line":8,"column":51},"end":{"line":8,"column":61}},{"start":{"line":8,"column":65},"end":{"line":8,"column":67}}],"line":8},"5":{"loc":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"type":"binary-expr","locations":[{"start":{"line":11,"column":23},"end":{"line":11,"column":27}},{"start":{"line":11,"column":31},"end":{"line":11,"column":51}},{"start":{"line":11,"column":56},"end":{"line":13,"column":1}}],"line":11},"6":{"loc":{"start":{"line":12,"column":11},"end":{"line":12,"column":61}},"type":"cond-expr","locations":[{"start":{"line":12,"column":37},"end":{"line":12,"column":40}},{"start":{"line":12,"column":43},"end":{"line":12,"column":61}}],"line":12},"7":{"loc":{"start":{"line":12,"column":12},"end":{"line":12,"column":33}},"type":"binary-expr","locations":[{"start":{"line":12,"column":12},"end":{"line":12,"column":15}},{"start":{"line":12,"column":19},"end":{"line":12,"column":33}}],"line":12},"8":{"loc":{"start":{"line":20,"column":8},"end":{"line":32,"column":9}},"type":"if","locations":[{"start":{"line":20,"column":8},"end":{"line":32,"column":9}},{"start":{"line":20,"column":8},"end":{"line":32,"column":9}}],"line":20},"9":{"loc":{"start":{"line":27,"column":16},"end":{"line":30,"column":17}},"type":"if","locations":[{"start":{"line":27,"column":16},"end":{"line":30,"column":17}},{"start":{"line":27,"column":16},"end":{"line":30,"column":17}}],"line":27}},"s":{"0":1,"1":108672,"2":0,"3":108672,"4":101876,"5":101876,"6":0,"7":15,"8":15,"9":15,"10":210548,"11":108672,"12":1,"13":2,"14":1,"15":1,"16":1,"17":1,"18":16,"19":16,"20":16,"21":16,"22":16,"23":108656,"24":108656,"25":101860,"26":0,"27":0,"28":0,"29":1},"f":{"0":108672,"1":108672,"2":0,"3":108672,"4":101876,"5":15,"6":210548,"7":2,"8":16,"9":16,"10":108656,"11":108656},"b":{"0":[1,1,1],"1":[108672,0],"2":[108672,108672],"3":[101876,108672],"4":[108672,108672],"5":[1,1,1],"6":[2,0],"7":[2,2],"8":[16,0],"9":[0,101860]},"inputSourceMap":{"version":3,"file":"/home/ivan/Documents/proj/wallop/backend/src/events/coinList.ts","sources":["/home/ivan/Documents/proj/wallop/backend/src/events/coinList.ts"],"names":[],"mappings":";;;;;;;;;;;;;;AAAA,uEAAsD;AACtD,mEAAkD;AAQlD,MAAM,mBAAmB,GAAG,GAAS,EAAE;IACnC,IAAI;QACA,MAAM,KAAK,GAAG,MAAM,gBAAa,CAAC,QAAQ,EAAE,CAAA;QAC5C,IAAI,KAAK,EAAE;YACP,KAAK,CAAC,IAAI,CAAC,OAAO,CAAC,CAAM,OAAO,EAAC,EAAE;gBAC/B,MAAM,MAAM,GAAG,MAAM,cAAW,CAAC,UAAU,CAAC;oBACxC,MAAM,EAAE,OAAO,CAAC,MAAM;oBACtB,IAAI,EAAE,OAAO,CAAC,IAAI;oBAClB,EAAE,EAAE,OAAO,CAAC,EAAE;iBACjB,CAAC,CAAC;gBACH,IAAI,CAAC,MAAM,EAAE;oBACT,IAAI,IAAI,GAAG,oBAAoB,CAAC;oBAChC,OAAO,IAAI,CAAC;iBACf;YACL,CAAC,CAAA,CAAC,CAAC;SAEN;KACJ;IAAC,OAAO,KAAK,EAAE;QACZ,OAAO,CAAC,GAAG,CAAC,uBAAuB,EAAE,KAAK,CAAC,CAAA;KAC9C;AACL,CAAC,CAAA,CAAA;AACD,kBAAe,mBAAmB,CAAC","sourcesContent":["import marketService from \"../domain/services/market\";\nimport coinService from \"../domain/services/coin\";\n\ninterface coinList {\n    id: number;\n    symbol: string;\n    name: string;\n}\n\nconst updateCoinsDatabase = async () => {\n    try {\n        const coins = await marketService.getCoins()\n        if (coins) {\n            coins.data.forEach(async element => {\n                const result = await coinService.CreateCoin({\n                    symbol: element.symbol,\n                    name: element.name,\n                    id: element.id\n                });\n                if (!result) {\n                    let resp = \"error on save coin\";\n                    return resp;\n                }\n            });\n\n        }\n    } catch (error) {\n        console.log('error on update coins', error)\n    }\n}\nexport default updateCoinsDatabase;"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"3771209ca9908b59cb4d97122db9138c91066965","contentHash":"e29580e24c733a4763c1b913999e4fccf969a44a9828f1d69719c1707f80c6b4"},"/home/ivan/Documents/proj/wallop/backend/src/events/currencyList.ts":{"path":"/home/ivan/Documents/proj/wallop/backend/src/events/currencyList.ts","statementMap":{"0":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"1":{"start":{"line":3,"column":28},"end":{"line":3,"column":110}},"2":{"start":{"line":3,"column":91},"end":{"line":3,"column":106}},"3":{"start":{"line":4,"column":4},"end":{"line":9,"column":7}},"4":{"start":{"line":5,"column":36},"end":{"line":5,"column":97}},"5":{"start":{"line":5,"column":42},"end":{"line":5,"column":70}},"6":{"start":{"line":5,"column":85},"end":{"line":5,"column":95}},"7":{"start":{"line":6,"column":35},"end":{"line":6,"column":100}},"8":{"start":{"line":6,"column":41},"end":{"line":6,"column":73}},"9":{"start":{"line":6,"column":88},"end":{"line":6,"column":98}},"10":{"start":{"line":7,"column":32},"end":{"line":7,"column":116}},"11":{"start":{"line":8,"column":8},"end":{"line":8,"column":78}},"12":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"13":{"start":{"line":12,"column":4},"end":{"line":12,"column":62}},"14":{"start":{"line":14,"column":0},"end":{"line":14,"column":62}},"15":{"start":{"line":15,"column":19},"end":{"line":15,"column":74}},"16":{"start":{"line":16,"column":17},"end":{"line":16,"column":70}},"17":{"start":{"line":17,"column":33},"end":{"line":31,"column":2}},"18":{"start":{"line":17,"column":39},"end":{"line":31,"column":2}},"19":{"start":{"line":18,"column":23},"end":{"line":18,"column":61}},"20":{"start":{"line":19,"column":4},"end":{"line":30,"column":5}},"21":{"start":{"line":20,"column":8},"end":{"line":29,"column":9}},"22":{"start":{"line":21,"column":12},"end":{"line":25,"column":16}},"23":{"start":{"line":21,"column":49},"end":{"line":25,"column":14}},"24":{"start":{"line":22,"column":16},"end":{"line":24,"column":19}},"25":{"start":{"line":28,"column":12},"end":{"line":28,"column":60}},"26":{"start":{"line":32,"column":0},"end":{"line":32,"column":43}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":44},"end":{"line":2,"column":45}},"loc":{"start":{"line":2,"column":89},"end":{"line":10,"column":1}},"line":2},"1":{"name":"adopt","decl":{"start":{"line":3,"column":13},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":26},"end":{"line":3,"column":112}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":70},"end":{"line":3,"column":71}},"loc":{"start":{"line":3,"column":89},"end":{"line":3,"column":108}},"line":3},"3":{"name":"(anonymous_3)","decl":{"start":{"line":4,"column":36},"end":{"line":4,"column":37}},"loc":{"start":{"line":4,"column":63},"end":{"line":9,"column":5}},"line":4},"4":{"name":"fulfilled","decl":{"start":{"line":5,"column":17},"end":{"line":5,"column":26}},"loc":{"start":{"line":5,"column":34},"end":{"line":5,"column":99}},"line":5},"5":{"name":"rejected","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":25}},"loc":{"start":{"line":6,"column":33},"end":{"line":6,"column":102}},"line":6},"6":{"name":"step","decl":{"start":{"line":7,"column":17},"end":{"line":7,"column":21}},"loc":{"start":{"line":7,"column":30},"end":{"line":7,"column":118}},"line":7},"7":{"name":"(anonymous_7)","decl":{"start":{"line":11,"column":56},"end":{"line":11,"column":57}},"loc":{"start":{"line":11,"column":71},"end":{"line":13,"column":1}},"line":11},"8":{"name":"(anonymous_8)","decl":{"start":{"line":17,"column":33},"end":{"line":17,"column":34}},"loc":{"start":{"line":17,"column":39},"end":{"line":31,"column":2}},"line":17},"9":{"name":"(anonymous_9)","decl":{"start":{"line":17,"column":73},"end":{"line":17,"column":74}},"loc":{"start":{"line":17,"column":86},"end":{"line":31,"column":1}},"line":17},"10":{"name":"(anonymous_10)","decl":{"start":{"line":21,"column":36},"end":{"line":21,"column":37}},"loc":{"start":{"line":21,"column":49},"end":{"line":25,"column":14}},"line":21},"11":{"name":"(anonymous_11)","decl":{"start":{"line":21,"column":83},"end":{"line":21,"column":84}},"loc":{"start":{"line":21,"column":96},"end":{"line":25,"column":13}},"line":21}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":17},"end":{"line":2,"column":21}},{"start":{"line":2,"column":25},"end":{"line":2,"column":39}},{"start":{"line":2,"column":44},"end":{"line":10,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":35},"end":{"line":3,"column":109}},"type":"cond-expr","locations":[{"start":{"line":3,"column":56},"end":{"line":3,"column":61}},{"start":{"line":3,"column":64},"end":{"line":3,"column":109}}],"line":3},"2":{"loc":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"type":"binary-expr","locations":[{"start":{"line":4,"column":16},"end":{"line":4,"column":17}},{"start":{"line":4,"column":22},"end":{"line":4,"column":33}}],"line":4},"3":{"loc":{"start":{"line":7,"column":32},"end":{"line":7,"column":115}},"type":"cond-expr","locations":[{"start":{"line":7,"column":46},"end":{"line":7,"column":67}},{"start":{"line":7,"column":70},"end":{"line":7,"column":115}}],"line":7},"4":{"loc":{"start":{"line":8,"column":51},"end":{"line":8,"column":67}},"type":"binary-expr","locations":[{"start":{"line":8,"column":51},"end":{"line":8,"column":61}},{"start":{"line":8,"column":65},"end":{"line":8,"column":67}}],"line":8},"5":{"loc":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"type":"binary-expr","locations":[{"start":{"line":11,"column":23},"end":{"line":11,"column":27}},{"start":{"line":11,"column":31},"end":{"line":11,"column":51}},{"start":{"line":11,"column":56},"end":{"line":13,"column":1}}],"line":11},"6":{"loc":{"start":{"line":12,"column":11},"end":{"line":12,"column":61}},"type":"cond-expr","locations":[{"start":{"line":12,"column":37},"end":{"line":12,"column":40}},{"start":{"line":12,"column":43},"end":{"line":12,"column":61}}],"line":12},"7":{"loc":{"start":{"line":12,"column":12},"end":{"line":12,"column":33}},"type":"binary-expr","locations":[{"start":{"line":12,"column":12},"end":{"line":12,"column":15}},{"start":{"line":12,"column":19},"end":{"line":12,"column":33}}],"line":12},"8":{"loc":{"start":{"line":19,"column":4},"end":{"line":30,"column":5}},"type":"if","locations":[{"start":{"line":19,"column":4},"end":{"line":30,"column":5}},{"start":{"line":19,"column":4},"end":{"line":30,"column":5}}],"line":19}},"s":{"0":1,"1":992,"2":0,"3":992,"4":992,"5":992,"6":0,"7":0,"8":0,"9":0,"10":1984,"11":992,"12":1,"13":2,"14":1,"15":1,"16":1,"17":1,"18":16,"19":16,"20":16,"21":16,"22":16,"23":976,"24":976,"25":0,"26":1},"f":{"0":992,"1":992,"2":0,"3":992,"4":992,"5":0,"6":1984,"7":2,"8":16,"9":16,"10":976,"11":976},"b":{"0":[1,1,1],"1":[992,0],"2":[992,992],"3":[992,992],"4":[992,992],"5":[1,1,1],"6":[2,0],"7":[2,2],"8":[16,0]},"inputSourceMap":{"version":3,"file":"/home/ivan/Documents/proj/wallop/backend/src/events/currencyList.ts","sources":["/home/ivan/Documents/proj/wallop/backend/src/events/currencyList.ts"],"names":[],"mappings":";;;;;;;;;;;;;;AACA,2EAA0D;AAC1D,uEAAsD;AAMtD,MAAM,wBAAwB,GAAG,GAAS,EAAE;IACxC,MAAM,UAAU,GAAG,MAAM,gBAAa,CAAC,aAAa,EAAE,CAAA;IACtD,IAAI,UAAU,EAAE;QACZ,IAAI;YACA,UAAU,CAAC,IAAI,CAAC,OAAO,CAAC,CAAM,OAAO,EAAC,EAAE;gBACpC,MAAM,kBAAe,CAAC,cAAc,CAAC;oBACjC,MAAM,EAAE,OAAO;iBAClB,CAAC,CAAC;YACP,CAAC,CAAA,CAAC,CAAC;SACN;QAAC,OAAO,KAAK,EAAE;YACZ,OAAO,CAAC,GAAG,CAAC,2BAA2B,EAAE,KAAK,CAAC,CAAA;SAClD;KACJ;AACL,CAAC,CAAA,CAAA;AACD,kBAAe,wBAAwB,CAAC","sourcesContent":["import axios from \"axios\";\nimport currencyService from \"../domain/services/currency\";\nimport marketService from \"../domain/services/market\";\n\ninterface currencyList {\n    symbol: string;\n}\n\nconst updateCurrenciesDatabase = async () => {\n    const currencies = await marketService.getCurrencies()\n    if (currencies) {\n        try {\n            currencies.data.forEach(async element => {\n                await currencyService.CreateCurrency({\n                    symbol: element\n                });\n            });\n        } catch (error) {\n            console.log('error on update currencys', error)\n        }\n    }\n}\nexport default updateCurrenciesDatabase;"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"1f97f427bbe19dafb21041a208bdb6e35dbe53cc","contentHash":"dd6db53945699fbeda415c1f0ef8d718d3b1b390d85b063e9f4035ceb2c18518"},"/home/ivan/Documents/proj/wallop/backend/src/domain/services/currency.ts":{"path":"/home/ivan/Documents/proj/wallop/backend/src/domain/services/currency.ts","statementMap":{"0":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"1":{"start":{"line":3,"column":28},"end":{"line":3,"column":110}},"2":{"start":{"line":3,"column":91},"end":{"line":3,"column":106}},"3":{"start":{"line":4,"column":4},"end":{"line":9,"column":7}},"4":{"start":{"line":5,"column":36},"end":{"line":5,"column":97}},"5":{"start":{"line":5,"column":42},"end":{"line":5,"column":70}},"6":{"start":{"line":5,"column":85},"end":{"line":5,"column":95}},"7":{"start":{"line":6,"column":35},"end":{"line":6,"column":100}},"8":{"start":{"line":6,"column":41},"end":{"line":6,"column":73}},"9":{"start":{"line":6,"column":88},"end":{"line":6,"column":98}},"10":{"start":{"line":7,"column":32},"end":{"line":7,"column":116}},"11":{"start":{"line":8,"column":8},"end":{"line":8,"column":78}},"12":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"13":{"start":{"line":12,"column":4},"end":{"line":12,"column":62}},"14":{"start":{"line":14,"column":0},"end":{"line":14,"column":62}},"15":{"start":{"line":15,"column":19},"end":{"line":15,"column":65}},"16":{"start":{"line":16,"column":16},"end":{"line":16,"column":50}},"17":{"start":{"line":18,"column":4},"end":{"line":25,"column":7}},"18":{"start":{"line":19,"column":25},"end":{"line":19,"column":80}},"19":{"start":{"line":20,"column":23},"end":{"line":20,"column":25}},"20":{"start":{"line":21,"column":8},"end":{"line":23,"column":11}},"21":{"start":{"line":22,"column":12},"end":{"line":22,"column":45}},"22":{"start":{"line":24,"column":8},"end":{"line":24,"column":37}},"23":{"start":{"line":28,"column":4},"end":{"line":46,"column":7}},"24":{"start":{"line":29,"column":23},"end":{"line":29,"column":41}},"25":{"start":{"line":30,"column":23},"end":{"line":33,"column":9}},"26":{"start":{"line":34,"column":8},"end":{"line":45,"column":11}},"27":{"start":{"line":39,"column":12},"end":{"line":39,"column":33}},"28":{"start":{"line":40,"column":12},"end":{"line":40,"column":33}},"29":{"start":{"line":41,"column":12},"end":{"line":41,"column":24}},"30":{"start":{"line":44,"column":12},"end":{"line":44,"column":24}},"31":{"start":{"line":48,"column":32},"end":{"line":52,"column":1}},"32":{"start":{"line":49,"column":4},"end":{"line":51,"column":6}},"33":{"start":{"line":53,"column":17},"end":{"line":63,"column":1}},"34":{"start":{"line":54,"column":19},"end":{"line":54,"column":48}},"35":{"start":{"line":55,"column":4},"end":{"line":57,"column":5}},"36":{"start":{"line":56,"column":8},"end":{"line":56,"column":22}},"37":{"start":{"line":58,"column":28},"end":{"line":58,"column":30}},"38":{"start":{"line":59,"column":4},"end":{"line":59,"column":78}},"39":{"start":{"line":59,"column":30},"end":{"line":59,"column":76}},"40":{"start":{"line":60,"column":4},"end":{"line":62,"column":7}},"41":{"start":{"line":64,"column":0},"end":{"line":69,"column":2}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":44},"end":{"line":2,"column":45}},"loc":{"start":{"line":2,"column":89},"end":{"line":10,"column":1}},"line":2},"1":{"name":"adopt","decl":{"start":{"line":3,"column":13},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":26},"end":{"line":3,"column":112}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":70},"end":{"line":3,"column":71}},"loc":{"start":{"line":3,"column":89},"end":{"line":3,"column":108}},"line":3},"3":{"name":"(anonymous_3)","decl":{"start":{"line":4,"column":36},"end":{"line":4,"column":37}},"loc":{"start":{"line":4,"column":63},"end":{"line":9,"column":5}},"line":4},"4":{"name":"fulfilled","decl":{"start":{"line":5,"column":17},"end":{"line":5,"column":26}},"loc":{"start":{"line":5,"column":34},"end":{"line":5,"column":99}},"line":5},"5":{"name":"rejected","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":25}},"loc":{"start":{"line":6,"column":33},"end":{"line":6,"column":102}},"line":6},"6":{"name":"step","decl":{"start":{"line":7,"column":17},"end":{"line":7,"column":21}},"loc":{"start":{"line":7,"column":30},"end":{"line":7,"column":118}},"line":7},"7":{"name":"(anonymous_7)","decl":{"start":{"line":11,"column":56},"end":{"line":11,"column":57}},"loc":{"start":{"line":11,"column":71},"end":{"line":13,"column":1}},"line":11},"8":{"name":"getCurrencies","decl":{"start":{"line":17,"column":9},"end":{"line":17,"column":22}},"loc":{"start":{"line":17,"column":25},"end":{"line":26,"column":1}},"line":17},"9":{"name":"(anonymous_9)","decl":{"start":{"line":18,"column":43},"end":{"line":18,"column":44}},"loc":{"start":{"line":18,"column":56},"end":{"line":25,"column":5}},"line":18},"10":{"name":"(anonymous_10)","decl":{"start":{"line":21,"column":33},"end":{"line":21,"column":34}},"loc":{"start":{"line":21,"column":44},"end":{"line":23,"column":9}},"line":21},"11":{"name":"CreateCurrency","decl":{"start":{"line":27,"column":9},"end":{"line":27,"column":23}},"loc":{"start":{"line":27,"column":36},"end":{"line":47,"column":1}},"line":27},"12":{"name":"(anonymous_12)","decl":{"start":{"line":28,"column":43},"end":{"line":28,"column":44}},"loc":{"start":{"line":28,"column":56},"end":{"line":46,"column":5}},"line":28},"13":{"name":"(anonymous_13)","decl":{"start":{"line":38,"column":18},"end":{"line":38,"column":19}},"loc":{"start":{"line":38,"column":28},"end":{"line":42,"column":9}},"line":38},"14":{"name":"(anonymous_14)","decl":{"start":{"line":43,"column":19},"end":{"line":43,"column":20}},"loc":{"start":{"line":43,"column":30},"end":{"line":45,"column":9}},"line":43},"15":{"name":"(anonymous_15)","decl":{"start":{"line":48,"column":32},"end":{"line":48,"column":33}},"loc":{"start":{"line":48,"column":38},"end":{"line":52,"column":1}},"line":48},"16":{"name":"(anonymous_16)","decl":{"start":{"line":53,"column":17},"end":{"line":53,"column":18}},"loc":{"start":{"line":53,"column":37},"end":{"line":63,"column":1}},"line":53},"17":{"name":"(anonymous_17)","decl":{"start":{"line":59,"column":23},"end":{"line":59,"column":24}},"loc":{"start":{"line":59,"column":30},"end":{"line":59,"column":76}},"line":59}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":17},"end":{"line":2,"column":21}},{"start":{"line":2,"column":25},"end":{"line":2,"column":39}},{"start":{"line":2,"column":44},"end":{"line":10,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":35},"end":{"line":3,"column":109}},"type":"cond-expr","locations":[{"start":{"line":3,"column":56},"end":{"line":3,"column":61}},{"start":{"line":3,"column":64},"end":{"line":3,"column":109}}],"line":3},"2":{"loc":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"type":"binary-expr","locations":[{"start":{"line":4,"column":16},"end":{"line":4,"column":17}},{"start":{"line":4,"column":22},"end":{"line":4,"column":33}}],"line":4},"3":{"loc":{"start":{"line":7,"column":32},"end":{"line":7,"column":115}},"type":"cond-expr","locations":[{"start":{"line":7,"column":46},"end":{"line":7,"column":67}},{"start":{"line":7,"column":70},"end":{"line":7,"column":115}}],"line":7},"4":{"loc":{"start":{"line":8,"column":51},"end":{"line":8,"column":67}},"type":"binary-expr","locations":[{"start":{"line":8,"column":51},"end":{"line":8,"column":61}},{"start":{"line":8,"column":65},"end":{"line":8,"column":67}}],"line":8},"5":{"loc":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"type":"binary-expr","locations":[{"start":{"line":11,"column":23},"end":{"line":11,"column":27}},{"start":{"line":11,"column":31},"end":{"line":11,"column":51}},{"start":{"line":11,"column":56},"end":{"line":13,"column":1}}],"line":11},"6":{"loc":{"start":{"line":12,"column":11},"end":{"line":12,"column":61}},"type":"cond-expr","locations":[{"start":{"line":12,"column":37},"end":{"line":12,"column":40}},{"start":{"line":12,"column":43},"end":{"line":12,"column":61}}],"line":12},"7":{"loc":{"start":{"line":12,"column":12},"end":{"line":12,"column":33}},"type":"binary-expr","locations":[{"start":{"line":12,"column":12},"end":{"line":12,"column":15}},{"start":{"line":12,"column":19},"end":{"line":12,"column":33}}],"line":12},"8":{"loc":{"start":{"line":55,"column":4},"end":{"line":57,"column":5}},"type":"if","locations":[{"start":{"line":55,"column":4},"end":{"line":57,"column":5}},{"start":{"line":55,"column":4},"end":{"line":57,"column":5}}],"line":55}},"s":{"0":1,"1":0,"2":0,"3":976,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":976,"11":976,"12":1,"13":1,"14":1,"15":1,"16":1,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":976,"24":976,"25":976,"26":976,"27":976,"28":976,"29":976,"30":0,"31":1,"32":0,"33":1,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":1},"f":{"0":976,"1":0,"2":0,"3":976,"4":0,"5":0,"6":976,"7":1,"8":0,"9":0,"10":0,"11":976,"12":976,"13":976,"14":0,"15":0,"16":0,"17":0},"b":{"0":[1,1,1],"1":[0,0],"2":[976,976],"3":[976,0],"4":[976,976],"5":[1,1,1],"6":[1,0],"7":[1,1],"8":[0,0]},"inputSourceMap":{"version":3,"file":"/home/ivan/Documents/proj/wallop/backend/src/domain/services/currency.ts","sources":["/home/ivan/Documents/proj/wallop/backend/src/domain/services/currency.ts"],"names":[],"mappings":";;;;;;;;;;;;;;AAAA,kEAAyD;AAEzD,mDAAiE;AAGjE,SAAe,aAAa;;QAExB,IAAI,UAAU,GAAG,MAAM,kBAAQ,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,MAAM,CAAC,aAAa,CAAC,CAAC;QAE/D,IAAI,QAAQ,GAAG,EAAE,CAAC;QAClB,MAAM,UAAU,CAAC,OAAO,CAAC,OAAO,CAAC,EAAE;YAE/B,QAAQ,IAAI,OAAO,CAAC,MAAM,GAAG,GAAG,CAAA;QACpC,CAAC,CAAC,CAAC;QACH,OAAO,QAAQ,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;IACjC,CAAC;CAAA;AAED,SAAe,cAAc,CAAC,EAC1B,MAAM,EACe;;QAGrB,MAAM,MAAM,GAAG,EAAE,MAAM,EAAE,MAAM,EAAE,CAAC;QAClC,MAAM,MAAM,GAAG;YACX,MAAM;YACN,WAAW,EAAE,IAAI,IAAI,EAAE;SAC1B,CAAC;QAEF,OAAO,kBAAQ,CAAC,gBAAgB,CAAC,MAAM,EAAE,MAAM,EAAE;YAC7C,GAAG,EAAE,IAAI;YACT,MAAM,EAAE,IAAI,CAAC,kCAAkC;SAClD,CAAC;aACG,IAAI,CAAC,CAAC,IAAe,EAAE,EAAE;YACtB,IAAI,CAAC,GAAG,GAAG,SAAS,CAAA;YACpB,IAAI,CAAC,GAAG,GAAG,SAAS,CAAA;YACpB,OAAO,IAAI,CAAC;QAChB,CAAC,CAAC;aACD,KAAK,CAAC,CAAC,KAAY,EAAE,EAAE;YACpB,MAAM,KAAK,CAAC;QAChB,CAAC,CAAC,CAAC;IACX,CAAC;CAAA;AAED,MAAM,uBAAuB,GAAG,GAAG,EAAE;IACjC,OAAO;QACH,YAAI,CAAC,QAAQ,CAAC,CAAC,QAAQ,EAAE,CAAC,QAAQ,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,CAAC;KACjD,CAAA;AACL,CAAC,CAAA;AAED,MAAM,QAAQ,GAAG,CAAC,GAAG,EAAE,GAAG,EAAE,IAAI,EAAE,EAAE;IAChC,MAAM,MAAM,GAAG,wBAAgB,CAAC,GAAG,CAAC,CAAA;IACpC,IAAI,MAAM,CAAC,OAAO,EAAE,EAAE;QAClB,OAAO,IAAI,EAAE,CAAA;KAChB;IACD,MAAM,eAAe,GAAG,EAAE,CAAA;IAC1B,MAAM,CAAC,KAAK,EAAE,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE,CAAC,eAAe,CAAC,IAAI,CAAC,EAAE,CAAC,GAAG,CAAC,KAAK,CAAC,EAAE,GAAG,CAAC,GAAG,EAAE,CAAC,CAAC,CAAA;IAEzE,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC;QACxB,MAAM,EAAE,eAAe;KAC1B,CAAC,CAAA;AACN,CAAC,CAAA;AAED,kBAAe;IACX,cAAc;IACd,QAAQ;IACR,aAAa;IACb,uBAAuB;CAC1B,CAAC","sourcesContent":["import Currency, { Icurrency } from '../models/currency';\nimport { CreateQuery } from 'mongoose';\nimport { body, validationResult } from 'express-validator/check';\n\n\nasync function getCurrencies(): Promise<string> {\n\n    let currencies = await Currency.find({}).select('symbol -_id');\n\n    let filtered = \"\";\n    await currencies.forEach(element => {\n\n        filtered += element.symbol + \",\"\n    });\n    return filtered.slice(0, -1);\n}\n\nasync function CreateCurrency({\n    symbol\n}: CreateQuery<Icurrency>): Promise<Icurrency> {\n\n\n    const filter = { symbol: symbol };\n    const update = {\n        symbol,\n        last_update: new Date(),\n    };\n\n    return Currency.findOneAndUpdate(filter, update, {\n        new: true,\n        upsert: true // Make this update into an upsert\n    })\n        .then((data: Icurrency) => {\n            data.__v = undefined\n            data._id = undefined\n            return data;\n        })\n        .catch((error: Error) => {\n            throw error;\n        });\n}\n\nconst currencyValidationRules = () => {\n    return [\n        body('symbol').isString().isLength({ min: 3 }),\n    ]\n}\n\nconst validate = (req, res, next) => {\n    const errors = validationResult(req)\n    if (errors.isEmpty()) {\n        return next()\n    }\n    const extractedErrors = []\n    errors.array().map(err => extractedErrors.push({ [err.param]: err.msg }))\n\n    return res.status(422).json({\n        errors: extractedErrors,\n    })\n}\n\nexport default {\n    CreateCurrency,\n    validate,\n    getCurrencies,\n    currencyValidationRules\n};"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"e9b468a3a27c20a83b463da7356a9d2e15ccc2f2","contentHash":"539ae2c87c4703e109b3041f8b97a977772cd12b503d7142dafe5157d49646e2"},"/home/ivan/Documents/proj/wallop/backend/src/domain/models/currency.ts":{"path":"/home/ivan/Documents/proj/wallop/backend/src/domain/models/currency.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":8,"column":3}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},"2":{"start":{"line":3,"column":26},"end":{"line":3,"column":33}},"3":{"start":{"line":4,"column":4},"end":{"line":4,"column":89}},"4":{"start":{"line":4,"column":71},"end":{"line":4,"column":83}},"5":{"start":{"line":6,"column":4},"end":{"line":6,"column":33}},"6":{"start":{"line":6,"column":26},"end":{"line":6,"column":33}},"7":{"start":{"line":7,"column":4},"end":{"line":7,"column":17}},"8":{"start":{"line":9,"column":25},"end":{"line":13,"column":2}},"9":{"start":{"line":10,"column":4},"end":{"line":10,"column":72}},"10":{"start":{"line":12,"column":4},"end":{"line":12,"column":21}},"11":{"start":{"line":14,"column":19},"end":{"line":20,"column":1}},"12":{"start":{"line":15,"column":4},"end":{"line":15,"column":42}},"13":{"start":{"line":15,"column":31},"end":{"line":15,"column":42}},"14":{"start":{"line":16,"column":17},"end":{"line":16,"column":19}},"15":{"start":{"line":17,"column":4},"end":{"line":17,"column":141}},"16":{"start":{"line":17,"column":21},"end":{"line":17,"column":141}},"17":{"start":{"line":17,"column":40},"end":{"line":17,"column":141}},"18":{"start":{"line":17,"column":109},"end":{"line":17,"column":141}},"19":{"start":{"line":18,"column":4},"end":{"line":18,"column":36}},"20":{"start":{"line":19,"column":4},"end":{"line":19,"column":18}},"21":{"start":{"line":21,"column":0},"end":{"line":21,"column":62}},"22":{"start":{"line":22,"column":19},"end":{"line":22,"column":52}},"23":{"start":{"line":23,"column":19},"end":{"line":26,"column":2}},"24":{"start":{"line":27,"column":0},"end":{"line":27,"column":67}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":74},"end":{"line":2,"column":75}},"loc":{"start":{"line":2,"column":96},"end":{"line":5,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":4,"column":58},"end":{"line":4,"column":59}},"loc":{"start":{"line":4,"column":69},"end":{"line":4,"column":85}},"line":4},"2":{"name":"(anonymous_2)","decl":{"start":{"line":5,"column":6},"end":{"line":5,"column":7}},"loc":{"start":{"line":5,"column":28},"end":{"line":8,"column":1}},"line":5},"3":{"name":"(anonymous_3)","decl":{"start":{"line":9,"column":80},"end":{"line":9,"column":81}},"loc":{"start":{"line":9,"column":95},"end":{"line":11,"column":1}},"line":9},"4":{"name":"(anonymous_4)","decl":{"start":{"line":11,"column":5},"end":{"line":11,"column":6}},"loc":{"start":{"line":11,"column":20},"end":{"line":13,"column":1}},"line":11},"5":{"name":"(anonymous_5)","decl":{"start":{"line":14,"column":50},"end":{"line":14,"column":51}},"loc":{"start":{"line":14,"column":65},"end":{"line":20,"column":1}},"line":14}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":8,"column":3}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":57},"end":{"line":8,"column":2}}],"line":2},"1":{"loc":{"start":{"line":2,"column":57},"end":{"line":8,"column":2}},"type":"cond-expr","locations":[{"start":{"line":2,"column":74},"end":{"line":5,"column":1}},{"start":{"line":5,"column":6},"end":{"line":8,"column":1}}],"line":2},"2":{"loc":{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},"type":"if","locations":[{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},{"start":{"line":3,"column":4},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":6,"column":4},"end":{"line":6,"column":33}},"type":"if","locations":[{"start":{"line":6,"column":4},"end":{"line":6,"column":33}},{"start":{"line":6,"column":4},"end":{"line":6,"column":33}}],"line":6},"4":{"loc":{"start":{"line":9,"column":25},"end":{"line":13,"column":2}},"type":"binary-expr","locations":[{"start":{"line":9,"column":26},"end":{"line":9,"column":30}},{"start":{"line":9,"column":34},"end":{"line":9,"column":57}},{"start":{"line":9,"column":63},"end":{"line":13,"column":1}}],"line":9},"5":{"loc":{"start":{"line":9,"column":63},"end":{"line":13,"column":1}},"type":"cond-expr","locations":[{"start":{"line":9,"column":80},"end":{"line":11,"column":1}},{"start":{"line":11,"column":5},"end":{"line":13,"column":1}}],"line":9},"6":{"loc":{"start":{"line":14,"column":19},"end":{"line":20,"column":1}},"type":"binary-expr","locations":[{"start":{"line":14,"column":20},"end":{"line":14,"column":24}},{"start":{"line":14,"column":28},"end":{"line":14,"column":45}},{"start":{"line":14,"column":50},"end":{"line":20,"column":1}}],"line":14},"7":{"loc":{"start":{"line":15,"column":4},"end":{"line":15,"column":42}},"type":"if","locations":[{"start":{"line":15,"column":4},"end":{"line":15,"column":42}},{"start":{"line":15,"column":4},"end":{"line":15,"column":42}}],"line":15},"8":{"loc":{"start":{"line":15,"column":8},"end":{"line":15,"column":29}},"type":"binary-expr","locations":[{"start":{"line":15,"column":8},"end":{"line":15,"column":11}},{"start":{"line":15,"column":15},"end":{"line":15,"column":29}}],"line":15},"9":{"loc":{"start":{"line":17,"column":4},"end":{"line":17,"column":141}},"type":"if","locations":[{"start":{"line":17,"column":4},"end":{"line":17,"column":141}},{"start":{"line":17,"column":4},"end":{"line":17,"column":141}}],"line":17},"10":{"loc":{"start":{"line":17,"column":40},"end":{"line":17,"column":141}},"type":"if","locations":[{"start":{"line":17,"column":40},"end":{"line":17,"column":141}},{"start":{"line":17,"column":40},"end":{"line":17,"column":141}}],"line":17},"11":{"loc":{"start":{"line":17,"column":44},"end":{"line":17,"column":107}},"type":"binary-expr","locations":[{"start":{"line":17,"column":44},"end":{"line":17,"column":59}},{"start":{"line":17,"column":63},"end":{"line":17,"column":107}}],"line":17}},"s":{"0":1,"1":9,"2":9,"3":9,"4":1,"5":0,"6":0,"7":0,"8":1,"9":1,"10":0,"11":1,"12":1,"13":0,"14":1,"15":1,"16":1,"17":51,"18":9,"19":1,"20":1,"21":1,"22":1,"23":1,"24":1},"f":{"0":9,"1":1,"2":0,"3":1,"4":0,"5":1},"b":{"0":[1,1,1],"1":[1,0],"2":[9,0],"3":[0,0],"4":[1,1,1],"5":[1,0],"6":[1,1,1],"7":[0,1],"8":[1,1],"9":[1,0],"10":[9,42],"11":[51,51]},"inputSourceMap":{"version":3,"file":"/home/ivan/Documents/proj/wallop/backend/src/domain/models/currency.ts","sources":["/home/ivan/Documents/proj/wallop/backend/src/domain/models/currency.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;AAAA,qDAAsD;AAOtD,MAAM,UAAU,GAAW,IAAI,iBAAM,CAAC;IAClC,MAAM,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE,QAAQ,EAAE,CAAC,IAAI,EAAE,iBAAiB,CAAC,EAAE,MAAM,EAAE,CAAC,IAAI,EAAE,uBAAuB,CAAC,EAAE;IACtG,WAAW,EAAE,EAAE,IAAI,EAAE,IAAI,EAAE;CAE9B,CAAC,CAAC;AAEH,kBAAe,kBAAQ,CAAC,KAAK,CAAY,UAAU,EAAE,UAAU,CAAC,CAAC","sourcesContent":["import mongoose, { Schema, Document } from 'mongoose';\n\nexport interface Icurrency extends Document {\n    symbol: string,\n    last_update?: Date\n}\n\nconst UserSchema: Schema = new Schema({\n    symbol: { type: String, required: [true, 'Enter a symbol.'], unique: [true, 'That symbol is taken.'] },\n    last_update: { type: Date },\n\n});\n\nexport default mongoose.model<Icurrency>('Currency', UserSchema);"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"69f53b1acf7bb4ee28d98f2143b7275087a5b1b5","contentHash":"870c797d3b45547a0c18a7938ad491a00313f92a09f9a20882ac3ea6bfe602c2"},"/home/ivan/Documents/proj/wallop/backend/src/test/user.ts":{"path":"/home/ivan/Documents/proj/wallop/backend/src/test/user.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":15},"end":{"line":6,"column":66}},"4":{"start":{"line":7,"column":15},"end":{"line":7,"column":37}},"5":{"start":{"line":8,"column":13},"end":{"line":8,"column":28}},"6":{"start":{"line":9,"column":15},"end":{"line":9,"column":35}},"7":{"start":{"line":10,"column":13},"end":{"line":10,"column":33}},"8":{"start":{"line":11,"column":0},"end":{"line":11,"column":19}},"9":{"start":{"line":12,"column":13},"end":{"line":12,"column":24}},"10":{"start":{"line":13,"column":24},"end":{"line":13,"column":50}},"11":{"start":{"line":14,"column":18},"end":{"line":14,"column":22}},"12":{"start":{"line":15,"column":0},"end":{"line":52,"column":3}},"13":{"start":{"line":27,"column":4},"end":{"line":31,"column":7}},"14":{"start":{"line":28,"column":8},"end":{"line":30,"column":11}},"15":{"start":{"line":29,"column":12},"end":{"line":29,"column":45}},"16":{"start":{"line":32,"column":4},"end":{"line":51,"column":7}},"17":{"start":{"line":33,"column":8},"end":{"line":50,"column":11}},"18":{"start":{"line":34,"column":12},"end":{"line":49,"column":15}},"19":{"start":{"line":45,"column":16},"end":{"line":46,"column":37}},"20":{"start":{"line":46,"column":20},"end":{"line":46,"column":37}},"21":{"start":{"line":47,"column":16},"end":{"line":47,"column":52}},"22":{"start":{"line":48,"column":16},"end":{"line":48,"column":23}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":15,"column":25},"end":{"line":15,"column":26}},"loc":{"start":{"line":15,"column":31},"end":{"line":52,"column":1}},"line":15},"2":{"name":"(anonymous_2)","decl":{"start":{"line":27,"column":42},"end":{"line":27,"column":43}},"loc":{"start":{"line":27,"column":48},"end":{"line":31,"column":5}},"line":27},"3":{"name":"(anonymous_3)","decl":{"start":{"line":28,"column":26},"end":{"line":28,"column":27}},"loc":{"start":{"line":28,"column":32},"end":{"line":30,"column":9}},"line":28},"4":{"name":"(anonymous_4)","decl":{"start":{"line":32,"column":27},"end":{"line":32,"column":28}},"loc":{"start":{"line":32,"column":33},"end":{"line":51,"column":5}},"line":32},"5":{"name":"(anonymous_5)","decl":{"start":{"line":33,"column":48},"end":{"line":33,"column":49}},"loc":{"start":{"line":33,"column":58},"end":{"line":50,"column":9}},"line":33},"6":{"name":"(anonymous_6)","decl":{"start":{"line":44,"column":21},"end":{"line":44,"column":22}},"loc":{"start":{"line":44,"column":41},"end":{"line":49,"column":13}},"line":44}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":45,"column":16},"end":{"line":46,"column":37}},"type":"if","locations":[{"start":{"line":45,"column":16},"end":{"line":46,"column":37}},{"start":{"line":45,"column":16},"end":{"line":46,"column":37}}],"line":45}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":0,"21":1,"22":1},"f":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1},"b":{"0":[1,1,1],"1":[1,0],"2":[1,1],"3":[0,1]},"inputSourceMap":{"version":3,"file":"/home/ivan/Documents/proj/wallop/backend/src/test/user.ts","sources":["/home/ivan/Documents/proj/wallop/backend/src/test/user.ts"],"names":[],"mappings":";;;;;AAAA,mEAAkD;AAClD,MAAM,MAAM,GAAG,OAAO,CAAC,MAAM,CAAC,CAAC,MAAM,CAAC;AACtC,MAAM,IAAI,GAAG,OAAO,CAAC,MAAM,CAAC,CAAC;AAC7B,IAAI,QAAQ,GAAG,OAAO,CAAC,WAAW,CAAC,CAAC;AACpC,IAAI,MAAM,GAAG,OAAO,CAAC,WAAW,CAAC,CAAC;AAClC,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;AACnB,IAAI,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC;AACzB,IAAI,iBAAiB,GAAG,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC;AACnD,IAAI,WAAW,GAAG,IAAI,CAAC;AAEvB,QAAQ,CAAC,cAAc,EAAE,GAAG,EAAE;IAE1B;;;;;;;;;;YAUQ;IAER,QAAQ,CAAC,2BAA2B,EAAE,GAAG,EAAE;QAEvC,EAAE,CAAC,aAAa,EAAE,GAAG,EAAE;YACnB,MAAM,CAAC,SAAS,CAAC,cAAW,CAAC,CAAC;QAClC,CAAC,CAAC,CAAC;IACP,CAAC,CAAC,CAAC;IAEH,QAAQ,CAAC,YAAY,EAAE,GAAG,EAAE;QACxB,EAAE,CAAC,mCAAmC,EAAE,CAAC,IAAI,EAAE,EAAE;YAC7C,iBAAiB,CAAC,IAAI,CAAC,UAAU,CAAC;gBAC9B,oDAAoD;iBACnD,IAAI,CAAC;gBACF,MAAM,EAAE,MAAM;gBACd,UAAU,EAAE,cAAc;gBAC1B,UAAU,EAAE,UAAU;gBACtB,UAAU,EAAE,cAAc;gBAC1B,OAAO,EAAE,UAAU;gBACnB,aAAa,EAAE,KAAK;aACvB,CAAC;iBACD,GAAG,CAAC,UAAU,GAAG,EAAE,GAAG;gBACnB,IAAI,GAAG;oBACH,OAAO,IAAI,CAAC,GAAG,CAAC,CAAC;gBAErB,MAAM,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,QAAQ,CAAC,CAAC;gBACpC,IAAI,EAAE,CAAC;YACX,CAAC,CAAC,CAAC;QACX,CAAC,CAAC,CAAC;IACP,CAAC,CAAC,CAAC;AACP,CAAC,CAAC,CAAC","sourcesContent":["import userService from \"../domain/services/user\";\nconst assert = require(\"chai\").assert;\nconst chai = require(\"chai\");\nlet chaiHttp = require('chai-http');\nlet server = require('../server');\nchai.use(chaiHttp);\nvar expect = chai.expect;\nvar authenticatedUser = chai.request.agent(server);\nvar credentials = null;\n\ndescribe(\"User Service\", () => {\n\n    /*   before(function (done) {\n          authenticatedUser.post('/v1/login')\n              .send({ \"username\": \"Ivansalazar\", \"password\": \"asa12aawQ312\" })\n              .end(function (err, res) {\n                  if (err)\n                      return done(err);\n  \n                  credentials = res.body.user.accessToken;\n                  done();\n              });\n      }); */\n\n    describe(\"its a instance of service\", () => {\n\n        it(\"Is not null\", () => {\n            assert.isNotNull(userService);\n        });\n    });\n\n    describe(\"/POST user\", () => {\n        it(\"Should be able to register a user\", (done) => {\n            authenticatedUser.post('/v1/user')\n                //.set({ \"Authorization\": `Bearer ${credentials}` })\n                .send({\n                    \"name\": \"ivan\",\n                    \"username\": \"Ivansalazar2\",\n                    \"lastName\": \"salazar2\",\n                    \"password\": \"asa12aawQ312\",\n                    \"email\": \"dfadfadf\",\n                    \"prefer_coin\": \"jpy\"\n                })\n                .end(function (err, res) {\n                    if (err)\n                        return done(err);\n\n                    expect(res.body).to.be.an('Object');\n                    done();\n                });\n        });\n    });\n});\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"27f3d688bae28189e8d52315c7cda3a21180719f","contentHash":"4ac5e374418942d644ccf89366c3ecc05bbb6851baab733700795591772a6e61"}}